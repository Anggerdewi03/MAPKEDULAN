//>>built
require({cache:{"esri/tasks/support/Query":function(){define(["../../core/deprecate","../../core/Logger","../../rest/support/Query"],function(b,a,q){a=a.getLogger("esri.tasks.support.Query");b.deprecatedModule(a,"esri.tasks.support.Query",{replacement:"esri.rest.support.Query",version:"4.20",warnOnce:!0});return q})},"fx3d/views/3d/support/fx3dUtils":function(){define("dojo/_base/array dojox/validate/regexp esri/core/mathUtils esri/core/libs/gl-matrix-2/vec3f64 esri/core/libs/gl-matrix-2/mat4f64 esri/core/libs/gl-matrix-2/vec3 esri/core/libs/gl-matrix-2/mat4 ../webgl-engine-extensions/constraints dojo/text!../effects/config.json".split(" "),
function(b,a,q,p,g,m,d,f,l){p=p.vec3f64;g=g.mat4f64;m=m.vec3;d=d.mat4;var t=q.deg2rad(1),y=q.rad2deg(1),w=p.fromValues(0,0,1),v=m.normalize(p.fromValues(1,1,1),p.fromValues(1,1,1)),F=g.create(),x=p.create(),u=p.create(),H=p.create(),I=p.create();l=JSON.parse(l);var B;window.fx3d={version:"1.2.3",description:"javascript library for 3D data visualization",copyright:"Esri R\x26D Center Beijing"};var K={layerId:"3dfx-",enableAddTesting:!0,debug_timeCost:!0,debug_showPoint:!1,debug_clearEarth:!1,KeySplit:"$",
NotFound:"NULL",CSVDateFileSuffix:"_dates",DataFormatNotSupported:"not-supported",DateToValueOfTime:-1,wgs84ToSphericalEngineCoords:function(c,k,C,D){var n=f.EARTH_RADIUS+c[k+2],z=t*c[k+1];c=t*c[k];k=Math.cos(z);C[D++]=Math.cos(c)*k*n;C[D++]=Math.sin(c)*k*n;C[D]=Math.sin(z)*n},sphericalEngineCoordsToWGS84:function(c,k,C,D){var n=c[k],z=c[k+1],h=c[k+2];n=Math.sqrt(n*n+z*z+h*h);z=q.asinClamped(c[k+2]/n);c=(0<c[k+1]?1:-1)*q.acosClamped(c[k]/(Math.cos(z)*n));C[D++]=y*c;C[D++]=y*z;C[D]=n-f.EARTH_RADIUS},
wgs84ToWebMerc:function(c,k,C,D){var n=.4999999*Math.PI,z=t*c[k+1];z=K.clamp(z,-n,n);n=Math.sin(z);C[D++]=t*c[k]*f.EARTH_RADIUS;C[D++]=f.EARTH_RADIUS/2*Math.log((1+n)/(1-n));C[D]=c[k+2]},webMercToWGS84:function(c,k,C,D){C[D++]=y*(c[k++]/f.EARTH_RADIUS);C[D++]=y*(Math.PI/2-2*Math.atan(Math.exp(-1*c[k++]/f.EARTH_RADIUS)));C[D]=c[k]},clamp:function(c,k,C){return c<k?k:c>C?C:c},checkTimeSlider:function(c){var k=null;return c instanceof Array&&b.some(c,function(C){if(C.attributes.pointId===K.DateToValueOfTime){k=
{};for(var D in C.attributes)D.startWith("valueOfTime")&&(k[D]=C.attributes[D]);return!0}}),k},isDigit:function(c){return null!==/^-?\d+\.?\d*$/.exec(c)&&""!==c},rgba2float:function(c){return c[0]/256+c[1]/65536+c[2]/16777216},endsWith:function(c,k){return-1!==c.indexOf(k,c.length-k.length)},mod:function(c,k){var C;return C=parseInt(c/k,10),c-=C*k,0>c&&(c+=k),c},nextHighestPowerOfTwo:function(c){--c;for(var k=1;32>k;k<<=1)c|=c>>k;return c+1},isPowerOfTwo:function(c){return 0===(c&c-1)&&0!==c},doubleTo2Floats:function(c){var k,
C,D;return 0<=c?(D=65536*Math.floor(c/65536),k=D,C=c-k):(D=65536*Math.floor(-c/65536),k=-D,C=c+D),[k,C]},vec3DoubleTo2Floats:function(c){if(c instanceof Array){for(var k=[],C=0;C<c.length;C++)k.push(this.doubleTo2Floats(c[C]));return k}},littleEndian:function(){var c=new ArrayBuffer(2);return(new DataView(c)).setInt16(0,256,!0),256===(new Int16Array(c))[0]}(),Log:{Info:0,Warn:1,Error:2,msg:function(c,k,C){if("number"==typeof c&&"string"==typeof k&&"string"==typeof C)switch(c){case this.Info:console.info(k+
": "+C);break;case this.Warn:console.warn(k+": "+C);break;case this.Error:console.error(k+": "+C)}}},ExpDataSourceType:{CSV:"csv",FeatureServer:"featureserver",Grib2:"grib2",Volume:"volume"},EffectType:{AreaExtrude:"AreaExtrude",DensityMesh:"DensityMesh",PointExtrude:"PointExtrude",Bounce:"Bounce",Pulse:"Pulse",Fireball:"Fireball",JetTrail:"JetTrail",LineBox:"LineBox",Worm:"Worm",HeatLine:"HeatLine",DensityWall:"DensityWall",HeatGrid:"HeatGrid",Current:"Current",Cascade:"Cascade",Volume:"Volume"},
EffectDataFormat:{AreaExtrude:{keyFields:["boundaryId"],checkRules:["multi time values"]},DensityMesh:{keyFields:["areaId"],checkRules:["multi time values"]},PointExtrude:{keyFields:["pointId"],checkRules:["multi time values"]},Bounce:{keyFields:["pointId"],checkRules:["multi time values"]},Pulse:{keyFields:["pointId"],checkRules:["single time value"]},Fireball:{keyFields:["pointId","pathId"],checkRules:["single time value"]},JetTrail:{keyFields:["pointId","pathId"],checkRules:["single time value"]},
LineBox:{keyFields:["pointId","pathId"],checkRules:["single time value"]},Worm:{keyFields:["pointId","pathId"],checkRules:["single time value"]},HeatLine:{keyFields:["pointId","pathId"],checkRules:["multi time values"]},DensityWall:{keyFields:["pointId","pathId"],checkRules:["multi time values"]},HeatGrid:{keyFields:["gfs"],checkRules:["multi time values"]},Current:{keyFields:["gfs"],checkRules:["multi time values"]},Cascade:{keyFields:["pointId","pathId"],checkRules:["multi time values"]}},EffectDataType:{AreaType:["DensityMesh"],
BoundaryType:["AreaExtrude"],PathType:"Cascade Fireball JetTrail LineBox Worm HeatLine DensityWall".split(" "),PointType:["PointExtrude","Bounce","Pulse"],GfsType:["HeatGrid","Current"],VolumeType:["Volume"]},getLayerTypeOfVolume:function(c){switch(c){case "Q":return 1;case "N":case "N2":return 2;case "P2s":return 3;case "P1x":return 4;case "P1s":return 5;case "C2t":case "C3t":return 6;case "C2b":return 7;case "O1l":case "O1+2":return 8}return 0},groupLayerType:function(c){var k,C;for(k in c)if("N"===
k)for(C in c)"N2"===C&&delete c[C];else if("N2"===k)for(C in c)"N"===C&&delete c[C];else if("O1l"===k)for(C in c)"O1+2"===C&&delete c[C];else if("O1+2"===k)for(C in c)"O1l"===C&&delete c[C];else if("C2t"===k)for(C in c)"C3t"===C&&delete c[C];else if("C3t"===k)for(C in c)"C2t"===C&&delete c[C]},addTestEffect:function(c,k){if("string"==typeof c&&"string"==typeof k){var C;"point"===k?C=this.EffectDataType.PointType:"area"===k?C=this.EffectDataType.AreaType:"path"===k?C=this.EffectDataType.PathType:"boundary"===
k?C=this.EffectDataType.BoundaryType:"gfs"===k?C=this.EffectDataType.GfsType:"volume"===k&&(C=this.EffectDataType.Volume);C instanceof Array&&(this.EffectType[c]=c,C.push(c))}},TypeCheckResult:{NOT_MATHCH:1,TYPE_FIELD_MISSED:2,ALL_FIELDS_MISSED:3,ITEM_VALUE_INVALID:4,SUCCESS:100,SUCCESS_AreaType:101,SUCCESS_BoundaryType:102,SUCCESS_PathType:103,SUCCESS_PointType:104,SUCCESS_GfsType:105,SUCCESS_VolumeType:106},pairCheck:function(c,k){if("string"==typeof c&&"string"==typeof k)for(var C=this.EffectDataType[c],
D=0;D<C.length;D++)if(C[D]===k)return this.TypeCheckResult["SUCCESS_"+c];return this.TypeCheckResult.NOT_MATHCH},checkDataEffect:function(c,k){var C=this.TypeCheckResult.SUCCESS;if(c instanceof Array){for(var D=C=!1,n=!1,z=!1,h=!1,L=0;L<c.length;L++)C||"pointid"!=c[L].toLowerCase()||(C=!0),D||"pathid"!=c[L].toLowerCase()||(D=!0),n||"areaid"!=c[L].toLowerCase()||(n=!0),z||"boundaryid"!=c[L].toLowerCase()||(z=!0),h||"bhid"!=c[L].toLowerCase()||(h=!0);C=!n||z||D||!C||h?n||!z||D||!C||h?n||z||!D||!C||
h?n||z||D||!C||h?n||z||D||C||!h?this.TypeCheckResult.TYPE_FIELD_MISSED:this.pairCheck("VolumeType",k):this.pairCheck("PointType",k):this.pairCheck("PathType",k):this.pairCheck("BoundaryType",k):this.pairCheck("AreaType",k)}else C=this.TypeCheckResult.ALL_FIELDS_MISSED;return C},GFSDataGroupLen:{HeatGrid:1,Current:2},checkEffectGFSPair:function(c,k){return"number"==typeof c&&"string"==typeof k&&c===this.GFSDataGroupLen[k]},isInforAttrChanged:function(c,k){function C(z,h){var L,M=!1;if("function"==
typeof z&&"function"==typeof h||z instanceof Date&&h instanceof Date||z instanceof RegExp&&h instanceof RegExp||z instanceof String&&h instanceof String||z instanceof Array&&h instanceof Array||z instanceof Number&&h instanceof Number)z.toString()!==h.toString()&&0<h.toString().length&&(M=!0);else if("object"==typeof z&&"object"==typeof h){if(null!==h)for(L in h)if(z.hasOwnProperty(L)){if(D.push(z),n.push(h),C(z[L],h[L])){M=!0;z[L]=h[L];break}D.pop();n.pop()}}else isNaN(z)&&isNaN(h)&&"number"==typeof z&&
"number"==typeof h&&(M=!1),z!==h&&(M=!0);return M}var D,n;return D=[],n=[],C(c,k)},ColorUtil:{_colors:[],_pos:[],_min:0,_max:1,setColors:function(c){var k,C;if(c||(c=[[220,220,220],[20,20,20]]),this._colors=[],this._pos=[],c instanceof Array){c=c.slice(0);for(k=0;k<c.length;k++)if(col=c[k],col instanceof Array){for(C in col)0>col[C]&&(col[C]=0),255<col[C]&&(col[C]=255);this._colors.push(col)}for(k=0;k<this._colors.length;k++)this._pos.push(k/(this._colors.length-1))}},getColor:function(c){var k;var C=
(c-this._min)/(this._max-this._min);C=Math.min(1,Math.max(0,C));for(c=0;c<this._pos.length;c++){if(k=this._pos[c],C<=k){var D=this._colors[c];break}if(C>=k&&c===this._pos.length-1){D=this._colors[c];break}if(C>k&&C<this._pos[c+1]){var n=this._colors[c];var z=this._colors[c+1];n instanceof Array&&z instanceof Array||(D=[123,123,123]);C=(C-k)/(this._pos[c+1]-k);(!C||0>C)&&(C=.5);D=[n[0]+C*(z[0]-n[0]),n[1]+C*(z[1]-n[1]),n[2]+C*(z[2]-n[2])];break}}return[D[0],D[1],D[2]]}},_clampBlackColor:function(c){if(c instanceof
Array){var k=c[0],C=c[1];C=C&&10>C[0]&&10>C[1]&&10>C[2];if(k&&10>k[0]&&10>k[1]&&10>k[2]&&C)return[[10,10,10],[10,10,10]]}return c},createColorBarTexture:function(c,k,C){c=c||32;k=k||1;B||(B=document.createElement("canvas"));B.width=c;B.height=k;var D,n=B.getContext("2d"),z=n.createImageData(c,k),h=0;K.ColorUtil.setColors(C);for(C=0;C<k;C++)for(D=0;D<c;D++){var L=D/(c-1);L=K.ColorUtil.getColor(L);z.data[h++]=L[0];z.data[h++]=L[1];z.data[h++]=L[2];z.data[h++]=255}return n.putImageData(z,0,0),B},CatmullRomUtil:{getPoints:function(c,
k){c||(c=10);for(var C=[],D=0;D<=c;D++)C.push(this._getPoint(D/c,k));return C},_getPoint:function(c,k){var C,D,n,z=[];c*=k.length-1;var h=Math.floor(c);c-=h;z[0]=0===h?h:h-1;z[1]=h;z[2]=h>k.length-2?k.length-1:h+1;z[3]=h>k.length-3?k.length-1:h+2;h=k[z[0]];var L=k[z[1]],M=k[z[2]];k=k[z[3]];return C=this._interpolate(c,h[0],L[0],M[0],k[0]),D=this._interpolate(c,h[1],L[1],M[1],k[1]),n=this._interpolate(c,h[2],L[2],M[2],k[2]),[C,D,n]},_interpolate:function(c,k,C,D,n){k=.5*(D-k);n=.5*(n-C);var z=c*c;
return(2*C-2*D+k+n)*c*z+(-3*C+3*D-2*k-n)*z+k*c+C}},createTextTexture:function(c,k,C,D,n,z){B||(B=document.createElement("canvas"));var h=B.getContext("2d");h.font=k+"px "+n;var L,M,P=function(V){var U=V.ownerDocument;V=V.getBoundingClientRect();var G=U.body,A=U.documentElement;U=null!=U&&U==U.window?U:9===U.nodeType&&(U.defaultView||U.parentWindow);return{top:V.top+(U.pageYOffset||A.scrollTop||G.scrollTop)-(A.clientTop||G.clientTop||0),left:V.left+(U.pageXOffset||A.scrollLeft||G.scrollLeft)-(A.clientLeft||
G.clientLeft||0)}};P=function(V){for(var U=1;U<V;)U*=2;return U};var S=function(V,U,G,A){U=U.replace("\n"," ");var r,e,E=U,N=0,Q=0,Z=U.split(" ");for(U=e=Z.length;V.measureText(E).width>G&&1<U;){U--;E=r="";for(var ba=0;ba<e;ba++)ba<U?(E+=Z[ba],ba+1<U&&(E+=" ")):(r+=Z[ba],ba+1<e&&(r+=" "))}return A.push(E),Q=V.measureText(E).width,r&&(N=S(V,r,G,A),N>Q&&(Q=N)),Q},O=512,T=[];switch(O&&h.measureText(c).width>O?(O=S(h,c,O,T),L=P(O)):(T.push(c),L=P(h.measureText(c).width)),M=P(k*(T.length+1)),L<M&&(L=M),
B.width=L,B.height=M,D){case "left":var W=0;break;case "center":W=L/2;break;case "right":W=L}c=M/2;h.fillStyle=z;h.fillRect(0,0,h.canvas.width,h.canvas.height);h.fillStyle=C;h.textAlign=D;h.textBaseline="middle";h.font=k+"px "+n;P=.5*(M-k*(T.length+1));for(C=0;C<T.length;C++)1<T.length&&(c=(C+1)*k+P),h.fillText(T[C],W,c);return B},createLinearHaloTexture:function(c,k){c instanceof Array&&3===c.length||(c=[255,255,255]);k instanceof Array&&3===k.length||(k=[255,255,0]);B||(B=document.createElement("canvas"));
B.width=128;B.height=2;var C=B.getContext("2d"),D=C.createLinearGradient(0,1,B.width,1);c="rgba("+c[0]+","+c[1]+","+c[2]+",1.0)";k="rgba("+k[0]+","+k[1]+","+k[2]+",0.05)";return D.addColorStop(0,k),D.addColorStop(.4,c),D.addColorStop(.6,c),D.addColorStop(1,k),C.fillStyle=D,C.fillRect(0,0,B.width,B.height),B},createRadialTexture:function(c,k){c instanceof Array&&3===c.length||(c=[255,255,255]);k instanceof Array&&3===k.length||(k=[0,0,0]);B||(B=document.createElement("canvas"));B.width=256;B.height=
256;var C=B.getContext("2d"),D=[.5*B.width,.5*B.height];D=C.createRadialGradient(D[0],D[1],0,D[0],D[1],.5*Math.min(B.height,B.width));k="rgba("+k[0]+","+k[1]+","+k[2]+",1.0)";return D.addColorStop(0,"rgba("+c[0]+","+c[1]+","+c[2]+",1.0)"),D.addColorStop(.5,k),D.addColorStop(1,"rgba(0, 0, 0, 0.0)"),C.fillStyle=D,C.fillRect(0,0,B.width,B.height),C.fillRect(0,0,B.width,B.height),B},rgb2hexExt:function(c){return c instanceof Array&&3===c.length?"#"+("0"+parseInt(c[0],10).toString(16)).slice(-2)+("0"+
parseInt(c[1],10).toString(16)).slice(-2)+("0"+parseInt(c[2],10).toString(16)).slice(-2):"#000000"},toPercent:function(c){return(100*parseFloat(c)).toString()+"%"},updateColorBar:function(c,k,C,D){if(c&&C instanceof Array&&k instanceof Array){var n=k.length;k="bottom: 4px;right: 4px;font-size: 12px;";D?(k+="width: "+60*n+"px;",k+="height: 80px;"):(k+="width: 80px;",k+="height: "+50*n+"px;");c.style.cssText="position: absolute; display: block; z-index: 110; background-color: rgb(0,0,0); background-color: rgba(0,0,0,0.5); border-width: 0px; border-radius: 1px; border-style: solid; border-color: rgba(255,255,255,0.3); -webkit-box-shadow: 0 1px 1px rgba(0,0,0,0.05); box-shadow: 0 1px 1px rgba(0,0,0,0.05);";
c.style.cssText+=k;k=document.createElement("canvas");D?(k.height=.4*c.clientHeight,k.width=c.clientWidth):(k.height=c.clientHeight,k.width=.4*c.clientWidth);n=k.getContext("2d");var z=null;z=D?n.createLinearGradient(0,0,k.width,k.height):n.createLinearGradient(0,0,0,k.height);for(var h=0;h<C.length;h++)!(C[h]instanceof Object)||null===C[h].step&&null==C[h].step||null===C[h].color&&null==C[h].color||z.addColorStop(C[h].step,this.rgb2hexExt(C[h].color));n.fillStyle=z;n.fillRect(0,0,k.width,k.height);
n=document.getElementById("3dexpColorBar");n.src=k.toDataURL();n.style.width=k.width+" px";n.style.height=k.height+" px";n=document.getElementsByClassName("3dexpSpanLabel");if(c&&0<n.length)for(;0<n.length;)c.removeChild(n[0]);for(n=0;n<C.length;n++)!(C[n]instanceof Object)||null===C[n].label&&null==C[n].label||null===C[n].step&&null==C[n].step||(z=document.createElement("span"),z.className="3dexpSpanLabel",z.style.cssText="position: absolute; left: 46px; font-family: 'Arial', sans-serif; font-size: 12px; color: #e0e0e0; font-style: italic;",
D?(z.style.cssText+="top: "+1.5*k.height+"px",z.style.cssText+="left: "+this.toPercent(.99<C[n].step?C[n].step-.14:C[n].step)+";"):(z.style.cssText+="left: "+1.5*k.width+"px",z.style.cssText+="top: "+this.toPercent(.99<C[n].step?C[n].step-.06:C[n].step)+";"),z.innerHTML="\x3cspan\x3e"+C[n].label+C[n].unit+"\x3c/span\x3e",c.appendChild(z))}},createColorBar:function(){var c=document.createElement("div");document.body.appendChild(c);var k=document.createElement("img");return k.id="3dexpColorBar",c.appendChild(k),
c},showColorBar:function(c,k){c&&(k?c.style.display="block":c.style.display="none")},isEqual:function(c,k){function C(z,h){var L;if(null===z&&null===h||"undefined"==typeof z&&"undefined"==typeof h)return!0;if(null===z&&null!==h||null===h&&null!==z||"undefined"==typeof z&&"undefined"!=typeof h||"undefined"==typeof h&&"undefined"!=typeof z)return!1;if(isNaN(z)&&isNaN(h)&&"number"==typeof z&&"number"==typeof h||z===h)return!0;if("function"==typeof z&&"function"==typeof h||z instanceof Date&&h instanceof
Date||z instanceof RegExp&&h instanceof RegExp||z instanceof String&&h instanceof String||z instanceof Number&&h instanceof Number)return z.toString()===h.toString();if(-1<D.indexOf(z)||-1<n.indexOf(h))return!1;if(null!==h){for(L in h)if(h.hasOwnProperty(L)!==z.hasOwnProperty(L)||typeof h[L]!=typeof z[L])return!1;for(L in z){if(h.hasOwnProperty(L)!==z.hasOwnProperty(L)||typeof h[L]!=typeof z[L])return!1;switch(typeof z[L]){case "object":case "function":if(D.push(z),n.push(h),!C(z[L],h[L]))return!1;
D.pop();n.pop();break;default:if(z[L]!==h[L])return!1}}}return!0}var D,n;return D=[],n=[],!!C(c,k)},equals:function(c,k){var C,D;return c===k||typeof c==typeof k&&("object"==typeof c?c.constructor===c.constructor&&(c instanceof Array?c.length===k.length&&c.every(function(n,z){return equals(n,k[z])}):c instanceof RegExp?c.toString()===k.toString():(C=Object.keys(c),D=Object.keys(k),C.length===D.length&&C.every(function(n){return equals(c[n],k[n])}))):"function"==typeof c?c.toString()===k.toString():
c===k)},isUrl:function(c){var k="^"+a.url({allowNamed:!0,allowLocal:!0});return(new RegExp(k,"g")).test(c)},_isRequiredTypesIn:function(c,k){var C=0;return b.forEach(k,function(D){for(var n=0;n<c.length;n++)c[n].type!=D||C++}),k.length===C},availableVizTypes:function(c,k){return(c=l[c])?c:[]},effectConfig:function(c){var k=Object.getOwnPropertyNames(l),C=null;return b.some(k,function(D){return b.some(l[D],function(n){if(c.toLowerCase()===n.name.toLowerCase())return C=n,!0})}),C},extensionsMessage:function(){var c=
document.createElement("div");c.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+J+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e";c.style.position="fixed";c.style.top="0";c.style.width="100%";c.style.color="#ff0000";c.style.zIndex=1E6;document.body.appendChild(c)},sortHelper:function(c,k,C){return c===k?0:c<k?C?1:-1:
c>k?C?-1:1:0},spriteImg:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxQzIyMkFCODFFMjA2ODExODNEMTgzRDNCQjcwNzU3NCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo3QTc4QjM3QTI0OTAxMUU2ODFGMjk2MjI2NkE0Q0FCMiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo3QTc4QjM3OTI0OTAxMUU2ODFGMjk2MjI2NkE0Q0FCMiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MUMyMjJBQjgxRTIwNjgxMTgzRDE4M0QzQkI3MDc1NzQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MUMyMjJBQjgxRTIwNjgxMTgzRDE4M0QzQkI3MDc1NzQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5DNIzlAABfxElEQVR42uy9WZPkSJIeaGqAR0QedXR1T0+T3JndEcrKCsmVlX3lC388fwRnH1Yo2xSSc3edmRkRDpiumanaCTPAAHePjOwyK4nKCHcADsChqp9+egEiir766uvXuWS/BX311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX311BdBXX311BdBXX311BdBXX311BdBXX311BdBXX311BdBXX311BdBXX311BdBXX311BdBXX3198Wv84w9bm6D+gd0HxuYXd3x25TTggvNcO27Tu203AbB+H+Cm3zBc+qWVjwGlveEqF4OHH5flkfCix+/mX84tV5s8jF0HXv97d3KAUH3q4IbPGlxBflaPAeX3YK+Ab9377ICIl3+P2B/trgCuLfDQchDWBRD/sbILXO2aUkOABeGGgwIEjYqh5ZgtSgsK+hR3qhm4Bi7tCuDPSejhckUB+7ZvEfprIk+04BwWlh2W+mlTQKBB3GADk+KB68YKNIFt4L8p5fBrVgbjr1Lo94kZNL4BFavfqgxu5RZsCV3kwa8qiTV5gh3bHLHCC9RQ9K4KqApbjo9Fc4BdAfw5w3u42B24ZLuaMOy1yrAB5VEc50hlYS/cgPG4UykcheZQQAO48zvADRGHX4MiGH9VQl9+B/YeD/YqGgwPLLYJvvv3UncBrnjvzKlLSAUCM2Hc8u+hwQ63cBNY+GXx2VhGP0ukAE3KCbsC+FKF/pgDAA0fsHmMqhsARdgNC1jeKj4tAHf/MVoRCWRE4xH/fo+LAFt2HOv3tCbMUOMb/py5gvHPR+hha0s4qkRgWwCq++O2IED13+vQgqkOuiytYy2CsOfIa67CljuBsYlfuefpsbBZmB2iaXEpsCuAV2Dl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CqJE8rUn/kCS1tsSVgSs8xJ5M48tZZEKnm+7kXQMqoUn11qe733o4nODBn99FRX4PmC4VAI7j7umBLYU1jbvUE5tWx8Uus0HvCrBf00KoEkR7BD4xXsbKb2lqDxA+QFZt9zYTEK2wP9YGUEForfCcmx8KNeCm3tj3EvSDG3TEKi00gKxj1EP+yz3VDuE78iE3erwG/hCBP81KoC9imBVGUC7osAEBItijHerJ0HV8kcoBjLbgqtEG1bDpwt+YtPSQzLFqJWfaR3BttfCYoXEKyUmtR//eorrMApYuWkoXukaxetdLdN/F9tA2/4Li5+RV7nLsKl0cFsRbNcU5FThuhLMQ4uljLZm6B9mb1Zh9ZoL1Y4IsNi5pxUFrMP7ddx1iyy9Lwbqf4kKoFkRQCMqWLwPdXSAdSRQPl7bXOOjAyzLyAEWCuOwAqgYMBQNpdB7/O2oZ0CpmErtIPD2ps7uF+66Ct7sOAziy1ij+HJWS+Rgy1rngrNat7DSMbaZTMSWMGOLQAbYDI0CckQBtEL//dY1gv0c/0e8TKHUPqelLfiR9/DAfegK4DO6B0vhhP18QsEdKPl9LSHFkudbhrxl/3/dBaj9np78lhsAWIfdRx5+zK6pHc7v/5wlosArQHVcmT74BQv+l64AWq39PmRQcRWcUFRKhKv74naTk3JUHzZh+VbaqhDH0lBLnwcXC2Qd3quGe7M3t34rFoMHr+nPSvD/XBTAPmVQTkZpjjZsDJFYcwvaG5vCzWD4HuHHnWwFVoS7ul3TyPhtf79tMgNeqBzrGYKiK4AvyUUAITb6xG+iA4y2ySDCnszFMnLIpw+V3sEdDyVUmfbq+UJ9dt5Ra3iUh9gJ1Re9yFuyMvAK19cVwBeDCrDJq92FDnCDH2iy+ssmpVjAAulZx21B9vvQrT4+iFIfwn2CsQfeH4fhAEeQwK9S6H9NCqD+ZZZ6Ee3gBSow1m+3Mjxliwis9xssh/6uIUhrVXdw8XG2XZJbWWJcvdO/UqH/tSqA8hedwu69D0d7tmLdTWhJsnFjQ3OlhVVrCk3KR6yglaMt17eU0kXCvpLk0XbcuvP1q1y/ZgVwRLCP7Iebj99aglECc/eNbL8IUu+7J9ew7tgquyJrbYaXf9+iK4C+9vIARxTCnhqDvedwtYcayhKGV76vu/aBl//cX8UCxH5v+urr17pkvwV99dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF99dQXQV199dQXQV199dQXQV199dQXQV199dQXQV199dQXQV199dQXQV199dQXQV199dQXQV199ffHr/xdgAKO3NCOK/8ywAAAAAElFTkSuQmCC",
rgbNames:{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],
darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,
144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,
216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,
170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,
232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,
128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},calculatePerfectPosition:function(c,k,C,D){(null==D||1E-6>Math.abs(D))&&(D=32.25);m.set(I,c[0],c[1],c[2]);m.cross(x,I,w);0==m.dot(x,x)&&m.cross(x,I,v);d.identity(F);d.rotate(F,
F,-t*C,I);d.rotate(F,F,-t*D,x);m.normalize(u,I);m.scale(H,u,k);m.add(I,I,H);m.transformMat4(m.negate(u,u),m.negate(u,u),F);return m.scale(u,u,k*Math.tan(t*D)),m.add(I,I,u),I}},J='The 3DFx requires a browser that supports `OES_element_index_uint` and `OES_texture_float` extensions of WebGL. \x3cbr/\x3e\x3ca href\x3d"https://www.khronos.org/registry/webgl/extensions"\x3eClick here for more information.\x3c/a\x3e';return K})},"dojox/validate/regexp":function(){define(["dojo/_base/lang","dojo/regexp",
"dojox/main"],function(b,a,q){var p=b.getObject("validate.regexp",!0,q);return p=q.validate.regexp={ipAddress:function(g){g="object"==typeof g?g:{};"boolean"!=typeof g.allowDottedDecimal&&(g.allowDottedDecimal=!0);"boolean"!=typeof g.allowDottedHex&&(g.allowDottedHex=!0);"boolean"!=typeof g.allowDottedOctal&&(g.allowDottedOctal=!0);"boolean"!=typeof g.allowDecimal&&(g.allowDecimal=!0);"boolean"!=typeof g.allowHex&&(g.allowHex=!0);"boolean"!=typeof g.allowIPv6&&(g.allowIPv6=!0);"boolean"!=typeof g.allowHybrid&&
(g.allowHybrid=!0);var m=[];g.allowDottedDecimal&&m.push("((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])");g.allowDottedHex&&m.push("(0[xX]0*[\\da-fA-F]?[\\da-fA-F]\\.){3}0[xX]0*[\\da-fA-F]?[\\da-fA-F]");g.allowDottedOctal&&m.push("(0+[0-3][0-7][0-7]\\.){3}0+[0-3][0-7][0-7]");g.allowDecimal&&m.push("(0|[1-9]\\d{0,8}|[1-3]\\d{9}|4[01]\\d{8}|42[0-8]\\d{7}|429[0-3]\\d{6}|4294[0-8]\\d{5}|42949[0-5]\\d{4}|429496[0-6]\\d{3}|4294967[01]\\d{2}|42949672[0-8]\\d|429496729[0-5])");
g.allowHex&&m.push("0[xX]0*[\\da-fA-F]{1,8}");g.allowIPv6&&m.push("([\\da-fA-F]{1,4}\\:){7}[\\da-fA-F]{1,4}");g.allowHybrid&&m.push("([\\da-fA-F]{1,4}\\:){6}((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])");g="";0<m.length&&(g="("+m.join("|")+")");return g},host:function(g){g="object"==typeof g?g:{};"boolean"!=typeof g.allowIP&&(g.allowIP=!0);"boolean"!=typeof g.allowLocal&&(g.allowLocal=!1);"boolean"!=typeof g.allowPort&&(g.allowPort=!0);"boolean"!=typeof g.allowNamed&&
(g.allowNamed=!1);var m=g.allowPort?"(\\:\\d+)?":"",d="((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)+(?:[a-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.?)";g.allowIP&&(d+="|"+p.ipAddress(g));g.allowLocal&&(d+="|localhost");g.allowNamed&&(d+="|^[^-][a-zA-Z0-9_-]*");return"("+d+")"+m},url:function(g){g="object"==typeof g?g:{};"scheme"in g||(g.scheme=[!0,!1]);return a.buildGroupRE(g.scheme,function(m){return m?"(https?|ftps?)\\://":""})+p.host(g)+"(/(?:[^?#\\s/]+/)*(?:[^?#\\s/]+(?:\\?[^?#\\s/]*)?(?:#[A-Za-z][\\w.:-]*)?)?)?"},
emailAddress:function(g){g="object"==typeof g?g:{};"boolean"!=typeof g.allowCruft&&(g.allowCruft=!1);g.allowPort=!1;var m="([!#-'*+\\-\\/-9\x3d?A-Z^-~]+[.])*[!#-'*+\\-\\/-9\x3d?A-Z^-~]+@"+p.host(g);g.allowCruft&&(m="\x3c?(mailto\\:)?"+m+"\x3e?");return m},emailAddressList:function(g){g="object"==typeof g?g:{};"string"!=typeof g.listSeparator&&(g.listSeparator="\\s;,");var m=p.emailAddress(g);return"("+m+"\\s*["+g.listSeparator+"]\\s*)*"+m+"\\s*["+g.listSeparator+"]?\\s*"},numberFormat:function(g){g=
"object"==typeof g?g:{};"undefined"==typeof g.format&&(g.format="###-###-####");return a.buildGroupRE(g.format,function(m){return a.escapeString(m,"?").replace(/\?/g,"\\d?").replace(/#/g,"\\d")})},ca:{postalCode:function(){return"([A-Z][0-9][A-Z] [0-9][A-Z][0-9])"},province:function(){return"(AB|BC|MB|NB|NL|NS|NT|NU|ON|PE|QC|SK|YT)"}},us:{state:function(g){g="object"==typeof g?g:{};"boolean"!=typeof g.allowTerritories&&(g.allowTerritories=!0);"boolean"!=typeof g.allowMilitary&&(g.allowMilitary=!0);
var m="AL|AK|AZ|AR|CA|CO|CT|DE|DC|FL|GA|HI|ID|IL|IN|IA|KS|KY|LA|ME|MD|MA|MI|MN|MS|MO|MT|NE|NV|NH|NJ|NM|NY|NC|ND|OH|OK|OR|PA|RI|SC|SD|TN|TX|UT|VT|VA|WA|WV|WI|WY";g.allowTerritories&&(m+="|AS|FM|GU|MH|MP|PW|PR|VI");g.allowMilitary&&(m+="|AA|AE|AP");return"("+m+")"}}}})},"dojo/regexp":function(){define(["./_base/kernel","./_base/lang"],function(b,a){var q={};a.setObject("dojo.regexp",q);q.escapeString=function(p,g){return p.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,function(m){return g&&-1!=g.indexOf(m)?
m:"\\"+m})};q.buildGroupRE=function(p,g,m){if(!(p instanceof Array))return g(p);for(var d=[],f=0;f<p.length;f++)d.push(g(p[f]));return q.group(d.join("|"),m)};q.group=function(p,g){return"("+(g?"?:":"")+p+")"};return q})},"dojox/main":function(){define(["dojo/_base/kernel"],function(b){return b.dojox})},"esri/core/libs/gl-matrix-2/vec3f64":function(){define(["exports","../../../chunks/vec3f64"],function(b,a){b.vec3f64=a.vec3f64;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/core/libs/gl-matrix-2/mat4f64":function(){define(["exports",
"../../../chunks/mat4f64"],function(b,a){b.mat4f64=a.mat4f64;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/chunks/mat4f64":function(){define(["exports"],function(b){function a(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function q(f){return[f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8],f[9],f[10],f[11],f[12],f[13],f[14],f[15]]}function p(f,l,t,y,w,v,F,x,u,H,I,B,K,J,c,k){return[f,l,t,y,w,v,F,x,u,H,I,B,K,J,c,k]}function g(f,l){return new Float64Array(f,l,16)}const m=a(),d=Object.freeze({__proto__:null,
create:a,clone:q,fromValues:p,createView:g,IDENTITY:m});b.IDENTITY=m;b.clone=q;b.create=a;b.createView=g;b.fromValues=p;b.mat4f64=d})},"esri/core/libs/gl-matrix-2/vec3":function(){define(["exports","../../../chunks/vec3"],function(b,a){b.vec3=a.vec3;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/core/libs/gl-matrix-2/mat4":function(){define(["exports","../../../chunks/mat4"],function(b,a){b.mat4=a.mat4;Object.defineProperty(b,"__esModule",{value:!0})})},"fx3d/views/3d/webgl-engine-extensions/constraints":function(){define([],
function(){return{EARTH_RADIUS:6378137,VertexAttrConstants:{POSITION:"position",NORMAL:"normal",UV0:"uv0",AUXPOS1:"auxpos1",AUXPOS2:"auxpos2",MAPPOS:"mapPos",COLOR:"color",SYMBOLCOLOR:"symbolColor",SIZE:"size",TANGENT:"tangent",OFFSET:"offset",SUBDIVISIONS:"subdivisions",SUBDIVISIONFACTOR:"subdivisionFactor",COLORFEATUREATTRIBUTE:"colorFeatureAttribute",SIZEFEATUREATTRIBUTE:"sizeFeatureAttribute",OPACITYFEATUREATTRIBUTE:"opacityFeatureAttribute",UVMAPSPACE:"uvMapSpace",BOUNDINGRECT:"boundingRect",
UVREGION:"uvRegion",NORMALCOMPRESSED:"normalCompressed",PROFILERIGHT:"profileRight",PROFILEUP:"profileUp",PROFILEVERTEXANDNORMAL:"profileVertexAndNormal",FEATUREVALUE:"featureValue",MODELORIGINHI:"modelOriginHi",MODELORIGINLO:"modelOriginLo",MODEL:"model",MODELNORMAL:"modelNormal",INSTANCECOLOR:"instanceColor",INSTANCEFEATUREATTRIBUTE:"instanceFeatureAttribute",LOCALTRANSFORM:"localTransform",GLOBALTRANSFORM:"globalTransform",BOUNDINGSPHERE:"boundingSphere",MODELORIGIN:"modelOrigin",MODELSCALEFACTORS:"modelScaleFactors",
FEATUREATTRIBUTE:"featureAttribute",STATE:"state",LODLEVEL:"lodLevel",POSITION0:"position0",POSITION1:"position1",NORMALA:"normalA",NORMALB:"normalB",COMPONENTINDEX:"componentIndex",VARIANTOFFSET:"variantOffset",VARIANTSTROKE:"variantStroke",VARIANTEXTENSION:"variantExtension",U8PADDING:"u8padding",U16PADDING:"u16padding",SIDENESS:"sideness",START:"start",END:"end",UP:"up",EXTRUDE:"extrude"}}})},"dojo/text":function(){define(["./_base/kernel","require","./has","./has!host-browser?./request"],function(b,
a,q,p){var g;q("host-browser")?g=function(t,y,w){p(t,{sync:!!y,headers:{"X-Requested-With":null}}).then(w)}:a.getText?g=a.getText:console.error("dojo/text plugin failed to load because loader does not support getText");var m={},d=function(t){if(t){t=t.replace(/^\s*<\?xml(\s)+version=['"](\d)*.(\d)*['"](\s)*\?>/im,"");var y=t.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);y&&(t=y[1])}else t="";return t},f={},l={};b.cache=function(t,y,w){if("string"==typeof t)if(/\//.test(t)){var v=t;w=y}else v=a.toUrl(t.replace(/\./g,
"/")+(y?"/"+y:""));else v=t+"",w=y;t=void 0!=w&&"string"!=typeof w?w.value:w;w=w&&w.sanitize;if("string"==typeof t)return m[v]=t,w?d(t):t;if(null===t)return delete m[v],null;v in m||g(v,!0,function(F){m[v]=F});return w?d(m[v]):m[v]};return{dynamic:!0,normalize:function(t,y){t=t.split("!");var w=t[0];return(/^\./.test(w)?y(w):w)+(t[1]?"!"+t[1]:"")},load:function(t,y,w){t=t.split("!");var v=1<t.length,F=t[0],x=y.toUrl(t[0]);t="url:"+x;var u=f,H=function(B){w(v?d(B):B)};F in m?u=m[F]:y.cache&&t in y.cache?
u=y.cache[t]:x in m&&(u=m[x]);if(u===f)if(l[x])l[x].push(H);else{var I=l[x]=[H];g(x,!y.async,function(B){m[F]=m[x]=B;for(var K=0;K<I.length;)I[K++](B);delete l[x]})}else H(u)}}})},"fx3d/views/3d/layers/FxLayerView3D":function(){define("dojo/_base/lang dojo/_base/array esri/views/layers/LayerView ./SnapshotController esri/geometry/Point esri/geometry/Extent esri/geometry/projection esri/core/libs/gl-matrix-2/vec3f64 esri/core/libs/gl-matrix-2/vec3 esri/geometry/SpatialReference esri/core/watchUtils esri/core/Collection esri/Graphic esri/symbols/PictureMarkerSymbol esri/geometry/support/centroid ../effects/FxEffectRendererManager ../effects/FxEffectFactory ../support/fx3dUtils".split(" "),
function(b,a,q,p,g,m,d,f,l,t,y,w,v,F,x,u,H,I){f=f.vec3f64;l=l.vec3;var B=f.create(),K=f.create(),J=f.create(),c=f.create(),k=f.create();return q.createSubclass({declaredClass:"esri.views.3d.layers.FxLayerView3D",constructor:function(C){this.supportsDraping=!1;this._fx3dSpatialReference=t.WGS84;C.layer&&(this.layer=C.layer);C.view&&(this.view=C.view);this.availableFields=["*"]},initialize:function(){u.init(this.view);this.layer.when().then(function(){this._eventHandles=[];this.loadedGraphics=null;
this._graphicsLoading=!0;this._graphicsCollectionEventHandle=null;this._graphicsControllerEventHandles=[];var C=this._initEffect();C.then(b.hitch(this,this._initGraphicsController));this.layer.addResolvingPromise(C);this._eventHandles.push(this.layer.on("destroy-fxlayer",function(){u.pause();u.destroy(this._layerVizType,this._layerId);this.view.map.remove(this.layer)}.bind(this)));this._eventHandles.push(this.layer.on("show-feature-label",b.hitch(this,this._onShowFeatureLabel)));this._eventHandles.push(this.layer.on("hide-feature-label",
function(){this.layer&&this.layer._labelsLayer&&(this.layer._labelsLayer.removeAll(),this._selectedFeature=null)}.bind(this)));this._eventHandles.push(this.view.on("click",b.hitch(this,this._viewClicked)))}.bind(this))},destroy:function(){this._viewModelHandler&&(this._viewModelHandler.remove(),this._viewModelHandler=null);var C=function(D){D.remove()};this.controller&&(this.controller.destroy(),this.controller=null);this._graphicsCollectionEventHandle&&this._graphicsCollectionEventHandle.remove();
this._graphicsControllerEventHandles&&this._graphicsControllerEventHandles.forEach(C);this._tilingSchemeHandle&&this._tilingSchemeHandle.remove();this._eventHandles&&this._eventHandles.forEach(C);this.inherited(arguments)},getLoadedGraphics:function(){return this.loadedGraphics&&this.loadedGraphics.toArray?[].concat(this.loadedGraphics.toArray()):[]},_initEffect:function(){return H.make({layer:this.layer,layerView:this,view:this.view})},_calculateExtentCenter:function(C){var D=C.length;if(D){var n,
z,h;if("point"==this.layer.geometryType){var L=n=C[0].geometry.longitude;var M=z=C[0].geometry.latitude;for(h=1;h<D;h++){var P=C[h];null!=P.geometry&&(P.geometry.longitude<L&&(L=P.geometry.longitude),P.geometry.longitude>n&&(n=P.geometry.longitude),P.geometry.latitude<M&&(M=P.geometry.latitude),P.geometry.latitude>z&&(z=P.geometry.latitude))}}else if("polyline"==this.layer.geometryType||"polygon"==this.layer.geometryType){var S=C[0].geometry.extent;L=S.xmin;n=S.xmax;M=S.ymin;z=S.ymax;for(h=1;h<D;h++)P=
C[h],null!=P.geometry&&null!=P.geometry.extent&&(S=P.geometry.extent,S.xmin<L&&(L=S.xmin),S.xmax>n&&(n=S.xmax),S.ymin<M&&(M=S.ymin),S.ymax>z&&(z=S.ymax))}return this._minDelta=6937.5*Math.min(n-L,z-M),new m(L,M,n,z,this._fx3dSpatialReference)}return null},_getGeomZFromPolyline:function(C,D){return l.set(K,C[0],C[1],C[2]||1),I.wgs84ToSphericalEngineCoords(K,0,K,0),l.set(J,D[0],D[1],D[2]||1),I.wgs84ToSphericalEngineCoords(J,0,J,0),l.subtract(k,K,J),l.add(c,K,J),l.scale(c,c,.5),l.length(c)+.6*l.length(k)-
6378137},_calculatePerfectPosition:function(C){var D={};if(null==C||null==C.geometry)return console.warn("Feature or geometry is invalid."),D;var n,z,h,L=C.geometry;if("point"===this.layer.geometryType)D.x=L.longitude,D.y=L.latitude,L=this.layer._labelDefaultHeight,D.z=5E3,L&&this.layer._currentVizFieldMinMax&&(h=this.layer._currentVizFieldMinMax.max-this.layer._currentVizFieldMinMax.min,isNaN(h)||"number"==typeof this.layer._currentVizPage&&(n=this.layer.vizFields[this.layer._currentVizPage],z=C.attributes[n],
null!=z&&(0===L.flag?(D.z+=L.max,0!=h?D.z*=(z-this.layer._currentVizFieldMinMax.min)/h:D.z=L.min):1===L.flag&&(L.max===L.min?D.z+=L.max:0!=h?D.z+=1.2*(L.min+(L.max-L.min)*(z-this.layer._currentVizFieldMinMax.min)/h):0!=this.layer._currentVizFieldMinMax.max?D.z+=L.max:D.z=L.min))));else if("polyline"===this.layer.geometryType){if(null==L.paths)return console.warn("Paths of feature is invalid."),D;C=L.paths[0];n=C.length;D.x=(C[0][0]+C[n-1][0])/2;D.y=(C[0][1]+C[n-1][1])/2;D.z=1.1*this._getGeomZFromPolyline(C[0],
C[n-1])}else if("polygon"===this.layer.geometryType){if(null==L.rings)return console.warn("Rings of feature is invalid."),D;h=x.polygonCentroid({rings:L.rings,hasZ:!1});if(isNaN(h[0])||isNaN(h[1]))return null;D.x=h[0];D.y=h[1];L=this.layer._labelDefaultHeight;D.z=10;h=this.layer._currentVizFieldMinMax.max-this.layer._currentVizFieldMinMax.min;isNaN(h)||(n=this.layer.vizFields[this.layer._currentVizPage],z=C.attributes[n],null!=z&&(0===L.flag?(D.z+=L.max,0!=h?D.z*=(z-this.layer._currentVizFieldMinMax.min)/
h:D.z=L.min):1===L.flag&&(L.max===L.min?D.z+=L.max:0!=h?D.z+=1.3*(L.min+(L.max-L.min)*(z-this.layer._currentVizFieldMinMax.min)/h):0!=this.layer._currentVizFieldMinMax.max?D.z+=L.max:D.z=L.min)))}return isNaN(D.z)&&(D.z=null),D},_calculatePerfectHeight:function(){var C=this.layer._labelDefaultHeight,D=10;this.layer._currentVizFieldMinMax.max==this.layer._currentVizFieldMinMax.min&&0==this.layer._currentVizFieldMinMax.max?D=C&&C.min||1E3:C&&(0===C.flag?D+=C.max:1===C.flag&&(D+=C.max===C.min?C.max:
1.2*(C.min+(C.max-C.min))));C=Math.abs(D)/111E3;return"local"==this.view.viewModel&&(C=Math.abs(D)/235596.8),10<C&&(C=10),{z:D,lonD:C}},_onShowFeatureLabel:function(C){if(this.layer._labelsLayer&&this.layer._labelsLayer.visible){if(this._selectedFeature=null,C.feature){if(null==C.feature.geometry)return void console.warn("The feature with FID has no geometry content.");this.layer._labelsLayer.removeAll();var D=this._calculatePerfectPosition(C.feature);if(null==D.x||null==D.y)return;null==D.z?D.z=
10:D.z+=1E3;var n=I.createTextTexture(""+C.feature.attributes[this.layer.displayField],14,"#ffffff","center","Arial","rgba(0,0,0,0.5)");n=new F({url:n.toDataURL(),width:n.width,height:n.height,contentType:"image/png"});var z=new g(D.x,D.y,D.z,this._fx3dSpatialReference);n=new v(z,n,C.feature.attributes,this.layer.popupTemplate);this.layer._labelsLayer.add(n);n=Math.abs(D.z)/111E3;z=Math.abs(D.z)/(111E3*Math.cos(D.y*Math.PI/180));"local"==this.view.viewModel&&(n=Math.abs(D.z)/111319.5,z=Math.abs(D.z)/
235596.8);10<z&&(z=10);20<n&&(n=20);n=new m(D.x-n,D.y-z,D.x+n,D.y+z,this._fx3dSpatialReference);this._fixCameraPosition(D,n);this._animateTo(n)}else this.layer._labelsLayer.removeAll();this._selectedFeature=C.feature}},_updateSelectedFeatureLabel:function(){if(this.layer._labelsLayer){var C=0<this.layer._labelsLayer.graphics.toArray().length;this.layer._labelsLayer.removeAll();C&&this._selectedFeature&&this._onShowFeatureLabel({feature:this._selectedFeature})}},_viewClicked:function(C){if(C.graphic)if(this.layer._labelsLayer&&
C.graphic.layer===this.layer._labelsLayer)0==this.layer._labelsLayer.graphics.length&&this._onShowFeatureLabel({feature:C.graphic});else{if(C.graphic.layer===this.layer&&this.view&&this.view.popup.viewModel.selectedFeature){C=this.view.popup.viewModel.selectedFeature;var D=new v({attributes:b.clone(C.attributes),geometry:C.geometry&&C.geometry.clone()||null,popupTemplate:C.popupTemplate||null,symbol:C.symbol||null,visible:C.visible});null!=D&&(this._onShowFeatureLabel({feature:D}),this.layer.emit("selected-feature-from-globe",
{selectedFeature:D}),this.view.popup.viewModel._set("selectedFeature",null))}}else if(this.layer&&this.layer._labelsLayer&&0<this.layer._labelsLayer.graphics.length&&(this.layer._labelsLayer.removeAll(),this._selectedFeature=null,this.layer.emit("abandon-selected-feature"),this.view&&this.view.popup.viewModel._set("selectedFeature",null)),this.view&&this.view.popup.viewModel.selectedFeature)try{this.view.popup.viewModel.selectedFeature.symbol=null,this.view.popup.viewModel.selectedFeature.popupTemplate=
null,D=this.view.popup.viewModel.selectedFeature.clone(),this._onShowFeatureLabel({feature:D}),this.layer.emit("selected-feature-from-globe",{selectedFeature:D})}finally{this.view.popup.viewModel._set("selectedFeature",null)}},_fixCameraPosition:function(C,D){var n=C.z;1E4<=n&&(n=1E3);C=C.z;1E4<=C&&(D.center.z=1E3);C=I.clamp(C,1E3,1E4);D.zmin=n;D.zmax=C},_animateTo:function(C,D,n){this.view&&this.view.goTo({target:C,heading:this.view.camera.heading,tilt:this.view.camera.tilt})},_initGraphicsController:function(C){if(this._layerId=
this.layer.id,this._layerVizType=this.layer.vizType,u.addEffect(this.layer,C)){var D=this.view.map.layers.find(function(h){return h.url===this.layer.url&&"esri.layers.FeatureLayer"===h.declaredClass&&"Feature Layer"===h.type&&!0===h.loaded}.bind(this)),n=this;C=function(){var h=w.ofType(v);h={layer:n.layer,layerView:n,graphics:new h};n.controller=new p(h);y.whenTrueOnce(n.view,"basemapTerrain.ready",function(){n.controller.when().then(function(){var L=null;n.loadedGraphics=n.controller.graphics;n._graphicsCollectionEventHandle=
n.loadedGraphics.on("change",n._collectionChangeHandler.bind(n));0<n.loadedGraphics.length&&(L=n.loadedGraphics.toArray(),n._add([].concat(L)));n._graphicsControllerEventHandles.push(n.controller.on("query-end",function(){n._graphicsLoading=!1}));n.controller.startup()},function(L){console.log(L)})})};if(D){var z=this.view.layerViews.find(function(h){return h.layer.url===D.url&&h.layer.id===D.id}.bind(this));z?(D.source&&this.layer._initLayerProperties(D.source),this.loadedGraphics=z.loadedGraphics,
0<this.loadedGraphics.length&&this._add([].concat(this.loadedGraphics.toArray())),this.layer.emit("all-features-loaded",{graphics:[].concat(this.loadedGraphics.toArray())})):C()}else C()}},_collectionChangeHandler:function(C){this._add([].concat(C.added));this._remove([].concat(C.removed))},_add:function(C){function D(z){var h,L;z=[].concat(z);a.forEach(z,function(M){if(h=M.geometry)if("point"==n.layer.geometryType)d.projectXYZToVector(h.x,h.y,h.z,h.spatialReference,B,n._fx3dSpatialReference),h.longitude=
B[0],h.latitude=B[1],h.altitude=isNaN(B[2])?null:B[2];else{if("polyline"==n.layer.geometryType||"polygon"==n.layer.geometryType)for(L=h.paths||h.rings,M=0;M<L.length;M++)for(var P=0;P<L[M].length;P++)d.projectXYZToVector(L[M][P][0],L[M][P][1],L[M][P][2],h.spatialReference,B,n._fx3dSpatialReference),L[M][P][0]=B[0],L[M][P][1]=B[1],L[M][P][2]=isNaN(B[2])?null:B[2]}else console.warn("No geometry information found in feature: "+M.attributes.FID)});n.layer.emit("fx3d-add-graphics",{graphics:z});n._graphicsLoading||
(n.layer.on("can-locating-now",function(){var M=n._calculateExtentCenter(n.getLoadedGraphics());if(M){var P=n._calculatePerfectHeight();M.zmax=P.z;M.zmin=P.z-1;M.xmax+=2+P.lonD;M.xmin-=2+P.lonD;M.ymax+=1+P.lonD;M.ymin-=1+P.lonD;n._animateTo(M)}}),n.layer.emit("all-features-loaded",{graphics:n.getLoadedGraphics()}))}if(b.isArray(C)&&0<C.length){var n=this;this.isResolved()?D(C):this.when().then(function(){D(C)})}},_remove:function(C){b.isArray(C)&&0<C.length}})})},"fx3d/views/3d/layers/SnapshotController":function(){define("esri/config esri/core/Accessor esri/core/Error esri/core/Evented esri/core/Handles esri/core/Logger esri/core/Promise esri/core/promiseUtils esri/geometry/support/WKIDUnitConversion ./GraphicsManager ./Graphics3DVerticalScale".split(" "),
function(b,a,q,p,g,m,d,f,l,t,y){function w(B){var K,J;if(B&&("object"==typeof B?(K=B.wkid,J=B.wkt):"number"==typeof B?K=B:"string"==typeof B&&(J=B)),K)var c=I.values[I[K]];else J&&-1!==J.search(/^PROJCS/i)&&(B=H.exec(J))&&B[1]&&(c=parseFloat(B[1].split(",")[1]));return c}function v(B,K){K=K||B.extent;B=B.width;var J=w(K&&K.spatialReference);return K&&B?K.width/B*(J||u)*x*b.screenDPI:0}var F=m.getLogger("esri.layers.graphics.controllers.SnapshotController"),x=39.37,u=6378137*Math.PI/180,H=/UNIT\[([^\]]+)\]\]$/i,
I=l;return d.EsriPromiseMixin(p.EventedMixin(a)).createSubclass({declaredClass:"esri.layers.graphics.controllers.SnapshotController",constructor:function(B){return this.type="snapshot",this._gManager=null,this._verticalScale=null,this._handles=new g,this._source=null,this._started=!1,this._pendingQueries=new Map,this.extent=null,this.hasAllFeatures=!1,this.hasFeatures=!1,this.layer=null,this.layerView=null,this.maxPageSize=null,this.defaultReturnZ=void 0,this.defaultReturnM=void 0,this.pageSize=null,
this.paginationEnabled=!1,this._cancelErrorMsg="SnapshotController: query cancelled",this._featureResolution={value:.25,scale:945},this._maxFeatures={point:16E3,multipoint:8E3,polyline:4E3,polygon:4E3,multipatch:4E3},this.layer=B.layer,this.layerView=B.layerView,this.maxPageSize=B.maxPageSize,this.graphics=B.graphics,this},initialize:function(){var B=this,K=this.layer.when(function(){return B._verifyCapabilities()}).then(function(){return B._init()});this.addResolvingPromise(K)},destroy:function(){this.cancelQuery();
this._gManager&&(this._gManager.destroy(),this._gManager=null);this._handles.destroy();this._pendingQueries=this._handles=null},properties:{updating:{value:null,dependsOn:["_pendingQueries"],get:function(){return!!(this._pendingQueries&&0<this._pendingQueries.size)}},graphics:{value:null,set:function(B){var K=this._get("graphics");K!==B&&(this._handles.remove("graphics"),B&&(this._collectionChanged({added:B.toArray(),removed:K&&K.toArray()}),this._handles.add(B.on("change",this._collectionChanged.bind(this)),
"graphics")),this._set("graphics",B))}}},cancelQuery:function(){var B=this;this._pendingQueries&&(this._pendingQueries.forEach(function(K,J){K.isFulfilled()||K.cancel(Error(B._cancelErrorMsg))}),this._pendingQueries.clear(),this.notifyChange("updating"))},refresh:function(){this.isResolved()&&this._started&&this._queryFeatures()},startup:function(){this._started||(this._started=!0,this._resolutionParams=this._getResolutionParams(),this._queryFeatures())},update:function(){this.startup()},_init:function(){var B=
this.layer;this.paginationEnabled=!!B.get("capabilities.query.supportsPagination");this._source=B.source;var K=B.maxRecordCount||4E3;this.pageSize=null==this.maxPageSize?K:Math.min(K,this.maxPageSize);this._gManager=new t({graphics:this.graphics,objectIdField:B.objectIdField});this._verticalScale=new y({sourceSpatialReference:B.spatialReference,destSpatialReference:this.layerView.view.spatialReference});this._setupStateWatchers()},_getResolutionParams:function(){var B=this.layer,K=B.get("capabilities.query.supportsQuantization");
if("polyline"===B.geometryType||"polygon"===B.geometryType){var J=w(this.layerView.view.spatialReference);if(null!=J){var c=this._featureResolution.scale;J=this._featureResolution.value/J;c=B.maxScale?B.maxScale:B.minScale?Math.min(c,B.minScale):Math.min(c,v(this.layerView.view,B.fullExtent));c*=J/this._featureResolution.scale}}return c?{maxAllowableOffset:K?null:c,quantizationParameters:K?{mode:"view",originPosition:"upperLeft",tolerance:c,extent:B.fullExtent}:null}:null},_setupStateWatchers:function(){var B=
this;this._handles.add([this.watch("extent",this.refresh.bind(this)),this.layer.watch("outFields",function(K,J){K&&J?-1===J.indexOf("*")&&(K.sort(),J.sort(),JSON.stringify(K)!==JSON.stringify(J)&&B.refresh()):B.refresh()}),this.layer.watch("definitionExpression, historicMoment",this.refresh.bind(this)),this.layer.on("edits",this._editsHandler.bind(this))])},_createQueryParams:function(){var B=this.layer,K=this.layerView,J=B.createQuery();J.outSpatialReference=K.view.spatialReference;J.geometry=this.extent;
B=B.capabilities&&B.capabilities.data;return B&&B.supportsZ&&null==J.returnZ&&null!=this.defaultReturnZ&&(J.returnZ=this.defaultReturnZ),B&&B.supportsM&&null==J.returnM&&null!=this.defaultReturnM&&(J.returnM=this.defaultReturnM),J.set(this._resolutionParams),this.paginationEnabled&&(J.start=0,J.num=this.pageSize),J},_queryFeatures:function(){this.cancelQuery();this.hasAllFeatures=this.hasFeatures=!1;this._gManager.beginPagedUpdate();this.emit("query-start");this._executeQuery(this._createQueryParams())},
_executeQuery:function(B){var K=this,J=this._source.queryFeatures(B),c=this._gManager.createIntentToAdd();this._querySetup(c,J);J.then(this._processFeatureSet.bind(this,B,c))["catch"](function(k){return K._queryError(c,k)}).then(function(){return K._queryTeardown(c)},function(){return K._queryTeardown(c)})},_hydrate:function(B,K,J){if(B){var c=B.translate[0],k=B.translate[1],C=B.scale[0],D=B.scale[1],n=function(z,h,L){return"esriGeometryPoint"===z?function(M){M.x=h(M.x);M.y=L(M.y)}:"polyline"===z||
"polygon"===z?function(M){var P,S,O,T,W=M.rings||M.paths;M=0;for(P=W.length;M<P;M++){var V=W[M];var U=0;for(S=V.length;U<S;U++){var G=V[U];0<U?(O+=G[0],T+=G[1]):(O=G[0],T=G[1]);G[0]=h(O);G[1]=L(T)}}}:"extent"===z?function(M){M.xmin=h(M.xmin);M.ymin=L(M.ymin);M.xmax=h(M.xmax);M.ymax=L(M.ymax)}:"multipoint"===z?function(M){var P,S,O,T=M.points;M=0;for(P=T.length;M<P;M++){var W=T[M];0<M?(S+=W[0],O+=W[1]):(S=W[0],O=W[1]);W[0]=h(S);W[1]=L(O)}}:void 0}(K,function(z){return z*C+c},function(z){return k-z*
D});B=0;for(K=J.length;B<K;B++)J[B].geometry&&n(J[B].geometry)}},_processFeatureSet:function(B,K,J){J.transform&&this._hydrate(J.transform,J.geometryType,J.features);var c=J.exceededTransferLimit,k=J.features,C=this._maxFeatures[this.layer.geometryType]||0,D=k?k.length:0,n=this._gManager.numGraphics+D,z=n>=C;z&&(F.warn('Feature limit exceeded on layer "',this.layer.title,'". Not all features are shown.'),(C=n-C)&&k.splice(D-C,C));B=!(!c||!this.paginationEnabled||z)&&this._queryNextPage(B);return this._verticalScale.adjust(k),
k&&this._gManager.addPage(k,K),this.hasFeatures=!0,B||(this._gManager.endPagedUpdate(),this.hasAllFeatures=!c,this.emit("query-end",{success:!0})),J},_queryNextPage:function(B){return B.start+=this.pageSize,this._executeQuery(B),!0},_queryError:function(B,K){if(K&&"cancel"===K.dojoType&&!this.hasFeatures?this._gManager.revertPagedUpdate():this._gManager.endPagedUpdate(),this.emit("query-end",{success:!1}),K&&"cancel"===K.dojoType)return f.reject(K);B=new q("snapshotcontroller:tile-request-failed",
"Failed to query for features",{error:K});return F.error(B),f.reject(B)},_querySetup:function(B,K){this._pendingQueries.set(B,K);this.notifyChange("updating")},_queryTeardown:function(B){this._gManager.removeIntent(B);this._pendingQueries["delete"](B);this.notifyChange("updating")},_processRefetch:function(B,K){(K=K.features)&&this._gManager.add(K,B)},_refetchError:function(B,K){},_verifyCapabilities:function(){if(!this.layer.get("capabilities.operations.supportsQuery"))throw new q("graphicscontroller:query-capability-required",
"Service requires query capabilities to be used as a feature layer",{layer:this.layer});},_collectionChanged:function(B){var K=B.added;if(K)for(var J=0;J<K.length;J++)K[J].layer=this.layer,K[J].sourceLayer=this.layer;if(K=B.removed)for(J=0;J<K.length;J++)K[J].layer=null,K[J].sourceLayer=null},_editsHandler:function(B){var K=this,J=function(C){return C.objectId},c=B.deletedFeatures.map(J);this._gManager["delete"](c);B=B.addedFeatures.concat(B.updatedFeatures).map(J);if(B.length){J=this._createQueryParams();
J.objectIds=B;J=this._source.queryFeatures(J);var k=this._gManager.createIntentToAdd(B);this._querySetup(k,J);J.then(this._processRefetch.bind(this,k))["catch"](this._refetchError.bind(this,k)).then(function(){return K._queryTeardown(k)},function(){return K._queryTeardown(k)})}}})})},"fx3d/views/3d/layers/GraphicsManager":function(){define(["esri/core/Accessor"],function(b){var a=0;return b.createSubclass({constructor:function(){this._deletedGraphicsIndex=new Set;this._intentsIndex=new Map},destroy:function(){this.removeAll();
this._intentsIndex=this._deletedGraphicsIndex=null},properties:{graphics:null,indexById:{value:null,dependsOn:["graphics","objectIdField"],get:function(){return this._createIndexById(this.graphics&&this.graphics.toArray(),this.objectIdField)}},numGraphics:{value:0,dependsOn:["indexById"],get:function(){return this.indexById?this.indexById.size:0}},objectIdField:null,updating:{value:!1,dependsOn:["_intentsIndex"],get:function(){return!!(this._intentsIndex&&0<this._intentsIndex.size)}},_intentsIndex:{value:null}},
_oldIndex:null,_deletedGraphicsIndex:null,beginPagedUpdate:function(){this._oldIndex=this.indexById;this.indexById=null;this.notifyChange("numGraphics")},addPage:function(q,p){this.add(q,p)},revertPagedUpdate:function(){var q=this._removeLeftOnly(this.indexById,this._oldIndex);this.indexById=this._oldIndex;this._oldIndex=null;this.graphics.removeMany(q);this.notifyChange("numGraphics")},endPagedUpdate:function(){var q=this._removeLeftOnly(this._oldIndex,this.indexById);this._oldIndex=null;this.graphics.removeMany(q);
this.notifyChange("numGraphics")},findGraphic:function(q){return(q=this.indexById&&this.indexById.get(q))&&q.graphic},removeAll:function(){this.indexById=this._oldIndex=null;this.graphics.removeAll();this.notifyChange("numGraphics")},add:function(q,p){if(q&&q.length){var g=this.objectIdField,m=this.indexById=this.indexById||new Map,d=this._oldIndex,f=this._createIndexById(q,g);f=this._extractObjectIds(f);m=this._extractObjectIds(m);d=this._extractObjectIds(d);m=m.concat(d);var l=[],t=m.length;for(d=
0;d<t;d++){var y=m[d];-1<f.indexOf(y)&&l.push(y)}l.length&&this._remove(l,!1);p=this.findIntent(p);f=new Map;m=q.length;for(d=0;d<m;d++)(l=q[d])&&l.attributes&&f.set(l.attributes[g],p);q.length&&this._add(q,f)}},remove:function(q){this._remove(q,!1)},"delete":function(q){this._remove(q,!0)},isDeleted:function(q){return this._deletedGraphicsIndex.has(q)},createIntentToAdd:function(q){q&&this._intentsIndex.forEach(function(g,m){q.forEach(function(d){g.ignoredIds.add(d)})},this);var p=a++;return this._intentsIndex.set(p,
{ignoredIds:new Set}),this.notifyChange("updating"),p},findIntent:function(q){return this._intentsIndex.get(q)},removeIntent:function(q){this._intentsIndex["delete"](q);this.notifyChange("updating")},update:function(q,p){if(q&&q.length){var g=this.objectIdField,m=this.indexById=this.indexById||new Map,d=this._oldIndex;q=this._createIndexById(q,g);g=this._extractObjectIds(q);var f=this._extractObjectIds(m),l=this._extractObjectIds(d);f=f.concat(l);l=[];for(var t=f.length,y=0;y<t;y++){var w=f[y];if(-1===
g.indexOf(w))l.push(w);else{var v=m.get(w)||d.get(w);v=v&&v.graphic&&v.graphic._ts;var F=q.get(w);(F&&F.graphic&&F.graphic._ts)>v&&l.push(w)}}m=[];d=g.length;for(y=0;y<d;y++)w=g[y],(-1===f.indexOf(w)||-1<l.indexOf(w))&&m.push(w);l.length&&this._remove(l,!1);m.length&&this._add(this._extractGraphics(m,q),p)}},_createIndexById:function(q,p){if(q&&q.length&&p){var g,m;var d=new Map;for(g=0;m=q[g];g++){var f=m.attributes&&m.attributes[p];null!=f&&d.set(f,{graphic:m,refCount:1})}}return d},_add:function(q,
p){var g=this.objectIdField;q.forEach(function(m){var d=p.get(m.attributes&&m.attributes[g]);this._addToIndex(m,this.indexById,d)},this);this.graphics.addMany(q);this.notifyChange("numGraphics")},_addToIndex:function(q,p,g){var m=q.attributes&&q.attributes[this.objectIdField];p&&null!=m&&(p.has(m)?g&&g.ignoredIds.has(m)||(g=p.get(m),p.set(m,{graphic:q,refCount:g.refCount+1})):this.isDeleted(m)||p.set(m,{graphic:q,refCount:1}))},_remove:function(q,p){q=q||[];q="object"==typeof q[0]?q.map(function(d){return d.attributes&&
d.attributes[this.objectIdField]}.bind(this)):q;var g=this._extractGraphics(q,this._oldIndex),m=this._extractGraphics(q,this.indexById);q.forEach(function(d){p&&this._deletedGraphicsIndex.add(d);this._removeFromIndex(d,this._oldIndex,p);this._removeFromIndex(d,this.indexById,p)}.bind(this));this.graphics.removeMany(g.concat(m));this.notifyChange("numGraphics")},_removeFromIndex:function(q,p,g){if(p&&p.has(q))if(g)p["delete"](q);else{g=p.get(q);var m=g.refCount-1;0===m?p["delete"](q):g.refCount=m}},
_removeLeftOnly:function(q,p){var g=[];return q&&q.forEach(function(m,d){var f=m.graphic;!f||p&&p.has(d)||(--m.refCount,0===m.refCount&&q["delete"](d),g.push(f))}),g},_extractGraphics:function(q,p){return q&&p?q.map(function(g){return(g=p.get(g))&&g.graphic}):[]},_extractObjectIds:function(q){var p=[];return q&&q.forEach(function(g,m){p.push(m)}),p}})})},"fx3d/views/3d/layers/Graphics3DVerticalScale":function(){define(["esri/core/Accessor","esri/core/maybe","esri/core/unitUtils"],function(b,a,q){return b.createSubclass({constructor:function(p){this.sourceSpatialReference=
p.sourceSpatialReference;this.destSpatialReference=p.destSpatialReference},adjust:function(p){var g=this._getVerticalUnitScale();1!==g&&this._scaleVerticalUnits(p,g)},_getVerticalUnitScale:function(){if(this.sourceSpatialReference&&!this.sourceSpatialReference.equals(this.destSpatialReference)){var p=q.getMetersPerVerticalUnitForSR(this.sourceSpatialReference),g=q.getMetersPerVerticalUnitForSR(this.destSpatialReference);return p/g}return 1},_vertexListsScaleZ:function(p,g){for(var m=0;m<p.length;++m)for(var d=
p[m],f=0;f<d.length;++f)d[f][2]*=g},_scaleVerticalUnits:function(p,g){for(var m=0;m<p.length;++m){var d=p[m].geometry;!a.isNone(d)&&d.hasZ&&(this._geometryIsPoint(d)?null!==d.z&&(d.z*=g):this._geometryIsPolyline(d)?this._vertexListsScaleZ(d.paths,g):this._geometryIsPolygon(d)&&this._vertexListsScaleZ(d.rings,g))}},_geometryIsPoint:function(p){return"point"===p.type},_geometryIsPolygon:function(p){return"polygon"===p.type},_geometryIsPolyline:function(p){return"polyline"===p.type}})})},"fx3d/views/3d/effects/FxEffectRendererManager":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare esri/core/scheduling esri/core/watchUtils ../webgl-engine-extensions/ShaderSnippets esri/core/libs/gl-matrix-2/vec3f64 esri/core/libs/gl-matrix-2/mat4f64 esri/core/libs/gl-matrix-2/vec3 esri/core/libs/gl-matrix-2/mat4 esri/views/3d/externalRenderers esri/layers/GraphicsLayer ./Effect ../support/fx3dUtils dojo/text!./CommonShaders.xml".split(" "),
function(b,a,q,p,g,m,d,f,l,t,y,w,v,F,x){var u=f.mat4f64;t=t.mat4;var H=d.vec3f64,I=q(null,{declaredClass:"esri.views.3d.effects.FxEffectRendererManager",constructor:function(){this._sceneView=null;this._ready=!1;this._effects=[];this._shaderSnippets=this._fx3dFrameTask=null;this._normalMatrix=u.create();this._viewDirection=H.create();this._shaderSnippets||(this._shaderSnippets=new m,this._shaderSnippets._parse(x))},_init:function(K){return b.isObject(K)?(this._sceneView=K,this._vaoExt=this._sceneView._stage.renderView._rctx._capabilities.vao,
void(this._ready||g.whenTrue(this._sceneView,"ready",this._viewReadyHandler.bind(this)))):void console.error("FxEffectRendererManager: no sceneView")},_viewReadyHandler:function(){this._sceneView&&(this._labelsLayer=new w({id:"-labelinfo-layer",listMode:"hide"}),this._sceneView.map.add(this._labelsLayer))},setup:function(K){this.context={};this.context.gl=K.gl;this.context.rctx=K.rctx;this._gl=this.context.gl;this._gl.getExtension("OES_texture_float");this._gl.getExtension("OES_texture_float_linear");
this._effects.forEach(function(J){J.effect.setupEffect({gl:this._gl,vaoExt:this._vaoExt,shaderSnippets:this._shaderSnippets})}.bind(this));K.resetWebGLState()},_updateContext:function(K){var J={};J.direction=K.sunLight.direction;J.ambient=K.sunLight.ambient.color;J.diffuse=K.sunLight.diffuse.color;J.specular=[.2,.2,.2,.2];J.ambient[3]=K.sunLight.ambient.intensity;J.diffuse[3]=K.sunLight.diffuse.intensity;this.context.lightingData=J;t.copy(this._normalMatrix,K.camera.viewInverseTransposeMatrix);this._normalMatrix[3]=
this._normalMatrix[7]=this._normalMatrix[11]=0},render:function(K){K.gl.enable(K.gl.DEPTH_TEST);K.gl.disable(K.gl.CULL_FACE);K.gl.disable(K.gl.BLEND);this._updateContext(K);_context=K;this._effects.forEach(function(J){J.effect.update();J.effect.render({zoom:this._sceneView.zoom,proj:_context.camera.projectionMatrix,view:_context.camera.viewMatrix,viewInvTransp:_context.camera.viewInverseTransposeMatrix,normalMat:this._normalMatrix,camPos:_context.camera.eye,lightingData:this.context.lightingData,
viewport:_context.camera.viewport},_context.rctx)}.bind(this));y.requestRender(this._sceneView);K.resetWebGLState()},dispose:function(){},addEffect:function(K,J){if(b.isObject(K)&&J instanceof v){if(0<a.filter(this._effects,function(c){return c.id===K.id&&c.effect.effectName==J.effectName}).length)return console.warn("Layer "+K.id+" in "+J.effectName+" effect has already existed."),!1;if(b.isObject(J))return K.emit("hide-feature-label"),this._labelsLayer.id=K.id+this._labelsLayer.id,K._labelsLayer=
this._labelsLayer,this._labelsLayer.visible=K.visible,K.watch("visible",function(c,k,C){this._labelsLayer&&(K.emit("hide-feature-label"),this._labelsLayer.set("visible",!!c))}.bind(this)),this._effects.push({id:K.id,effect:J}),J.initEffect({}),!0}return!1},_remove:function(K,J){if(K&&J){var c=-1,k=a.filter(this._effects,function(C,D){return C.id===J&&K==C.effect.effectName&&(c=D,!0)});0<k.length&&-1<c&&(k[0].effect.destroy(),this._effects.splice(c,1));0===this._effects.length&&(this._ready=!1,this._labelsLayer&&
(this._labelsLayer.removeAll(),this._sceneView.map.remove(this._labelsLayer)))}}}),B=null;return I.init=function(K){B||(B=new I);B._init(K)},I.addEffect=function(K,J){if(B){var c=B._sceneView;return this._eventHandler=K.on("effect-ok-test",function(k){y.add(c,B)}.bind(this)),B.addEffect(K,J)}return!1},I.run=function(K,J){return!!B&&B._prepare(K,J)},I.destroy=function(K,J){if(B){var c=B._sceneView;B._remove(K,J);y.remove(c,B)}},I.pause=function(){B&&B._fx3dFrameTask&&B._fx3dFrameTask.pause()},I})},
"fx3d/views/3d/webgl-engine-extensions/ShaderSnippets":function(){define(["dojo/_base/declare","dojox/xml/parser","esri/views/3d/webgl-engine/lib/Util","./constraints"],function(b,a,q,p){return b(null,{declaredClass:"esri.views.3d.webgl-engine-extensions.ShaderSnippets",constructor:function(g){var m=p.VertexAttrConstants,d;for(d in m)this[m[d]]=p.VertexAttrConstants[d];if(g)for(var f in g)this[f]=g[f]},_parse:function(g){g=a.parse(g).getElementsByTagName("snippet");for(var m=/\$[a-zA-Z0-9_]+[ \t]*/,
d=/[\$\s]+/g,f=0;f<g.length;f++){var l=g[f].getAttribute("name");q.assert(null==this[l]);for(var t=g[f].textContent;;){var y=t.match(m);if(null==y)break;var w=this[y[0].replace(d,"")];q.assert(void 0!==w);t=t.replace(y[0],w)}this[l]=t}}})})},"dojox/xml/parser":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(b){b.getObject("xml.parser",!0,dojox);dojox.xml.parser.parse=function(a,q){var p=b.doc;q=q||"text/xml";if(a&&b.trim(a)&&
"DOMParser"in b.global){var g=(new DOMParser).parseFromString(a,q);a=g.documentElement;if("parsererror"==a.nodeName&&"http://www.mozilla.org/newlayout/xml/parsererror.xml"==a.namespaceURI){if(p=a.getElementsByTagNameNS("http://www.mozilla.org/newlayout/xml/parsererror.xml","sourcetext")[0])p=p.firstChild.data;throw Error("Error parsing text "+a.firstChild.data+" \n"+p);}return g}if("ActiveXObject"in b.global){p=function(d){return"MSXML"+d+".DOMDocument"};p=["Microsoft.XMLDOM",p(6),p(4),p(3),p(2)];
b.some(p,function(d){try{g=new ActiveXObject(d)}catch(f){return!1}return!0});if(a&&g&&(g.async=!1,g.loadXML(a),a=g.parseError,0!==a.errorCode))throw Error("Line: "+a.line+"\nCol: "+a.linepos+"\nReason: "+a.reason+"\nError Code: "+a.errorCode+"\nSource: "+a.srcText);if(g)return g}else if(p.implementation&&p.implementation.createDocument){if(a&&b.trim(a)&&p.createElement){q=p.createElement("xml");q.innerHTML=a;var m=p.implementation.createDocument("foo","",null);b.forEach(q.childNodes,function(d){m.importNode(d,
!0)});return m}return p.implementation.createDocument("","",null)}return null};dojox.xml.parser.textContent=function(a,q){if(1<arguments.length)return dojox.xml.parser.replaceChildren(a,(a.ownerDocument||b.doc).createTextNode(q)),q;if(void 0!==a.textContent)return a.textContent;var p="";a&&b.forEach(a.childNodes,function(g){switch(g.nodeType){case 1:case 5:p+=dojox.xml.parser.textContent(g);break;case 3:case 2:case 4:p+=g.nodeValue}});return p};dojox.xml.parser.replaceChildren=function(a,q){var p=
[];b.isIE&&b.forEach(a.childNodes,function(g){p.push(g)});dojox.xml.parser.removeChildren(a);b.forEach(p,b.destroy);b.isArray(q)?b.forEach(q,function(g){a.appendChild(g)}):a.appendChild(q)};dojox.xml.parser.removeChildren=function(a){for(var q=a.childNodes.length;a.hasChildNodes();)a.removeChild(a.firstChild);return q};dojox.xml.parser.innerXML=function(a){return a.innerXML?a.innerXML:a.xml?a.xml:"undefined"!=typeof XMLSerializer?(new XMLSerializer).serializeToString(a):null};return dojox.xml.parser})},
"esri/views/3d/webgl-engine/lib/Util":function(){define(["exports","../../../../chunks/vec2","../../../../chunks/vec2f64","../../../../chunks/vec4","../../../../chunks/vec4f64"],function(b,a,q,p,g){function m(l,t){if(!l)throw t=t||"assert",console.log(Error(t).stack),new f(t);}const d=g.create();let f=function(){function l(t){this.message=t}l.prototype.toString=function(){return`AssertException: ${this.message}`};return l}();b.assert=m;b.fovd2fovx=function(l,t,y){return 2*Math.atan(t*Math.tan(.5*
l)/Math.sqrt(t*t+y*y))};b.fovd2fovy=function(l,t,y){return 2*Math.atan(y*Math.tan(.5*l)/Math.sqrt(t*t+y*y))};b.fovx2fovd=function(l,t,y){return 2*Math.atan(Math.sqrt(t*t+y*y)*Math.tan(.5*l)/t)};b.fovy2fovd=function(l,t,y){return 2*Math.atan(Math.sqrt(t*t+y*y)*Math.tan(.5*l)/y)};b.inverseProjectionInfo=function(l,t,y,w,v){0===l[11]?(w[0]=2/(t*l[0]),w[1]=2/(y*l[5]),w[2]=(1+l[12])/l[0],w[3]=(1+l[13])/l[5],a.set(v,0,1)):(w[0]=-2/(t*l[0]),w[1]=-2/(y*l[5]),w[2]=(1-l[8])/l[0],w[3]=(1-l[9])/l[5],a.set(v,
1,0))};b.isTranslationMatrix=function(l){return 1===l[0]&&0===l[1]&&0===l[2]&&0===l[3]&&0===l[4]&&1===l[5]&&0===l[6]&&0===l[7]&&0===l[8]&&0===l[9]&&1===l[10]&&0===l[11]&&1===l[15]};b.logWithBase=function(l,t){return Math.log(l)/Math.log(t)};b.project=function(l,t,y,w,v){v||(v=l);d[0]=l[0];d[1]=l[1];d[2]=l[2];d[3]=1;p.transformMat4(d,d,t);2<v.length&&(v[2]=-d[2]);p.transformMat4(d,d,y);m(0!==d[3]);v[0]=d[0]/d[3];v[1]=d[1]/d[3];v[2]=d[2]/d[3];v[0]=(.5*v[0]+.5)*w[2]+w[0];v[1]=(.5*v[1]+.5)*w[3]+w[1]};
b.rayBoxTest=function(l,t,y,w){let v,F=(y[0]-l[0])/t[0],x=(w[0]-l[0])/t[0];F>x&&(v=F,F=x,x=v);let u=(y[1]-l[1])/t[1],H=(w[1]-l[1])/t[1];u>H&&(v=u,u=H,H=v);if(F>H||u>x)return!1;u>F&&(F=u);H<x&&(x=H);y=(y[2]-l[2])/t[2];l=(w[2]-l[2])/t[2];y>l&&(v=y,y=l,l=v);if(F>l||y>x)return!1;l<x&&(x=l);return 0>x?!1:!0};b.rayRay2D=function(l,t,y,w,v,F=q.create()){const x=(w[v]-y[v])*(t[0]-l[0])-(w[0]-y[0])*(t[v]-l[v]);if(0===x)return!1;y=((w[0]-y[0])*(l[v]-y[v])-(w[v]-y[v])*(l[0]-y[0]))/x;F[0]=l[0]+y*(t[0]-l[0]);
F[1]=l[v]+y*(t[v]-l[v]);return!0};b.setMatrixTranslation3=function(l,t,y,w){l[12]=t;l[13]=y;l[14]=w};b.verify=function(l,t){l||console.warn("Verify failed: "+(t||"")+"\n"+Error("verify").stack)};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/chunks/vec2":function(){define(["exports","./common"],function(b,a){function q(G,A){G[0]=A[0];G[1]=A[1];return G}function p(G,A,r){G[0]=A;G[1]=r;return G}function g(G,A,r){G[0]=A[0]+r[0];G[1]=A[1]+r[1];return G}function m(G,A,r){G[0]=A[0]-r[0];G[1]=
A[1]-r[1];return G}function d(G,A,r){G[0]=A[0]*r[0];G[1]=A[1]*r[1];return G}function f(G,A,r){G[0]=A[0]/r[0];G[1]=A[1]/r[1];return G}function l(G,A){G[0]=Math.ceil(A[0]);G[1]=Math.ceil(A[1]);return G}function t(G,A){G[0]=Math.floor(A[0]);G[1]=Math.floor(A[1]);return G}function y(G,A,r){G[0]=Math.min(A[0],r[0]);G[1]=Math.min(A[1],r[1]);return G}function w(G,A,r){G[0]=Math.max(A[0],r[0]);G[1]=Math.max(A[1],r[1]);return G}function v(G,A){G[0]=Math.round(A[0]);G[1]=Math.round(A[1]);return G}function F(G,
A,r){G[0]=A[0]*r;G[1]=A[1]*r;return G}function x(G,A,r,e){G[0]=A[0]+r[0]*e;G[1]=A[1]+r[1]*e;return G}function u(G,A){const r=A[0]-G[0];G=A[1]-G[1];return Math.sqrt(r*r+G*G)}function H(G,A){const r=A[0]-G[0];G=A[1]-G[1];return r*r+G*G}function I(G){const A=G[0];G=G[1];return Math.sqrt(A*A+G*G)}function B(G){const A=G[0];G=G[1];return A*A+G*G}function K(G,A){G[0]=-A[0];G[1]=-A[1];return G}function J(G,A){G[0]=1/A[0];G[1]=1/A[1];return G}function c(G,A){var r=A[0];const e=A[1];r=r*r+e*e;0<r&&(r=1/Math.sqrt(r),
G[0]=A[0]*r,G[1]=A[1]*r);return G}function k(G,A){return G[0]*A[0]+G[1]*A[1]}function C(G,A,r){A=A[0]*r[1]-A[1]*r[0];G[0]=G[1]=0;G[2]=A;return G}function D(G,A,r,e){const E=A[0];A=A[1];G[0]=E+e*(r[0]-E);G[1]=A+e*(r[1]-A);return G}function n(G,A){A=A||1;const r=2*a.RANDOM()*Math.PI;G[0]=Math.cos(r)*A;G[1]=Math.sin(r)*A;return G}function z(G,A,r){const e=A[0];A=A[1];G[0]=r[0]*e+r[2]*A;G[1]=r[1]*e+r[3]*A;return G}function h(G,A,r){const e=A[0];A=A[1];G[0]=r[0]*e+r[2]*A+r[4];G[1]=r[1]*e+r[3]*A+r[5];return G}
function L(G,A,r){const e=A[0];A=A[1];G[0]=r[0]*e+r[3]*A+r[6];G[1]=r[1]*e+r[4]*A+r[7];return G}function M(G,A,r){const e=A[0];A=A[1];G[0]=r[0]*e+r[4]*A+r[12];G[1]=r[1]*e+r[5]*A+r[13];return G}function P(G,A,r,e){const E=A[0]-r[0];A=A[1]-r[1];const N=Math.sin(e);e=Math.cos(e);G[0]=E*e-A*N+r[0];G[1]=E*N+A*e+r[1];return G}function S(G,A){var r=G[0];G=G[1];const e=A[0];A=A[1];let E=r*r+G*G;0<E&&(E=1/Math.sqrt(E));let N=e*e+A*A;0<N&&(N=1/Math.sqrt(N));r=(r*e+G*A)*E*N;return 1<r?0:-1>r?Math.PI:Math.acos(r)}
function O(G){return"vec2("+G[0]+", "+G[1]+")"}function T(G,A){return G[0]===A[0]&&G[1]===A[1]}function W(G,A){const r=G[0];G=G[1];const e=A[0];A=A[1];return Math.abs(r-e)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(e))&&Math.abs(G-A)<=a.EPSILON*Math.max(1,Math.abs(G),Math.abs(A))}function V(G,A,r,e,E){let N=A[0]-r[0];r=A[1]-r[1];E=(e[0]*N+e[1]*r)*(E-1);N=e[0]*E;r=e[1]*E;G[0]=A[0]+N;G[1]=A[1]+r;return G}const U=Object.freeze({__proto__:null,copy:q,set:p,add:g,subtract:m,multiply:d,divide:f,ceil:l,
floor:t,min:y,max:w,round:v,scale:F,scaleAndAdd:x,distance:u,squaredDistance:H,length:I,squaredLength:B,negate:K,inverse:J,normalize:c,dot:k,cross:C,lerp:D,random:n,transformMat2:z,transformMat2d:h,transformMat3:L,transformMat4:M,rotate:P,angle:S,str:O,exactEquals:T,equals:W,projectAndScale:V,len:I,sub:m,mul:d,div:f,dist:u,sqrDist:H,sqrLen:B});b.add=g;b.angle=S;b.ceil=l;b.copy=q;b.cross=C;b.dist=u;b.distance=u;b.div=f;b.divide=f;b.dot=k;b.equals=W;b.exactEquals=T;b.floor=t;b.inverse=J;b.len=I;b.length=
I;b.lerp=D;b.max=w;b.min=y;b.mul=d;b.multiply=d;b.negate=K;b.normalize=c;b.projectAndScale=V;b.random=n;b.rotate=P;b.round=v;b.scale=F;b.scaleAndAdd=x;b.set=p;b.sqrDist=H;b.sqrLen=B;b.squaredDistance=H;b.squaredLength=B;b.str=O;b.sub=m;b.subtract=m;b.transformMat2=z;b.transformMat2d=h;b.transformMat3=L;b.transformMat4=M;b.vec2=U})},"esri/chunks/vec2f64":function(){define(["exports"],function(b){function a(){return[0,0]}function q(u){return[u[0],u[1]]}function p(u,H){return[u,H]}function g(u){const H=
[0,0],I=Math.min(2,u.length);for(let B=0;B<I;++B)H[B]=u[B];return H}function m(u,H){return new Float64Array(u,H,2)}function d(){return[0,0]}function f(){return[1,1]}function l(){return[1,0]}function t(){return[0,1]}const y=[0,0],w=[1,1],v=[1,0],F=[0,1],x=Object.freeze({__proto__:null,create:a,clone:q,fromValues:p,fromArray:g,createView:m,zeros:d,ones:f,unitX:l,unitY:t,ZEROS:y,ONES:w,UNIT_X:v,UNIT_Y:F});b.ONES=w;b.UNIT_X=v;b.UNIT_Y=F;b.ZEROS=y;b.clone=q;b.create=a;b.createView=m;b.fromArray=g;b.fromValues=
p;b.ones=f;b.unitX=l;b.unitY=t;b.vec2f64=x;b.zeros=d})},"esri/chunks/vec4f64":function(){define(["exports"],function(b){function a(){return[0,0,0,0]}function q(K){return[K[0],K[1],K[2],K[3]]}function p(K,J,c,k){return[K,J,c,k]}function g(K){const J=a(),c=Math.min(4,K.length);for(let k=0;k<c;++k)J[k]=K[k];return J}function m(K,J){return new Float64Array(K,J,4)}function d(){return a()}function f(){return[1,1,1,1]}function l(){return[1,0,0,0]}function t(){return[0,1,0,0]}function y(){return[0,0,1,0]}
function w(){return[0,0,0,1]}const v=a(),F=f(),x=l(),u=t(),H=y(),I=w(),B=Object.freeze({__proto__:null,create:a,clone:q,fromValues:p,fromArray:g,createView:m,zeros:d,ones:f,unitX:l,unitY:t,unitZ:y,unitW:w,ZEROS:v,ONES:F,UNIT_X:x,UNIT_Y:u,UNIT_Z:H,UNIT_W:I});b.ONES=F;b.UNIT_W=I;b.UNIT_X=x;b.UNIT_Y=u;b.UNIT_Z=H;b.ZEROS=v;b.clone=q;b.create=a;b.createView=m;b.fromArray=g;b.fromValues=p;b.ones=f;b.unitW=w;b.unitX=l;b.unitY=t;b.unitZ=y;b.vec4f64=B;b.zeros=d})},"esri/views/3d/externalRenderers":function(){define(["exports",
"../../core/has","../../chunks/mat4f64","../../geometry/projection","./externalRenderers/ExternalRendererStore"],function(b,a,q,p,g){function m(v,F){w.add(v,F)}function d(v,F){w.remove(v,F)}function f(v){v._stage.renderView.requestRender()}function l(v,F,x,u,H,I,B){u=u||v.spatialReference;return p.projectBuffer(F,u,x,H,v.renderCoordsHelper.spatialReference,I,B)?H:null}function t(v,F,x,u,H,I,B){I=I||v.spatialReference;return p.projectBuffer(F,v.renderCoordsHelper.spatialReference,x,u,I,H,B)?u:null}
function y(v,F,x,u){u||(u=q.create());x=x||v.spatialReference;return p.computeTranslationToOriginAndRotation(x,F,u,v.renderCoordsHelper.spatialReference)?u:null}const w=new g;b.add=m;b.bind=function(v){return{add:m.bind(this,v),remove:d.bind(this,v),requestRender:f.bind(this,v),toRenderCoordinates:l.bind(this,v),fromRenderCoordinates:t.bind(this,v),renderCoordinateTransformAt:y.bind(this,v)}};b.forceWebGLContext=function(v){a.add("esri-force-webgl",v)};b.fromRenderCoordinates=t;b.getRenderCamera=
function(v){return v.state.camera.clone()};b.remove=d;b.renderCoordinateTransformAt=y;b.requestRender=f;b.toRenderCoordinates=l;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/externalRenderers/ExternalRendererStore":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Collection ../../../core/Logger ../../../core/watchUtils ../../../chunks/vec3 ./RenderContext ../webgl-engine/lib/RenderPass ../webgl-engine/lib/RenderSlot".split(" "),function(b,a,q,p,g,m,d,
f){function l(w,v,F){if("function"===typeof w[v])w[v](F)}const t=q.getLogger("esri.views.3d.externalRenderers.ExternalRendererStore");q=function(){function w(){this._renderers=new a}var v=w.prototype;v.add=function(F,x){this._findOrCreateStageRenderer(F).add(x)};v.remove=function(F,x){(F=this._findStageRenderer(F))&&F.remove(x);0===F.renderers.length&&(F.destroy(),this._renderers.remove(F))};v._findStageRenderer=function(F){return this._renderers.find(x=>x.view===F)};v._findOrCreateStageRenderer=
function(F){let x=this._findStageRenderer(F);x||(x=new y(F),this._renderers.add(x));return x};return w}();let y=function(){function w(F){this.view=F;this.canRender=!0;this.renderers=new a;this._readyWatchHandle=p.init(F,"ready",x=>{x?(this.context=new m(this.view),this.view._stage.addRenderPlugin([f.RenderSlot.OPAQUE_PLUGIN,f.RenderSlot.TRANSPARENT_PLUGIN],this)):(this.renderers.forEach(u=>l(u,"dispose",this.context)),this.context=null)})}var v=w.prototype;v.destroy=function(){this.renderers.drain(F=>
{this.context&&l(F,"dispose",this.context)});this.view._stage&&this.view._stage.removeRenderPlugin(this);this._readyWatchHandle&&(this._readyWatchHandle.remove(),this._readyWatchHandle=null);this.context=null};v.add=function(F){-1!==this.renderers.indexOf(F)?t.warn("add(): Cannot add external renderer: renderer has already been added"):(this.renderers.add(F),this.context&&(this._webglStateReset(),l(F,"setup",this.context),this.view._stage.renderView.requestRender()))};v.remove=function(F){const x=
this.renderers.indexOf(F);-1!==x&&(this.renderers.removeAt(x),this.context&&(l(F,"dispose",this.context),this.view._stage.renderView.requestRender()))};v.initializeRenderContext=function(F){this.context.rctx=F.renderContext.rctx;0<this.renderers.length&&this._webglStateReset();this.renderers.forEach(x=>l(x,"setup",this.context))};v.uninitializeRenderContext=function(){};v.render=function(F){0===this.renderers.length||F.pass!==d.RenderPass.MATERIAL||F.slot!==f.RenderSlot.OPAQUE_PLUGIN&&F.slot!==f.RenderSlot.TRANSPARENT_PLUGIN||
(this._updateContext(F),this._webglStateReset(),this.renderers.forEach(x=>{switch(F.slot){case f.RenderSlot.OPAQUE_PLUGIN:l(x,"render",this.context);break;case f.RenderSlot.TRANSPARENT_PLUGIN:l(x,"renderTransparent",this.context)}}))};v._updateContext=function(F){this.context.camera.copyFrom(F.camera);g.copy(this.context.sunLight.direction,F.scenelightingData.old.direction);g.copy(this.context.sunLight.diffuse.color,F.scenelightingData.old.diffuse.color);g.copy(this.context.sunLight.ambient.color,
F.scenelightingData.old.ambient.color);this.context._renderTargetHelper=F.offscreenRenderingHelper};v._webglStateReset=function(){var F;this.context.rctx.resetState();null==(F=this.context._renderTargetHelper)?void 0:F.bindFramebuffer()};b._createClass(w,[{key:"needsTransparentPass",get:function(){return this.renderers.some(F=>"function"===typeof F.renderTransparent)}}]);return w}();return q})},"esri/views/3d/externalRenderers/RenderContext":function(){define(["../../../chunks/_rollupPluginBabelHelpers",
"../../../chunks/vec3f64","../webgl-engine/lib/Camera"],function(b,a,q){return function(){function p(m){this.view=m;this.camera=new q.default;this.sunLight={direction:a.create(),ambient:{color:a.create(),intensity:1},diffuse:{color:a.create(),intensity:1}};this._renderTargetHelper=null}var g=p.prototype;g.resetWebGLState=function(){null!=this.rctx&&(this.rctx.enforceState(),this._renderTargetHelper&&this._renderTargetHelper.bindFramebuffer())};g.bindRenderTarget=function(){this._renderTargetHelper&&
this._renderTargetHelper.framebuffer.initializeAndBind()};b._createClass(p,[{key:"gl",get:function(){return this.rctx.gl}}]);return p}()})},"esri/views/3d/webgl-engine/lib/Camera":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/Logger ../../../../core/mathUtils ../../../../core/maybe ../../../../core/screenUtils ../../../../chunks/mat4 ../../../../chunks/mat4f64 ../../../../chunks/vec2 ../../../../chunks/vec2f64 ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/vec4 ../../../../chunks/vec4f64 ../../../../geometry/support/frustum ../../../../geometry/support/ray ../../../../geometry/support/vector ../../../ViewingMode ./Util".split(" "),
function(b,a,q,p,g,m,d,f,l,t,y,w,v,F,x,u,H,I,B){const K=q.getLogger("esri.views.3d.webgl-engine.lib.Camera");q=function(){function n(h=null,L=null,M=null){this._viewUp=w.create();this._viewForward=w.create();this._viewRight=w.create();this._ray=u.create();this._viewport=F.fromValues(0,0,1,1);this._padding=F.fromValues(0,0,0,0);this._fov=55/180*Math.PI;this._nearFar=t.fromValues(1,1E3);this._viewDirty=!0;this._viewMatrix=f.create();this._projectionDirty=!0;this._projectionMatrix=f.create();this._viewProjectionDirty=
!0;this._viewProjectionMatrix=f.create();this._viewInverseTransposeMatrixDirty=!0;this._viewInverseTransposeMatrix=f.create();this._frustumDirty=!0;this._frustum=x.create();this._fullViewport=F.create();this.pixelRatio=1;this.relativeElevation=0;g.isSome(h)&&y.copy(this._ray.origin,h);this._center=g.isSome(L)?w.clone(L):w.create();this._up=g.isSome(M)?w.clone(M):w.fromValues(0,0,1)}var z=n.prototype;z.depthNDCToWorld=function(h){return 2*this.near*this.far/(this.far+this.near-(2*h-1)*(this.far-this.near))};
z.copyFrom=function(h){y.copy(this._ray.origin,h.eye);y.copy(this._center,h.center);y.copy(this._up,h.up);v.copy(this._viewport,h.viewport);v.copy(this._padding,h.padding);l.copy(this._nearFar,h.nearFar);this._fov=h.fov;this.relativeElevation=h.relativeElevation;this._viewDirty=h._viewDirty;this._viewDirty||(d.copy(this._viewMatrix,h.viewMatrix),y.copy(this._viewRight,h.viewRight),y.copy(this._viewUp,h.viewUp),y.copy(this._viewForward,h.viewForward));h._projectionDirty?this._projectionDirty=!0:(d.copy(this._projectionMatrix,
h.projectionMatrix),this._projectionDirty=!1);this._viewProjectionDirty=!0;this._frustumDirty=h._frustumDirty;this._frustumDirty||(x.copy(this._frustum,h.frustum),this._frustumDirty=!1);h._viewInverseTransposeMatrixDirty?this._viewInverseTransposeMatrixDirty=!0:(d.copy(this._viewInverseTransposeMatrix,h.viewInverseTransposeMatrix),this._viewInverseTransposeMatrixDirty=!1);v.copy(this._fullViewport,h.fullViewport);this.pixelRatio=h.pixelRatio;return this};z.copyViewFrom=function(h){this.eye=h.eye;
this.center=h.center;this.up=h.up};z.clone=function(){return(new n).copyFrom(this)};z.equals=function(h){return y.exactEquals(this.eye,h.eye)&&y.exactEquals(this._center,h.center)&&y.exactEquals(this._up,h.up)&&v.exactEquals(this._viewport,h.viewport)&&v.exactEquals(this._padding,h.padding)&&l.exactEquals(this._nearFar,h.nearFar)&&this._fov===h.fov&&this.pixelRatio===h.pixelRatio&&this.relativeElevation===h.relativeElevation};z.almostEquals=function(h){if(this.pixelRatio!==h.pixelRatio||.001<=Math.abs(h.fov-
this._fov))return!1;const L=1-1E-10;y.sub(k,h.eye,h.center);y.sub(C,this.eye,this._center);const M=y.dot(k,C),P=y.sqrLen(k),S=y.sqrLen(C);return M*M>=L*P*S&&y.sqrDist(h.eye,this.eye)<2.5E-7*Math.max(P,S)&&.5>v.squaredDistance(h.padding,this._padding)&&.5>v.squaredDistance(h.viewport,this._viewport)};z.computeRenderPixelSizeAt=function(h){return this.computeRenderPixelSizeAtDist(this._viewDirectionDistance(h))};z.computeRenderPixelSizeAtDist=function(h){return h*this.perRenderPixelRatio};z.computeScreenPixelSizeAt=
function(h){return this.computeScreenPixelSizeAtDist(this._viewDirectionDistance(h))};z._viewDirectionDistance=function(h){return Math.abs(H.projectPointSignedLength(this.viewForward,y.subtract(k,h,this.eye)))};z.computeScreenPixelSizeAtDist=function(h){return h*this.perScreenPixelRatio};z.computeDistanceFromRadius=function(h,L){return h/Math.tan(Math.min(this.fovX,this.fovY)/(2*(L||1)))};z.getScreenCenter=function(h=m.createScreenPointArray()){h[0]=(this.padding[b.PaddingSide.LEFT]+this.width/2)/
this.pixelRatio;h[1]=(this.padding[b.PaddingSide.TOP]+this.height/2)/this.pixelRatio;return h};z.getRenderCenter=function(h,L=.5,M=.5){h[0]=this.padding[b.PaddingSide.LEFT]+this.width*L;h[1]=this.padding[b.PaddingSide.BOTTOM]+this.height*M;h[2]=.5;return h};z.setGLViewport=function(h){const L=this.viewport,M=this.padding;h.setViewport(L[0]-M[3],L[1]-M[2],L[2]+M[1]+M[3],L[3]+M[0]+M[2])};z.applyProjection=function(h,L,M=!1){h!==J&&y.copy(J,h);J[3]=1;M&&(L[2]=-J[2]);v.transformMat4(J,J,this.projectionMatrix);
y.scale(J,J,1/Math.abs(J[3]));h=this.fullViewport;L[0]=p.lerp(0,h[0]+h[2],.5+.5*J[0]);L[1]=p.lerp(0,h[1]+h[3],.5+.5*J[1]);M||(L[2]=.5*(J[2]+1));return L};z.projectToScreen=function(h,L){this.projectToRenderScreen(h,D);this.renderToScreen(D,L)};z.projectToRenderScreen=function(h,L){J[0]=h[0];J[1]=h[1];J[2]=h[2];J[3]=1;v.transformMat4(J,J,this.viewProjectionMatrix);if(0===J[3])return null;y.scale(J,J,1/Math.abs(J[3]));h=this.fullViewport;"x"in L?(L.x=p.lerp(0,h[0]+h[2],.5+.5*J[0]),L.y=p.lerp(0,h[1]+
h[3],.5+.5*J[1])):(L[0]=p.lerp(0,h[0]+h[2],.5+.5*J[0]),L[1]=p.lerp(0,h[1]+h[3],.5+.5*J[1]),2<L.length&&(L[2]=.5*(J[2]+1)));return L};z.unprojectFromScreen=function(h,L){return this.unprojectFromRenderScreen(this.screenToRender(h,D),L)};z.unprojectFromRenderScreen=function(h,L){d.multiply(c,this.projectionMatrix,this.viewMatrix);if(!d.invert(c,c))return null;const M=this.fullViewport;J[0]=2*(h[0]-M[0])/M[2]-1;J[1]=2*(h[1]-M[1])/M[3]-1;J[2]=2*h[2]-1;J[3]=1;v.transformMat4(J,J,c);if(0===J[3])return null;
L[0]=J[0]/J[3];L[1]=J[1]/J[3];L[2]=J[2]/J[3];return L};z.constrainWindowSize=function(h,L,M,P=M){h*=this.pixelRatio;L*=this.pixelRatio;return[Math.max(h-M/2,0),Math.max(this.fullHeight-L-P/2,0),M- -Math.min(h-M/2,0)- -Math.min(this.fullWidth-h-M/2,0),P- -Math.min(this.fullHeight-L-P/2,0)- -Math.min(L-P/2,0)]};z.computeUp=function(h){h===I.ViewingMode.Global?this._computeUpGlobal():this._computeUpLocal()};z.screenToRender=function(h,L){const M=this.fullHeight-h[1]*this.pixelRatio;L[0]=h[0]*this.pixelRatio;
L[1]=M;return L};z.renderToScreen=function(h,L){const M=(this.fullHeight-h[1])/this.pixelRatio;L[0]=h[0]/this.pixelRatio;L[1]=M};z._computeUpGlobal=function(){y.subtract(k,this.center,this.eye);const h=y.length(this.center);1>h?(y.set(this._up,0,0,1),this._markViewDirty()):Math.abs(y.dot(k,this.center))>.9999*y.length(k)*h||(y.cross(this._up,k,this.center),y.cross(this._up,this._up,k),y.normalize(this._up,this._up),this._markViewDirty())};z._computeUpLocal=function(){y.direction(k,this.eye,this.center);
.9999>=Math.abs(k[2])&&(y.scale(k,k,k[2]),y.set(this._up,-k[0],-k[1],1-k[2]),y.normalize(this._up,this._up),this._markViewDirty())};z._compareAndSetView=function(h,L){"number"===typeof h[0]&&isFinite(h[0])&&"number"===typeof h[1]&&isFinite(h[1])&&"number"===typeof h[2]&&isFinite(h[2])?y.exactEquals(h,L)||(y.copy(L,h),this._markViewDirty()):K.warn("Camera vector contains invalid number, ignoring value")};z._markViewDirty=function(){this._viewProjectionDirty=this._frustumDirty=this._viewDirty=!0};z._recomputeFrustum=
function(){this._frustumDirty&&(x.fromMatrix(this.viewMatrix,this.projectionMatrix,this._frustum),this._frustumDirty=!1)};z._ensureViewClean=function(){this._viewDirty&&(d.lookAt(this._viewMatrix,this.eye,this._center,this._up),y.set(this._viewForward,-this._viewMatrix[2],-this._viewMatrix[6],-this._viewMatrix[10]),y.set(this._viewUp,this._viewMatrix[1],this._viewMatrix[5],this._viewMatrix[9]),y.set(this._viewRight,this._viewMatrix[0],this._viewMatrix[4],this._viewMatrix[8]),this._viewDirty=!1,this._viewInverseTransposeMatrixDirty=
!0)};a._createClass(n,[{key:"eye",get:function(){return this._ray.origin},set:function(h){this._compareAndSetView(h,this._ray.origin)}},{key:"center",get:function(){return this._center},set:function(h){this._compareAndSetView(h,this._center)}},{key:"ray",get:function(){y.subtract(this._ray.direction,this.center,this.eye);return this._ray}},{key:"up",get:function(){return this._up},set:function(h){this._compareAndSetView(h,this._up)}},{key:"viewMatrix",get:function(){this._ensureViewClean();return this._viewMatrix},
set:function(h){d.copy(this._viewMatrix,h);this._viewDirty=!1;this._frustumDirty=this._viewProjectionDirty=this._viewInverseTransposeMatrixDirty=!0}},{key:"viewForward",get:function(){this._ensureViewClean();return this._viewForward}},{key:"viewUp",get:function(){this._ensureViewClean();return this._viewUp}},{key:"viewRight",get:function(){this._ensureViewClean();return this._viewRight}},{key:"nearFar",get:function(){return this._nearFar}},{key:"near",get:function(){return this._nearFar[0]},set:function(h){this._nearFar[0]!==
h&&(this._nearFar[0]=h,this._frustumDirty=this._viewProjectionDirty=this._projectionDirty=!0)}},{key:"far",get:function(){return this._nearFar[1]},set:function(h){this._nearFar[1]!==h&&(this._nearFar[1]=h,this._frustumDirty=this._viewProjectionDirty=this._projectionDirty=!0)}},{key:"viewport",get:function(){return this._viewport},set:function(h){this.x=h[0];this.y=h[1];this.width=h[2];this.height=h[3]}},{key:"x",get:function(){return this._viewport[0]},set:function(h){h+=this._padding[b.PaddingSide.LEFT];
this._viewport[0]!==h&&(this._viewport[0]=h,this._frustumDirty=this._viewProjectionDirty=this._projectionDirty=!0)}},{key:"y",get:function(){return this._viewport[1]},set:function(h){h+=this._padding[b.PaddingSide.BOTTOM];this._viewport[1]!==h&&(this._viewport[1]=h,this._frustumDirty=this._viewProjectionDirty=this._projectionDirty=!0)}},{key:"width",get:function(){return this._viewport[2]},set:function(h){this._viewport[2]!==h&&(this._viewport[2]=h,this._frustumDirty=this._viewProjectionDirty=this._projectionDirty=
!0)}},{key:"height",get:function(){return this._viewport[3]},set:function(h){this._viewport[3]!==h&&(this._viewport[3]=h,this._frustumDirty=this._viewProjectionDirty=this._projectionDirty=!0)}},{key:"fullWidth",get:function(){return this._viewport[2]+this._padding[b.PaddingSide.RIGHT]+this._padding[b.PaddingSide.LEFT]},set:function(h){this.width=h-(this._padding[b.PaddingSide.RIGHT]+this._padding[b.PaddingSide.LEFT])}},{key:"fullHeight",get:function(){return this._viewport[3]+this._padding[b.PaddingSide.TOP]+
this._padding[b.PaddingSide.BOTTOM]},set:function(h){this.height=h-(this._padding[b.PaddingSide.TOP]+this._padding[b.PaddingSide.BOTTOM])}},{key:"fullViewport",get:function(){this._fullViewport[0]=this._viewport[0]-this._padding[b.PaddingSide.LEFT];this._fullViewport[1]=this._viewport[1]-this._padding[b.PaddingSide.BOTTOM];this._fullViewport[2]=this.fullWidth;this._fullViewport[3]=this.fullHeight;return this._fullViewport}},{key:"aspect",get:function(){return this.width/this.height}},{key:"padding",
get:function(){return this._padding},set:function(h){if(this._padding[b.PaddingSide.TOP]!==h[b.PaddingSide.TOP]||this._padding[b.PaddingSide.RIGHT]!==h[b.PaddingSide.RIGHT]||this._padding[b.PaddingSide.BOTTOM]!==h[b.PaddingSide.BOTTOM]||this._padding[b.PaddingSide.LEFT]!==h[b.PaddingSide.LEFT])this._viewport[0]+=h[b.PaddingSide.LEFT]-this._padding[b.PaddingSide.LEFT],this._viewport[1]+=h[b.PaddingSide.BOTTOM]-this._padding[b.PaddingSide.BOTTOM],this._viewport[2]-=h[b.PaddingSide.RIGHT]+h[b.PaddingSide.LEFT]-
(this._padding[b.PaddingSide.RIGHT]+this._padding[b.PaddingSide.LEFT]),this._viewport[3]-=h[b.PaddingSide.TOP]+h[b.PaddingSide.BOTTOM]-(this._padding[b.PaddingSide.TOP]+this._padding[b.PaddingSide.BOTTOM]),v.copy(this._padding,h),this._frustumDirty=this._viewProjectionDirty=this._projectionDirty=!0}},{key:"viewProjectionMatrix",get:function(){this._viewProjectionDirty&&(d.multiply(this._viewProjectionMatrix,this.projectionMatrix,this.viewMatrix),this._viewProjectionDirty=!1);return this._viewProjectionMatrix}},
{key:"projectionMatrix",get:function(){if(this._projectionDirty){const h=this.width,L=this.height,M=this.near*Math.tan(this.fovY/2),P=M*this.aspect;d.frustum(this._projectionMatrix,-P*(1+2*this._padding[b.PaddingSide.LEFT]/h),P*(1+2*this._padding[b.PaddingSide.RIGHT]/h),-M*(1+2*this._padding[b.PaddingSide.BOTTOM]/L),M*(1+2*this._padding[b.PaddingSide.TOP]/L),this.near,this.far);this._projectionDirty=!1}return this._projectionMatrix},set:function(h){d.copy(this._projectionMatrix,h);this._projectionDirty=
!1;this._frustumDirty=this._viewProjectionDirty=!0}},{key:"fov",get:function(){return this._fov},set:function(h){this._fov=h;this._frustumDirty=this._viewProjectionDirty=this._projectionDirty=!0}},{key:"fovX",get:function(){return B.fovd2fovx(this._fov,this.width,this.height)},set:function(h){this._fov=B.fovx2fovd(h,this.width,this.height);this._frustumDirty=this._viewProjectionDirty=this._projectionDirty=!0}},{key:"fovY",get:function(){return B.fovd2fovy(this._fov,this.width,this.height)},set:function(h){this._fov=
B.fovy2fovd(h,this.width,this.height);this._frustumDirty=this._viewProjectionDirty=this._projectionDirty=!0}},{key:"distance",get:function(){return y.distance(this._center,this.eye)}},{key:"frustum",get:function(){this._recomputeFrustum();return this._frustum}},{key:"viewInverseTransposeMatrix",get:function(){if(this._viewInverseTransposeMatrixDirty||this._viewDirty)d.invert(this._viewInverseTransposeMatrix,this.viewMatrix),d.transpose(this._viewInverseTransposeMatrix,this._viewInverseTransposeMatrix),
this._viewInverseTransposeMatrixDirty=!1;return this._viewInverseTransposeMatrix}},{key:"perRenderPixelRatio",get:function(){return Math.tan(this.fovX/2)/(this.width/2)}},{key:"perScreenPixelRatio",get:function(){return this.perRenderPixelRatio*this.pixelRatio}},{key:"aboveGround",get:function(){return this.relativeElevation&&0<=this.relativeElevation}}]);return n}();const J=F.create(),c=f.create(),k=w.create(),C=w.create(),D=m.createRenderScreenPointArray3();b.PaddingSide=void 0;(function(n){n[n.TOP=
0]="TOP";n[n.RIGHT=1]="RIGHT";n[n.BOTTOM=2]="BOTTOM";n[n.LEFT=3]="LEFT"})(b.PaddingSide||(b.PaddingSide={}));b.default=q;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/geometry/support/frustum":function(){define("exports ../../core/ObjectStack ../../chunks/mat4 ../../chunks/vec3 ../../chunks/vec3f64 ../../chunks/vec4 ../../chunks/vec4f64 ./clipRay ./plane ./vectorStacks".split(" "),function(b,a,q,p,g,m,d,f,l,t){function y(){return[g.create(),g.create(),g.create(),g.create(),g.create(),
g.create(),g.create(),g.create()]}function w(I,B){l.fromPoints(B[b.PointIndex.FAR_BOTTOM_LEFT],B[b.PointIndex.NEAR_BOTTOM_LEFT],B[b.PointIndex.NEAR_TOP_LEFT],I[b.PlaneIndex.LEFT]);l.fromPoints(B[b.PointIndex.NEAR_BOTTOM_RIGHT],B[b.PointIndex.FAR_BOTTOM_RIGHT],B[b.PointIndex.FAR_TOP_RIGHT],I[b.PlaneIndex.RIGHT]);l.fromPoints(B[b.PointIndex.FAR_BOTTOM_LEFT],B[b.PointIndex.FAR_BOTTOM_RIGHT],B[b.PointIndex.NEAR_BOTTOM_RIGHT],I[b.PlaneIndex.BOTTOM]);l.fromPoints(B[b.PointIndex.NEAR_TOP_LEFT],B[b.PointIndex.NEAR_TOP_RIGHT],
B[b.PointIndex.FAR_TOP_RIGHT],I[b.PlaneIndex.TOP]);l.fromPoints(B[b.PointIndex.NEAR_BOTTOM_LEFT],B[b.PointIndex.NEAR_BOTTOM_RIGHT],B[b.PointIndex.NEAR_TOP_RIGHT],I[b.PlaneIndex.NEAR]);l.fromPoints(B[b.PointIndex.FAR_BOTTOM_RIGHT],B[b.PointIndex.FAR_BOTTOM_LEFT],B[b.PointIndex.FAR_TOP_LEFT],I[b.PlaneIndex.FAR])}function v(I,B){for(let K=0;K<b.NumPlanes.NUM;K++)if(!l.clip(I[K],B))return!1;return!0}b.PlaneIndex=void 0;(function(I){I[I.LEFT=0]="LEFT";I[I.RIGHT=1]="RIGHT";I[I.BOTTOM=2]="BOTTOM";I[I.TOP=
3]="TOP";I[I.NEAR=4]="NEAR";I[I.FAR=5]="FAR"})(b.PlaneIndex||(b.PlaneIndex={}));b.PointIndex=void 0;(function(I){I[I.NEAR_BOTTOM_LEFT=0]="NEAR_BOTTOM_LEFT";I[I.NEAR_BOTTOM_RIGHT=1]="NEAR_BOTTOM_RIGHT";I[I.NEAR_TOP_RIGHT=2]="NEAR_TOP_RIGHT";I[I.NEAR_TOP_LEFT=3]="NEAR_TOP_LEFT";I[I.FAR_BOTTOM_LEFT=4]="FAR_BOTTOM_LEFT";I[I.FAR_BOTTOM_RIGHT=5]="FAR_BOTTOM_RIGHT";I[I.FAR_TOP_RIGHT=6]="FAR_TOP_RIGHT";I[I.FAR_TOP_LEFT=7]="FAR_TOP_LEFT"})(b.PointIndex||(b.PointIndex={}));const F={bottom:[b.PointIndex.FAR_BOTTOM_RIGHT,
b.PointIndex.NEAR_BOTTOM_RIGHT,b.PointIndex.NEAR_BOTTOM_LEFT,b.PointIndex.FAR_BOTTOM_LEFT],near:[b.PointIndex.NEAR_BOTTOM_LEFT,b.PointIndex.NEAR_BOTTOM_RIGHT,b.PointIndex.NEAR_TOP_RIGHT,b.PointIndex.NEAR_TOP_LEFT],far:[b.PointIndex.FAR_BOTTOM_RIGHT,b.PointIndex.FAR_BOTTOM_LEFT,b.PointIndex.FAR_TOP_LEFT,b.PointIndex.FAR_TOP_RIGHT],right:[b.PointIndex.NEAR_BOTTOM_RIGHT,b.PointIndex.FAR_BOTTOM_RIGHT,b.PointIndex.FAR_TOP_RIGHT,b.PointIndex.NEAR_TOP_RIGHT],left:[b.PointIndex.FAR_BOTTOM_LEFT,b.PointIndex.NEAR_BOTTOM_LEFT,
b.PointIndex.NEAR_TOP_LEFT,b.PointIndex.FAR_TOP_LEFT],top:[b.PointIndex.FAR_TOP_LEFT,b.PointIndex.NEAR_TOP_LEFT,b.PointIndex.NEAR_TOP_RIGHT,b.PointIndex.FAR_TOP_RIGHT]};b.NumPlanes=void 0;(function(I){I[I.NUM=6]="NUM"})(b.NumPlanes||(b.NumPlanes={}));b.NumPoints=void 0;(function(I){I[I.NUM=8]="NUM"})(b.NumPoints||(b.NumPoints={}));const x=[d.fromValues(-1,-1,-1,1),d.fromValues(1,-1,-1,1),d.fromValues(1,1,-1,1),d.fromValues(-1,1,-1,1),d.fromValues(-1,-1,1,1),d.fromValues(1,-1,1,1),d.fromValues(1,1,
1,1),d.fromValues(-1,1,1,1)],u=new a.ObjectStack(f.create),H=y();b.computePlanes=w;b.copy=function(I,B){for(let K=0;K<b.NumPlanes.NUM;K++)l.copy(I[K],B[K])};b.create=function(I){return I?[l.create(I[0]),l.create(I[1]),l.create(I[2]),l.create(I[3]),l.create(I[4]),l.create(I[5])]:[l.create(),l.create(),l.create(),l.create(),l.create(),l.create()]};b.createPoints=y;b.fromMatrix=function(I,B,K,J=H){I=q.multiply(t.sm4d.get(),B,I);q.invert(I,I);for(B=0;B<b.NumPoints.NUM;++B){const c=m.transformMat4(t.sv4d.get(),
x[B],I);p.set(J[B],c[0]/c[3],c[1]/c[3],c[2]/c[3])}w(K,J)};b.intersectClipRay=function(I,B){for(let K=0;K<b.NumPlanes.NUM;K++)if(!l.clipInfinite(I[K],B))return!1;return!0};b.intersectsAABB=function(I,B){for(let K=0;K<b.NumPlanes.NUM;K++)if(l.isAABBFullyInside(I[K],B))return!1;return!0};b.intersectsLineSegment=function(I,B,K){return v(I,f.fromLineSegmentAndDirection(B,K,u.get()))};b.intersectsPoint=function(I,B){for(let K=0;K<b.NumPlanes.NUM;K++)if(0<l.signedDistance(I[K],B))return!1;return!0};b.intersectsRay=
function(I,B){return v(I,f.fromRay(B,u.get()))};b.intersectsSphere=function(I,B){for(let K=0;K<b.NumPlanes.NUM;K++){const J=I[K];if(J[0]*B[0]+J[1]*B[1]+J[2]*B[2]+J[3]>=B[3])return!1}return!0};b.planePointIndices=F;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/core/ObjectStack":function(){define(["exports","./nextTick"],function(b,a){let q=function(){function p(m){this.allocator=m;this._items=[];this._itemsPtr=0;this._grow()}var g=p.prototype;g.get=function(){0===this._itemsPtr&&a.nextTick(()=>
this._reset());this._itemsPtr===this._items.length&&this._grow();return this._items[this._itemsPtr++]};g._reset=function(){this._items.length=Math.min(Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3072),this._items.length);this._itemsPtr=0};g._grow=function(){for(let m=0;m<Math.max(8,Math.min(this._items.length,1024));m++)this._items.push(this.allocator())};return p}();b.ObjectStack=q;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/geometry/support/clipRay":function(){define(["exports",
"../../core/ObjectStack","../../chunks/vec3","./ray","./vectorStacks"],function(b,a,q,p,g){function m(y){return y?{ray:p.create(y.ray),c0:y.c0,c1:y.c1}:{ray:p.create(),c0:0,c1:Number.MAX_VALUE}}function d(y,w,v,F=m()){p.copy(y,F.ray);F.c0=w;F.c1=v;return F}function f(y,w,v=m()){const F=q.length(y.vector);p.fromValues(y.origin,w,v.ray);v.c0=0;v.c1=F;return v}function l(y,w,v){return q.add(v,y.ray.origin,q.scale(v,y.ray.direction,w))}const t=new a.ObjectStack(()=>({c0:0,c1:0,ray:null}));b.copy=function(y,
w=m()){return d(y.ray,y.c0,y.c1,w)};b.create=m;b.fromLineSegment=function(y,w=m()){const v=q.normalize(g.sv3d.get(),y.vector);return f(y,v,w)};b.fromLineSegmentAndDirection=f;b.fromRay=function(y,w=m()){p.copy(y,w.ray);w.c0=0;w.c1=Number.MAX_VALUE;return w};b.fromValues=d;b.getAt=l;b.getEnd=function(y,w){return l(y,y.c1,w)};b.getStart=function(y,w){return l(y,y.c0,w)};b.wrap=function(y,w,v){const F=t.get();F.ray=y;F.c0=w;F.c1=v;return F};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/geometry/support/ray":function(){define("exports ../../core/arrayUtils ../../core/ObjectStack ../../chunks/vec3 ../../chunks/vec3f64 ./vectorStacks".split(" "),
function(b,a,q,p,g,m){function d(y){return y?{origin:g.clone(y.origin),direction:g.clone(y.direction)}:{origin:g.create(),direction:g.create()}}function f(y,w,v=d()){p.copy(v.origin,y);p.copy(v.direction,w);return v}function l(y,w){y=p.cross(m.sv3d.get(),p.normalize(m.sv3d.get(),y.direction),p.subtract(m.sv3d.get(),w,y.origin));return p.dot(y,y)}const t=new q.ObjectStack(function(){return{origin:null,direction:null}});b.closestPoint=function(y,w,v){w=p.dot(y.direction,p.subtract(v,w,y.origin));p.add(v,
y.origin,p.scale(v,y.direction,w));return v};b.copy=function(y,w=d()){return f(y.origin,y.direction,w)};b.create=d;b.distance=function(y,w){return Math.sqrt(l(y,w))};b.distance2=l;b.equals=function(y,w){return a.equals(y.origin,w.origin)&&a.equals(y.direction,w.direction)};b.fromPoints=function(y,w,v=d()){p.copy(v.origin,y);p.subtract(v.direction,w,y);return v};b.fromValues=f;b.wrap=function(y,w){const v=t.get();v.origin=y;v.direction=w;return v};Object.defineProperty(b,"__esModule",{value:!0})})},
"esri/geometry/support/vectorStacks":function(){define(["exports","../../core/VectorStack"],function(b,a){const q=a.VectorStack.createVec2f64(),p=a.VectorStack.createVec3f64(),g=a.VectorStack.createVec4f64(),m=a.VectorStack.createMat3f64(),d=a.VectorStack.createMat4f64();a=a.VectorStack.createQuatf64();b.sm3d=m;b.sm4d=d;b.sq4d=a;b.sv2d=q;b.sv3d=p;b.sv4d=g;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/core/VectorStack":function(){define("exports ../chunks/_rollupPluginBabelHelpers ./byteSizeEstimations ./nextTick ../chunks/mat3f64 ../chunks/mat4f64 ../chunks/quatf64 ../chunks/vec2f64 ../chunks/vec3f64 ../chunks/vec4f64".split(" "),
function(b,a,q,p,g,m,d,f,l,t){let y=function(){function v(x,u,H){this.itemByteSize=x;this.itemCreate=u;this._buffers=[];this._items=[];this._itemsPtr=0;this._itemsPerBuffer=Math.ceil(H/this.itemByteSize)}var F=v.prototype;F.get=function(){0===this._itemsPtr&&p.nextTick(()=>this._reset());const x=Math.floor(this._itemsPtr/this._itemsPerBuffer);for(;this._buffers.length<=x;){const u=new ArrayBuffer(this._itemsPerBuffer*this.itemByteSize);for(let H=0;H<this._itemsPerBuffer;++H)this._items.push(this.itemCreate(u,
H*this.itemByteSize));this._buffers.push(u)}return this._items[this._itemsPtr++]};F._reset=function(){const x=2*(Math.floor(this._itemsPtr/this._itemsPerBuffer)+1);for(;this._buffers.length>x;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0};v.createVec2f64=function(x=w){return new v(16,f.createView,x)};v.createVec3f64=function(x=w){return new v(24,l.createView,x)};v.createVec4f64=function(x=w){return new v(32,t.createView,x)};v.createMat3f64=function(x=
w){return new v(72,g.createView,x)};v.createMat4f64=function(x=w){return new v(128,m.createView,x)};v.createQuatf64=function(x=w){return new v(32,d.createView,x)};a._createClass(v,[{key:"test",get:function(){return{size:this._buffers.length*this._itemsPerBuffer*this.itemByteSize}}}]);return v}();const w=4*q.ByteSizeUnit.KILOBYTES;b.VectorStack=y;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/chunks/mat3f64":function(){define(["exports"],function(b){function a(){return[1,0,0,0,1,0,0,0,1]}
function q(d){return[d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8]]}function p(d,f,l,t,y,w,v,F,x){return[d,f,l,t,y,w,v,F,x]}function g(d,f){return new Float64Array(d,f,9)}const m=Object.freeze({__proto__:null,create:a,clone:q,fromValues:p,createView:g});b.clone=q;b.create=a;b.createView=g;b.fromValues=p;b.mat3f64=m})},"esri/chunks/quatf64":function(){define(["exports"],function(b){function a(){return[0,0,0,1]}function q(f){return[f[0],f[1],f[2],f[3]]}function p(f,l,t,y){return[f,l,t,y]}function g(f,
l){return new Float64Array(f,l,4)}const m=a(),d=Object.freeze({__proto__:null,create:a,clone:q,fromValues:p,createView:g,IDENTITY:m});b.IDENTITY=m;b.clone=q;b.create=a;b.createView=g;b.fromValues=p;b.quatf64=d})},"esri/geometry/support/plane":function(){define("exports ../../core/mathUtils ../../core/maybe ../../chunks/vec3 ../../chunks/vec3f64 ../../chunks/sphere ./vectorStacks".split(" "),function(b,a,q,p,g,m,d){function f(n=c){return[n[0],n[1],n[2],n[3]]}function l(n,z){return t(z[0],z[1],z[2],
z[3],n)}function t(n,z,h,L,M=f()){M[0]=n;M[1]=z;M[2]=h;M[3]=L;return M}function y(n,z,h){var L=z[0]*z[0]+z[1]*z[1]+z[2]*z[2];L=1E-5<Math.abs(L-1)&&1E-12<L?1/Math.sqrt(L):1;h[0]=z[0]*L;h[1]=z[1]*L;h[2]=z[2]*L;h[3]=-(h[0]*n[0]+h[1]*n[1]+h[2]*n[2]);return h}function w(n,z,h,L=f()){var M=h[0]-z[0],P=h[1]-z[1],S=h[2]-z[2];h=n[0]-z[0];const O=n[1]-z[1],T=n[2]-z[2];z=P*T-S*O;S=S*h-M*T;M=M*O-P*h;P=z*z+S*S+M*M;P=1E-5<Math.abs(P-1)&&1E-12<P?1/Math.sqrt(P):1;L[0]=z*P;L[1]=S*P;L[2]=M*P;L[3]=-(L[0]*n[0]+L[1]*
n[1]+L[2]*n[2])}function v(n,z,h,L,M){if(3>n.count)return!1;n.getVec(h,H);let P=L,S=!1;for(;P<n.count-1&&!S;)n.getVec(P,I),P++,S=!p.exactEquals(H,I);if(!S)return!1;P=Math.max(P,M);for(S=!1;P<n.count&&!S;)n.getVec(P,B),P++,p.subtract(K,H,I),p.normalize(K,K),p.subtract(J,I,B),p.normalize(J,J),S=!p.exactEquals(H,B)&&!p.exactEquals(I,B)&&.99619469809>Math.abs(p.dot(K,J));if(!S)return 0===h&&1===L&&2===M?!1:v(n,z,0,1,2);w(H,I,B,z);return!0}function F(n,z,h){n=p.scale(d.sv3d.get(),n,p.dot(n,z));p.subtract(h,
z,n);return h}function x(n,z){return p.dot(n,z)+n[3]}function u(n,z,h,L,M){const P=p.dot(n,h);if(0===P)return!1;n=-(p.dot(n,z)+n[3])/P;L&k.CLAMP&&(n=a.clamp(n,0,1));if(!(L&k.INFINITE_MIN)&&0>n||!(L&k.INFINITE_MAX)&&1<n)return!1;p.add(M,z,p.scale(M,h,n));return!0}const H=g.create(),I=g.create(),B=g.create(),K=g.create(),J=g.create(),c=[0,0,1,0];var k;(function(n){n[n.NONE=0]="NONE";n[n.CLAMP=1]="CLAMP";n[n.INFINITE_MIN=4]="INFINITE_MIN";n[n.INFINITE_MAX=8]="INFINITE_MAX"})(k||(k={}));const C=k.INFINITE_MIN|
k.INFINITE_MAX,D=k.INFINITE_MAX;b.UP=c;b.clip=function(n,z){const h=p.dot(n,z.ray.direction);n=-x(n,z.ray.origin);if(0>n&&0<=h)return!1;if(-1E-6<h&&1E-6>h)return 0<n;if((0>n||0>h)&&!(0>n&&0>h))return!0;n/=h;0<h?n<z.c1&&(z.c1=n):n>z.c0&&(z.c0=n);return z.c0<=z.c1};b.clipInfinite=function(n,z){const h=p.dot(n,z.ray.direction);n=-x(n,z.ray.origin);if(-1E-6<h&&1E-6>h)return 0<n;n/=h;0<h?n<z.c1&&(z.c1=n):n>z.c0&&(z.c0=n);return z.c0<=z.c1};b.copy=l;b.create=f;b.distance=function(n,z){return Math.abs(x(n,
z))};b.fromManyPoints=function(n,z){return v(n,z,0,1,2)};b.fromManyPointsSampleAt=v;b.fromNormalAndOffset=function(n,z,h){p.copy(h,n);h[3]=z;return h};b.fromPoints=w;b.fromPositionAndNormal=y;b.fromValues=t;b.fromVectorsAndPoint=function(n,z,h,L){p.cross(B,z,n);return y(h,B,L)};b.intersectLine=function(n,z,h,L){h=p.subtract(d.sv3d.get(),h,z);return u(n,z,h,C,L)};b.intersectLineSegment=function(n,z,h){return u(n,z.origin,z.vector,k.NONE,h)};b.intersectLineSegmentClamp=function(n,z,h){return u(n,z.origin,
z.vector,k.CLAMP,h)};b.intersectRay=function(n,z,h){return q.isSome(z)?u(n,z.origin,z.direction,D,h):!1};b.isAABBFullyInside=function(n,z){const h=z[0],L=z[1],M=z[2],P=z[3],S=z[4];z=z[5];return 0<=n[0]*(0<n[0]?h:P)+n[1]*(0<n[1]?L:S)+n[2]*(0<n[2]?M:z)+n[3]};b.isPointInside=function(n,z){return 0<=x(n,z)};b.isPointOutside=function(n,z){return 0>x(n,z)};b.isSphereFullyInside=function(n,z){return 0<=x(n,m.getCenter(z))-z[3]};b.isSphereFullyOutside=function(n,z){return 0>x(n,m.getCenter(z))+z[3]};b.negate=
function(n,z){z[0]=-n[0];z[1]=-n[1];z[2]=-n[2];z[3]=-n[3];return z};b.normal=function(n){return n};b.projectPoint=function(n,z,h){const L=p.scale(d.sv3d.get(),n,-n[3]);z=p.subtract(d.sv3d.get(),z,L);n=F(n,z,d.sv3d.get());p.add(h,n,L);return h};b.projectVector=F;b.setOffsetFromPoint=function(n,z,h){z!==n&&l(n,z);n[3]=-p.dot(n,h);return n};b.signedDistance=x;b.wrap=function(n,z,h,L){return t(n,z,h,L,d.sv4d.get())};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/chunks/sphere":function(){define("exports ../core/has ../core/Logger ../core/mathUtils ../core/maybe ./mat4 ./vec3 ./vec3f64 ./vec4 ./vec4f64 ../geometry/support/Axis ../geometry/support/ray ../geometry/support/vector ../geometry/support/vectorStacks".split(" "),
function(b,a,q,p,g,m,d,f,l,t,y,w,v,F){function x(){return t.create()}function u(E,N=x()){return l.copy(N,E)}function H(E,N){return t.fromValues(E[0],E[1],E[2],N)}function I(E){return E}function B(E){E[0]=E[1]=E[2]=E[3]=0}function K(E){return E}function J(E){return Array.isArray(E)?E[3]:E}function c(E){return Array.isArray(E)?E:r}function k(E,N,Q,Z){return t.fromValues(E,N,Q,Z)}function C(E,N,Q){E!==Q&&d.copy(Q,E);Q[3]=E[3]+N;return Q}function D(E,N,Q){U.error("sphere.setExtent is not yet supported");
return E===Q?Q:u(E,Q)}function n(E,N,Q){if(g.isNone(N))return!1;const {origin:Z,direction:ba}=N;var aa=G;aa[0]=Z[0]-E[0];aa[1]=Z[1]-E[1];aa[2]=Z[2]-E[2];N=ba[0]*ba[0]+ba[1]*ba[1]+ba[2]*ba[2];const da=2*(ba[0]*aa[0]+ba[1]*aa[1]+ba[2]*aa[2]);E=da*da-4*N*(aa[0]*aa[0]+aa[1]*aa[1]+aa[2]*aa[2]-E[3]*E[3]);if(0>E)return!1;aa=Math.sqrt(E);E=(-da-aa)/(2*N);N=(-da+aa)/(2*N);if(0>E||N<E&&0<N)E=N;if(0>E)return!1;Q&&(Q[0]=Z[0]+ba[0]*E,Q[1]=Z[1]+ba[1]*E,Q[2]=Z[2]+ba[2]*E);return!0}function z(E,N){return n(E,N,null)}
function h(E,N,Q){if(n(E,N,Q))return Q;E=L(E,N,F.sv3d.get());d.add(Q,N.origin,d.scale(F.sv3d.get(),N.direction,d.distance(N.origin,E)/d.length(N.direction)));return Q}function L(E,N,Q){const Z=F.sv3d.get(),ba=F.sm4d.get();d.cross(Z,N.origin,N.direction);const aa=J(E);d.cross(Q,Z,N.origin);d.scale(Q,Q,1/d.length(Q)*aa);E=O(E,N.origin);N=v.angle(N.origin,Q);m.fromRotation(ba,N+E,Z);d.transformMat4(Q,Q,ba);return Q}function M(E,N,Q){if(n(E,N,Q))return Q;w.closestPoint(N,c(E),Q);return P(E,Q,Q)}function P(E,
N,Q){N=d.subtract(F.sv3d.get(),N,c(E));N=d.scale(F.sv3d.get(),N,E[3]/d.length(N));return d.add(Q,N,c(E))}function S(E,N){N=d.subtract(F.sv3d.get(),N,c(E));N=d.squaredLength(N);return Math.sqrt(Math.abs(N-E[3]*E[3]))}function O(E,N){N=d.subtract(F.sv3d.get(),N,c(E));N=d.length(N);E=J(E);return p.acosClamped(E/(E+Math.abs(E-N)))}function T(E,N,Q,Z){E=d.subtract(A,N,c(E));switch(Q){case y.Axis.X:return Q=p.cartesianToSpherical(E,A)[2],d.set(Z,-Math.sin(Q),Math.cos(Q),0);case y.Axis.Y:return E=p.cartesianToSpherical(E,
A),Q=E[1],E=E[2],N=Math.sin(Q),d.set(Z,-N*Math.cos(E),-N*Math.sin(E),Math.cos(Q));case y.Axis.Z:return d.normalize(Z,E)}}function W(E,N){N=d.subtract(e,N,c(E));return d.length(N)-E[3]}function V(E,N,Q,Z){const ba=W(E,N);E=T(E,N,y.Axis.Z,e);Q=d.scale(e,E,Q-ba);return d.add(Z,N,Q)}const U=q.getLogger("esri.geometry.support.sphere"),G=f.create(),A=f.create(),r=f.create(),e=f.create();a=Object.freeze({__proto__:null,create:x,copy:u,fromCenterAndRadius:H,wrap:I,clear:B,fromRadius:K,getRadius:J,getCenter:c,
fromValues:k,elevate:C,setExtent:D,intersectRay:n,intersectsRay:z,intersectRayClosestSilhouette:h,closestPointOnSilhouette:L,closestPoint:M,projectPoint:P,distanceToSilhouette:S,angleToSilhouette:O,axisAt:T,altitudeAt:W,setAltitudeAt:V});b.altitudeAt=W;b.angleToSilhouette=O;b.axisAt=T;b.clear=B;b.closestPoint=M;b.closestPointOnSilhouette=L;b.copy=u;b.create=x;b.distanceToSilhouette=S;b.elevate=C;b.fromCenterAndRadius=H;b.fromRadius=K;b.fromValues=k;b.getCenter=c;b.getRadius=J;b.intersectRay=n;b.intersectRayClosestSilhouette=
h;b.intersectsRay=z;b.projectPoint=P;b.setAltitudeAt=V;b.setExtent=D;b.sphere=a;b.wrap=I})},"esri/geometry/support/Axis":function(){define(["exports"],function(b){b.Axis=void 0;var a=b.Axis||(b.Axis={});a[a.X=0]="X";a[a.Y=1]="Y";a[a.Z=2]="Z";Object.defineProperty(b,"__esModule",{value:!0})})},"esri/geometry/support/vector":function(){define(["exports","../../core/mathUtils","../../chunks/vec3","../../chunks/vec3f64"],function(b,a,q,p){const g=p.create(),m=p.create();b.angle=function(d,f){d=q.dot(d,
f)/(q.length(d)*q.length(f));return-a.acosClamped(d)};b.angleAroundAxis=function(d,f,l){q.normalize(g,d);q.normalize(m,f);d=q.dot(g,m);d=a.acosClamped(d);f=q.cross(g,g,m);return 0>q.dot(f,l)?2*Math.PI-d:d};b.projectPoint=function(d,f,l){f=q.dot(d,f)/q.dot(d,d);return q.scale(l,d,f)};b.projectPointSignedLength=function(d,f){return q.dot(d,f)/q.length(d)};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/RenderPass":function(){define(["exports"],function(b){b.RenderPass=
void 0;var a=b.RenderPass||(b.RenderPass={});a[a.MATERIAL=0]="MATERIAL";a[a.MATERIAL_ALPHA=1]="MATERIAL_ALPHA";a[a.MATERIAL_DEPTH=2]="MATERIAL_DEPTH";a[a.MATERIAL_NORMAL=3]="MATERIAL_NORMAL";a[a.MATERIAL_DEPTH_SHADOWMAP_ALL=4]="MATERIAL_DEPTH_SHADOWMAP_ALL";a[a.MATERIAL_HIGHLIGHT=5]="MATERIAL_HIGHLIGHT";a[a.MATERIAL_DEPTH_SHADOWMAP_DEFAULT=6]="MATERIAL_DEPTH_SHADOWMAP_DEFAULT";a[a.MATERIAL_DEPTH_SHADOWMAP_HIGHLIGHT=7]="MATERIAL_DEPTH_SHADOWMAP_HIGHLIGHT";a[a.MAX_PASS=8]="MAX_PASS";Object.defineProperty(b,
"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/RenderSlot":function(){define(["exports"],function(b){b.RenderSlot=void 0;var a=b.RenderSlot||(b.RenderSlot={});a[a.INTEGRATED_MESH=0]="INTEGRATED_MESH";a[a.OPAQUE_TERRAIN=1]="OPAQUE_TERRAIN";a[a.OPAQUE_MATERIAL=2]="OPAQUE_MATERIAL";a[a.OPAQUE_PLUGIN=3]="OPAQUE_PLUGIN";a[a.TRANSPARENT_MATERIAL=4]="TRANSPARENT_MATERIAL";a[a.TRANSPARENT_PLUGIN=5]="TRANSPARENT_PLUGIN";a[a.TRANSPARENT_TERRAIN=6]="TRANSPARENT_TERRAIN";a[a.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL=
7]="TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL";a[a.OCCLUDED_TERRAIN=8]="OCCLUDED_TERRAIN";a[a.OCCLUDER_MATERIAL=9]="OCCLUDER_MATERIAL";a[a.TRANSPARENT_OCCLUDER_MATERIAL=10]="TRANSPARENT_OCCLUDER_MATERIAL";a[a.OCCLUSION_PIXELS=11]="OCCLUSION_PIXELS";a[a.POSTPROCESSING_ENVIRONMENT_OPAQUE=12]="POSTPROCESSING_ENVIRONMENT_OPAQUE";a[a.POSTPROCESSING_ENVIRONMENT_TRANSPARENT=13]="POSTPROCESSING_ENVIRONMENT_TRANSPARENT";a[a.LASERLINES=14]="LASERLINES";a[a.LASERLINES_CONTRAST_CONTROL=15]="LASERLINES_CONTRAST_CONTROL";
a[a.HUD_MATERIAL=16]="HUD_MATERIAL";a[a.LABEL_MATERIAL=17]="LABEL_MATERIAL";a[a.LINE_CALLOUTS=18]="LINE_CALLOUTS";a[a.LINE_CALLOUTS_HUD_DEPTH=19]="LINE_CALLOUTS_HUD_DEPTH";a[a.DRAPED_MATERIAL=20]="DRAPED_MATERIAL";a[a.DRAPED_WATER=21]="DRAPED_WATER";a[a.VOXEL=22]="VOXEL";a[a.MAX_SLOTS=23]="MAX_SLOTS";Object.defineProperty(b,"__esModule",{value:!0})})},"esri/layers/GraphicsLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../core/support/OwningCollection ./Layer ./mixins/BlendLayer ./mixins/ScaleRangeLayer ../support/GraphicsCollection ../symbols/support/ElevationInfo".split(" "),
function(b,a,q,p,g,m,d,f,l,t,y,w,v){p=function(F){function x(H){H=F.call(this,H)||this;H.elevationInfo=null;H.graphics=new w.GraphicsCollection;H.screenSizePerspectiveEnabled=!0;H.type="graphics";H.internal=!1;return H}b._inheritsLoose(x,F);var u=x.prototype;u.destroy=function(){this.removeAll();this.graphics.destroy()};u.add=function(H){this.graphics.add(H);return this};u.addMany=function(H){this.graphics.addMany(H);return this};u.removeAll=function(){this.graphics.removeAll();return this};u.remove=
function(H){this.graphics.remove(H)};u.removeMany=function(H){this.graphics.removeMany(H)};u.on=function(H,I){return F.prototype.on.call(this,H,I)};u.graphicChanged=function(H){this.emit("graphic-update",H)};return x}(t.BlendLayer(y.ScaleRangeLayer(l)));a.__decorate([q.property({type:v})],p.prototype,"elevationInfo",void 0);a.__decorate([q.property(f.owningCollectionProperty(w.GraphicsCollection,"graphics"))],p.prototype,"graphics",void 0);a.__decorate([q.property({type:["show","hide"]})],p.prototype,
"listMode",void 0);a.__decorate([q.property()],p.prototype,"screenSizePerspectiveEnabled",void 0);a.__decorate([q.property({readOnly:!0})],p.prototype,"type",void 0);a.__decorate([q.property({constructOnly:!0})],p.prototype,"internal",void 0);return p=a.__decorate([d.subclass("esri.layers.GraphicsLayer")],p)})},"fx3d/views/3d/effects/Effect":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare esri/core/Evented esri/geometry/support/webMercatorUtils esri/geometry/Extent esri/core/libs/gl-matrix-2/vec3f64 esri/core/libs/gl-matrix-2/vec2f64 esri/core/libs/gl-matrix-2/vec2 esri/views/3d/webgl-engine/lib/GridLocalOriginFactory esri/geometry/projection ../webgl-engine-extensions/GLVerTexture ../support/fx3dUtils".split(" "),
function(b,a,q,p,g,m,d,f,l,t,y,w,v){var F,x,u,H,I,B=f.vec2f64;l=l.vec2;d=d.vec3f64;var K=(d.create(),d.create()),J={};q=q([p],{declaredClass:"esri.views.3d.effects.Effect",effectName:"Effect",constructor:function(c){this._view=c.view;this._layerView=c.layerView;this._renderCoordsHelper=c.view.renderCoordsHelper;this._renderSpatialReference=c.view.renderSpatialReference;this._layer=c.layer;this._wgs84SpatialReference=this._layerView._fx3dSpatialReference;this._stateStack=[];this._currentVizPage=0;
this._preVizId=-1;this._repeatCount=0;this._hasSentReady=this._isReachedRepeatLimit=!1;this._vizFieldDefault="default";this._vizFields=c.layer.vizFields;this._vizFieldMinMaxs={};this._vizFieldMinMaxs[this._vizFieldDefault]={min:0,max:0,maxFeature:null};a.forEach(this._vizFields,function(k){this._vizFieldMinMaxs[k]={min:null,max:null,maxFeature:null}}.bind(this));this._eventHandlers=[];this._vizFieldVerTextureSize=B.create();this._vizFieldVerTextures={};this._allLoaded=this._needsAllLoaded=!1;this._material=
this._shaderSnippets=this._gl=null;this._addedGraphicsCount=this._toAddGraphicsIndex=0;this._addedGraphics=[];this._resetState();this._resetTime();this._pause=!1;this._eventHandlers.push(this._layer.watch("pauseTag",function(k,C,D){this.ready&&(this._pause=k,k?k&&(this._pausedTime=this.time):this._lastTime=performance.now())}.bind(this)));this._spin=!1;this._eventHandlers.push(this._layer.watch("spinTag",function(k,C,D){return k&&"local"==this._view.viewingMode?(console.warn("Spinning operation is not supported in local scene."),
void(this._layer.spinTag=!1)):(this._interactionHandlers||(this._interactionHandlers=[],this._stopPropagation=function(n){n["native"].preventDefault();n.stopPropagation()}),1==k?(this._interactionHandlers.push(this._view.on("mouse-wheel",this._stopPropagation)),this._interactionHandlers.push(this._view.on("click",this._stopPropagation)),this._interactionHandlers.push(this._view.on("double-click",this._stopPropagation)),this._interactionHandlers.push(this._view.on("hold",this._stopPropagation)),this._interactionHandlers.push(this._view.on("drag",
this._stopPropagation)),this._interactionHandlers.push(this._view.on("key-down",this._stopPropagation)),this._interactionHandlers.push(this._view.on("key-up",this._stopPropagation)),this._interactionHandlers.push(this._view.on("pointer-down",this._stopPropagation)),this._interactionHandlers.push(this._view.on("pointer-up",this._stopPropagation)),this._interactionHandlers.push(this._view.on("pointer-move",this._stopPropagation))):this._interactionHandlers instanceof Array&&(this._interactionHandlers.forEach(function(n){n&&
(n.remove(),n=null)}),this._interactionHandlers=[]),void(this._spin=k))}.bind(this)));this._addLayerWatchHandler("visible");this.renderingInfo={visible:!0,repeat:5,transparency:100,animationInterval:5};this.renderMaxCountter=this.renderCountter=this.orderId=0},_addLayerWatchHandler:function(c){b.isString(c)&&this._eventHandlers.push(this._layer.watch(c,function(k,C,D){this.renderingInfo[D]=k;"visible"===c.toLowerCase()&&this.ready&&(k?this._lastTime=performance.now():k||(this._pausedTime=this.time))}.bind(this)))},
_resetState:function(){this._pause=this.ready=!1;this._shapeDirty=this._vacDirty=!0;this._isAddingGeometry=!1;this._colorBarDirty=this._colourMapDirty=this._renderingInfoDirty=!0;this._hasSentReady=this._firstAnimatedTo=this._isReachedRepeatLimit=this._shadersReady=!1},_resetTime:function(){this._pausedTime=this.time=this._lastTime=0},_pushState:function(c){for(var k=0;k<this._stateStack.length;k++)if(this._stateStack[k][0]==c[0])return;this._stateStack.push(c)},_restoreState:function(c){for(var k=
0;k<this._stateStack.length;k++)"function"==typeof c[this._stateStack[k][0]]&&c[this._stateStack[k][0]].apply(c,this._stateStack[k][1]instanceof Array?this._stateStack[k][1]:[this._stateStack[k][1]]);this._stateStack=[]},destroy:function(){a.forEach(this._eventHandlers,function(k){"function"==typeof k.remove&&k.remove()||"function"==typeof k.destroy&&k.destroy()});this._eventHandlers=[];this._interactionHandlers instanceof Array&&(a.forEach(this._interactionHandlers,function(k){"function"==typeof k.remove&&
k.remove()||"function"==typeof k.destroy&&k.destroy();k=null}),this._interactionHandlers=[]);this._resetState();this._destroy("_material");var c=Object.getOwnPropertyNames(this._vizFieldVerTextures);a.forEach(c,function(k){this._vizFieldVerTextures[k]instanceof w&&this._vizFieldVerTextures[k].dispose()}.bind(this))},_dispose:function(c){this[c]&&(this[c].dispose(),delete this[c]);this[c]=null},_destroy:function(c){this[c]&&(this[c].destroy(),delete this[c]);this[c]=null},initEffect:function(){this._effectConfig=
v.effectConfig(this.effectName);this._initRenderingInfo(this._effectConfig);var c=this._layer._get("renderingInfo");if(this._layer&&c){var k=Object.getOwnPropertyNames(c),C=Object.getOwnPropertyNames(this.renderingInfo),D=this;a.forEach(k,function(n){C?a.some(C,function(z){if(n.toLowerCase()===z.toLowerCase())return"shapetype"===n.toLowerCase()?D.renderingInfo[z]=c[n].toLowerCase():D.renderingInfo[z]=c[n],!0}):D.renderingInfo[n]=c[n]})}this._renderingInfoChange(this.renderingInfo);this._updateDefaultLabelHeight();
this._eventHandlers.push(this._layer.on("fx3d-add-graphics",function(n){this._needsAllLoaded||this._addGraphicsHandler(n)}.bind(this)));this._eventHandlers.push(this._layer.on("all-features-loaded",function(n){this._needsAllLoaded?(this._addGraphicsHandler(n),this._allLoaded=!0):this._shapeDirty=!0;this._layer.emit("effect-ok-test")}.bind(this)));this._eventHandlers.push(this._layer.on("fx3d-active-viz-field",b.hitch(this,this._activeVizFieldHandler)));this._eventHandlers.push(this._layer.watch("renderingInfo",
this._renderingInfoChange.bind(this)))},_toWGS84Extent:function(c){var k={xmin:c.xmin,ymin:c.ymin,xmax:c.xmax,ymax:c.ymax};return c.spatialReference&&(J.x=c.xmin,J.y=c.ymin,J.z=0,J.spatialReference=c.spatialReference,y.projectPointToVector(J,K,this._wgs84SpatialReference),k.xmin=K[0],k.ymin=K[1],J.x=c.xmax,J.y=c.ymax,y.projectPointToVector(J,K,this._wgs84SpatialReference),k.xmax=K[0],k.ymax=K[1]),k},_calculateExtentCenter:function(c){var k=c.length;if(k){var C,D,n;if("point"==this._layer.geometryType){var z=
C=c[0].geometry.longitude;var h=D=c[0].geometry.latitude;for(n=1;n<k;n++){var L=c[n];null!=L.geometry&&(L.geometry.longitude<z&&(z=L.geometry.longitude),L.geometry.longitude>C&&(C=L.geometry.longitude),L.geometry.latitude<h&&(h=L.geometry.latitude),L.geometry.latitude>D&&(D=L.geometry.latitude))}}else if("polyline"==this._layer.geometryType||"polygon"==this._layer.geometryType){var M=c[0].geometry.extent;z=M.xmin;C=M.xmax;h=M.ymin;D=M.ymax;for(n=1;n<k;n++)L=c[n],null!=L.geometry&&null!=L.geometry.extent&&
(M=L.geometry.extent,M.xmin<z&&(z=M.xmin),M.xmax>C&&(C=M.xmax),M.ymin<h&&(h=M.ymin),M.ymax>D&&(D=M.ymax))}return new m(z,h,C,D,this._wgs84SpatialReference)}return null},_addGraphicsHandler:function(c){b.isArray(c.graphics)&&0<c.graphics.length&&(this._toAddGraphicsIndex=this._addedGraphicsCount,this._addedGraphicsCount+=c.graphics.length,this._needsAllLoaded?this._addedGraphics=c.graphics:this._addedGraphics=this._addedGraphics.concat(c.graphics),this._isAddingGeometry=!0,this._shapeDirty=!0)},_activeVizFieldHandler:function(c){"number"==
typeof c.currentVizPage&&((0>this._currentVizPage||this._currentVizPage>=this._vizFields.length)&&(this._currentVizPage=0),this.ready=!1,this._hasSentReady=!1,this._restoreRenderingInfo(),b.isObject(c.newRenderingInfo)&&b.mixin(this.renderingInfo,c.newRenderingInfo),this._shapeDirty=!1,this._colorBarDirty=!1,this._colourMapDirty=!1,this._renderingInfoChange(this.renderingInfo),this._updateDefaultLabelHeight(),this.update(),this._resetAnimation(),this._currentVizPage=c.currentVizPage,this._updateVizFieldMinMaxToLayer(),
this._layerView._updateSelectedFeatureLabel(),this._emitSyncEvent())},_resetAnimation:function(){this._repeatCount=0;this._preVizId=-1;this._isReachedRepeatLimit=!1;this._resetTime();this._layer.startAnimation()},_resetAddGeometries:function(){this._addedGraphics=[];this._isAddingGeometry=!1},_allGraphics:function(){return this._layerView.getLoadedGraphics()},_renderingInfoChange:function(c,k,C){c!==k&&c&&b.isObject(c)&&this._doRenderingInfoChange(c)},_doRenderingInfoChange:function(c){this._renderingInfoDirty=
!0;for(var k in c)c.hasOwnProperty(k)&&this.renderingInfo.hasOwnProperty(k)&&("visible"===k.toLowerCase()?(this._layer&&(this._layer[k]=c[k]),this.renderingInfo[k]=c[k]):"repeat"!==k.toLowerCase()&&"animationinterval"!==k.toLowerCase()||(this._resetAnimation(),this._clampScope(c,k),this.renderingInfo[k]=c[k]))},_initRenderingInfo:function(c){this._scopes={};c&&b.isObject(c)&&b.isArray(c.renderingInfo)&&a.forEach(c.renderingInfo,function(k){"shapetype"===k.name.toLowerCase()?this.renderingInfo[k.name]=
k.defaultValue.toLowerCase():this.renderingInfo[k.name]=k.defaultValue;b.isArray(k.scope)&&(this._scopes[k.name]=k.scope)}.bind(this))},_restoreRenderingInfo:function(){this.renderingInfo={visible:!0,repeat:5,transparency:100,animationInterval:5};this._initRenderingInfo(this._effectConfig);var c=this._layer._get("renderingInfo");if(this._layer&&c){var k=Object.getOwnPropertyNames(c),C=Object.getOwnPropertyNames(this.renderingInfo),D=this;a.forEach(k,function(n){C?a.some(C,function(z){if(n.toLowerCase()===
z.toLowerCase())return"shapetype"===n.toLowerCase()?D.renderingInfo[z]=c[n].toLowerCase():D.renderingInfo[z]=c[n],!0}):D.renderingInfo[n]=c[n]})}this._updateDefaultLabelHeight()},_clampScope:function(c,k){var C=this._scopes[k];b.isArray(C)&&"number"==typeof c[k]&&"number"==typeof C[0]&&"number"==typeof C[1]&&(c[k]<C[0]?c[k]=C[0]:c[k]>C[1]&&(c[k]=C[1]),0>c[k]&&(c[k]=0))},_updateRenderingInfo:function(){var c=!0;(!this._needsAllLoaded||this._needsAllLoaded&&this._allLoaded)&&0<this._allGraphics().length&&
(this._colorBarDirty?(c=this._initColorBar(),c&&(this._colorBarDirty=!1)):c=!0,this._colourMapDirty&&c?(c=this._initColourMap(),c&&(this._colourMapDirty=!1)):c=!0,c=!(!this._renderingInfoDirty||!c),this._renderingInfoDirty=!c)},_updateRenderingGeometry:function(){var c=!0;(!this._needsAllLoaded||this._needsAllLoaded&&this._allLoaded)&&0<this._allGraphics().length&&(c=this._initRenderContext(),c?(c=this._initVizFieldVertextures(),c&&this._layer.emit("can-locating-now"),this._shapeDirty=!c):(console.error("this._initRenderContext() FALSE"),
this._shapeDirty=!0),!0===this._shapeDirty&&(this._isAddingGeometry=!1))},_emitSyncEvent:function(){this._layer&&0<this._repeatCount&&(0>=this.renderingInfo.repeat||0<this.renderingInfo.repeat&&this._repeatCount<=this.renderingInfo.repeat)&&this._layer.emit("sync-viz-timer",{vizPage:this._currentVizPage,repeat:this._repeatCount})},_calculateRepeatCount:function(){I=Math.floor(this.time/this.renderingInfo.animationInterval);this._preVizId!==I&&(this._repeatCount++,this._preVizId=I,this._emitSyncEvent())},
_updateVizPage:function(){0<this.renderingInfo.repeat?this._repeatCount<=this.renderingInfo.repeat?this._calculateRepeatCount():this._isReachedRepeatLimit||(this._isReachedRepeatLimit=!0,this._layer.pauseAnimation(),this._layer.emit("reached-repeat-limit")):0>this.renderingInfo.repeat?(this._calculateRepeatCount(),this._isReachedRepeatLimit&&(this._isReachedRepeatLimit=!1)):this._isReachedRepeatLimit||(this._isReachedRepeatLimit=!0)},setupEffect:function(c){this._gl=c.gl;this._shaderSnippets=c.shaderSnippets;
this._vaoExt=c.vaoExt;this._shadersReady=this._loadShaders();this._vizFieldVerTextures[this._vizFieldDefault]=new w(this._gl);a.forEach(this._vizFields,function(k){this._vizFieldVerTextures[k]=new w(this._gl)}.bind(this))},update:function(){var c=!1;return this.renderingInfo.visible&&this._shadersReady?(this._renderingInfoDirty&&(this._updateRenderingInfo(),c=!0),this._shapeDirty&&(this._updateRenderingGeometry(),c=!0),this._renderingInfoDirty||this._shapeDirty||!this._shadersReady?this.ready=!1:
this.ready=!0,this._updateSelfTime(),this._updateVizPage(),this._spin&&this._doSpin(),c):c},render:function(c,k){c.time=this.time;c.reachedRepeatLimit=this._isReachedRepeatLimit},_doSpin:function(){F=this._view.camera.position;x=g.webMercatorToGeographic(F);u=x.x-1;-180>=u&&(u=179);H=F.z;8E6>H&&(H=8E6);this._view.goTo({position:[u,0,H],tilt:0,heading:0})},_bindPramsReady:function(){return 0<=this._currentVizPage&&this._currentVizPage<Object.getOwnPropertyNames(this._vizFieldMinMaxs).length&&this._currentVizPage<
Object.getOwnPropertyNames(this._vizFieldVerTextures).length},_updateSelfTime:function(){this.ready&&!this._pause&&(0!==this._lastTime?this.time=this._pausedTime+.001*(performance.now()-this._lastTime):(this._lastTime=performance.now(),this.time=0))},_loadShaders:function(){return!1},_initVertexLayout:function(){return!0},_initRenderContext:function(){return!0},_initVizFieldVertextures:function(){var c=this._allGraphics();if(0<c.length){console.log("_initVizFieldVertextures \x3d\x3d\x3e graphics.length \x3d\x3d\x3e "+
c.length);var k=this._gl.getParameter(3379),C=c.length,D=v.nextHighestPowerOfTwo(C);D>k&&(D=k,console.warn("Too many graphics, and extra features will be discarded."));var n=Math.ceil(C/D);n=v.nextHighestPowerOfTwo(n);n>k&&(n=k,console.warn("Too many graphics, and extra features will be discarded."));this._vizFieldVerTextures[this._vizFieldDefault].initTexture(D,n,new Float32Array(D*n*4));var z,h,L,M;return a.forEach(this._vizFields,function(P){var S=new Float32Array(D*n*4);this._vizFieldVerTextures[P].initTexture(D,
n,S);(h=c[0].attributes[P])||(h=0);(!h||"number"!=typeof h||0>h)&&(h=0);L=M=h;for(var O=c[0],T=0;T<c.length;T++)z=c[T].attributes,h=z[P],(!h||"number"!=typeof h||0>h)&&(h=0),S[4*T]=h,M<h&&(M=h,O=c[T]),L>h&&(L=h);console.log("set his._vizFieldVerTextures "+P);this._vizFieldVerTextures[P].updateTexture(S);this._vizFieldMinMaxs[P].min=L;this._vizFieldMinMaxs[P].max=M;this._vizFieldMinMaxs[P].maxFeature=O;this._updateVizFieldMinMaxToLayer()}.bind(this)),l.set(this._vizFieldVerTextureSize,D,n),!0}return!1},
syncVizFieldVertextures:function(){return 0<this._allGraphics().length&&(this._vizFieldVerTextures[this._vizFieldDefault].syncData(),a.forEach(this._vizFields,function(c){console.log("set his._vizFieldVerTextures "+c);this._vizFieldVerTextures[c].syncData()}.bind(this)),!0)},_updateVizFieldMinMaxToLayer:function(){this._layer._currentVizPage=this._currentVizPage;this._layer._currentVizFieldMinMax=this._vizFieldMinMaxs[this._vizFields[this._currentVizPage]]},_initColourMap:function(){return!0},_initColorBar:function(){return!0},
_updateDefaultLabelHeight:function(){}});return q.createLocalOriginFactory=function(){return new t.GridLocalOriginFactory},q})},"esri/core/libs/gl-matrix-2/vec2f64":function(){define(["exports","../../../chunks/vec2f64"],function(b,a){b.vec2f64=a.vec2f64;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/core/libs/gl-matrix-2/vec2":function(){define(["exports","../../../chunks/vec2"],function(b,a){b.vec2=a.vec2;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/GridLocalOriginFactory":function(){define("exports ../../../../core/maybe ../../../../core/uid ../../../../chunks/mat4f64 ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../geometry/projection ./basicInterfaces ./Geometry ./LocalOriginFactory ./Object3D ./VertexAttribute ./WebGLLayer ../materials/RibbonLineMaterial".split(" "),
function(b,a,q,p,g,m,d,f,l,t,y,w,v,F){function x(B){H=B}let u=function(){function B(J,c=125E4){this._originSR=J;this._gridSize=c;this._origins=new Map;this._objects=new Map;this._rootOriginId="root/"+q.generateUID()}var K=B.prototype;K.getOrigin=function(J){const c=this._origins.get(this._rootOriginId);if(null==c){if(a.isSome(H))return this._origins.set(this._rootOriginId,t.fromValues(H[0],H[1],H[2],this._rootOriginId)),this.getOrigin(J);J=t.fromValues(J[0]+Math.random()-.5,J[1]+Math.random()-.5,
J[2]+Math.random()-.5,this._rootOriginId);this._origins.set(this._rootOriginId,J);return J}var k=this._gridSize;const C=Math.round(J[0]/k),D=Math.round(J[1]/k),n=Math.round(J[2]/k),z=`${C}/${D}/${n}`;let h=this._origins.get(z);const L=.5*k;g.subtract(I,J,c.vec3);I[0]=Math.abs(I[0]);I[1]=Math.abs(I[1]);I[2]=Math.abs(I[2]);if(I[0]<L&&I[1]<L&&I[2]<L)return h&&(k=Math.max(...I),g.subtract(I,J,h.vec3),I[0]=Math.abs(I[0]),I[1]=Math.abs(I[1]),I[2]=Math.abs(I[2]),Math.max(...I)<k)?h:c;h||(h=t.fromValues(C*
k,D*k,n*k,z),this._origins.set(z,h));return h};K._drawOriginBox=function(J,c=[1,1,0,1]){const k=window.view,C=k._stage;var D=c.toString();if(!this._objects.has(D)){this._material=new F.RibbonLineMaterial({width:2,color:c});C.add(this._material);c=new v.WebGLLayer({isPickable:!1});var n=new y.Object3D({castShadow:!1});C.add(n);c.add(n);C.add(c);this._objects.set(D,n)}D=this._objects.get(D);c=[0,1,5,4,0,2,1,7,6,2,0,1,3,7,5,4,6,2,0];n=c.length;const z=Array(3*n),h=new Uint16Array(2*(n-1)),L=.5*this._gridSize;
for(let M=0;M<n;M++)z[3*M]=J[0]+(c[M]&1?L:-L),z[3*M+1]=J[1]+(c[M]&2?L:-L),z[3*M+2]=J[2]+(c[M]&4?L:-L),0<M&&(h[2*M]=M-1,h[2*M+1]=M);d.projectBuffer(z,this._originSR,0,z,k.renderSpatialReference,0,n);J=new l.Geometry([[w.VertexAttribute.POSITION,{size:3,data:z,exclusive:!0}]],[[w.VertexAttribute.POSITION,h]],f.PrimitiveType.Line);C.add(J);D.addGeometry(J,this._material,p.IDENTITY)};return B}(),H=null;const I=m.create();b.GridLocalOriginFactory=u;b.default=x;b.setTestRootOrigin=x;Object.defineProperty(b,
"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/basicInterfaces":function(){define(["exports"],function(b){b.CullFaceOptions=void 0;(function(a){a[a.None=0]="None";a[a.Front=1]="Front";a[a.Back=2]="Back";a[a.COUNT=3]="COUNT"})(b.CullFaceOptions||(b.CullFaceOptions={}));b.DepthTestFunction=void 0;(function(a){a[a.Less=0]="Less";a[a.Lequal=1]="Lequal";a[a.COUNT=2]="COUNT"})(b.DepthTestFunction||(b.DepthTestFunction={}));b.AntiAliasingMode=void 0;(function(a){a[a.NONE=0]="NONE";a[a.SMAA=
1]="SMAA"})(b.AntiAliasingMode||(b.AntiAliasingMode={}));b.TransparencyPassType=void 0;(function(a){a[a.Color=0]="Color";a[a.Alpha=1]="Alpha";a[a.FrontFace=2]="FrontFace";a[a.NONE=3]="NONE";a[a.COUNT=4]="COUNT"})(b.TransparencyPassType||(b.TransparencyPassType={}));b.RenderRequestType=void 0;(function(a){a[a.BACKGROUND=0]="BACKGROUND";a[a.UPDATE=1]="UPDATE"})(b.RenderRequestType||(b.RenderRequestType={}));b.ResourceState=void 0;(function(a){a[a.NOT_LOADED=0]="NOT_LOADED";a[a.LOADING=1]="LOADING";
a[a.LOADED=2]="LOADED"})(b.ResourceState||(b.ResourceState={}));b.StencilBits=void 0;(function(a){a[a.IntegratedMeshMaskExcluded=1]="IntegratedMeshMaskExcluded";a[a.OutlineVisualElementMask=2]="OutlineVisualElementMask"})(b.StencilBits||(b.StencilBits={}));b.UpdatePolicy=void 0;(function(a){a[a.ASYNC=0]="ASYNC";a[a.SYNC=1]="SYNC"})(b.UpdatePolicy||(b.UpdatePolicy={}));b.Object3DState=void 0;(function(a){a[a.Highlight=0]="Highlight";a[a.MaskOccludee=1]="MaskOccludee";a[a.COUNT=2]="COUNT"})(b.Object3DState||
(b.Object3DState={}));b.PrimitiveType=void 0;(function(a){a[a.Triangle=0]="Triangle";a[a.Point=1]="Point";a[a.Line=2]="Line"})(b.PrimitiveType||(b.PrimitiveType={}));b.PowerOfTwoResizeMode=void 0;(function(a){a[a.STRETCH=1]="STRETCH";a[a.PAD=2]="PAD"})(b.PowerOfTwoResizeMode||(b.PowerOfTwoResizeMode={}));b.ValidationState=void 0;(function(a){a[a.CHANGED=0]="CHANGED";a[a.UNCHANGED=1]="UNCHANGED"})(b.ValidationState||(b.ValidationState={}));b.AlphaDiscardMode=void 0;(function(a){a[a.Blend=0]="Blend";
a[a.Opaque=1]="Opaque";a[a.Mask=2]="Mask";a[a.MaskBlend=3]="MaskBlend";a[a.COUNT=4]="COUNT"})(b.AlphaDiscardMode||(b.AlphaDiscardMode={}));b.Decorations=void 0;(function(a){a[a.OFF=0]="OFF";a[a.ON=1]="ON"})(b.Decorations||(b.Decorations={}));Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/Geometry":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ./basicInterfaces ./BoundingInfo ./ContentObject ./ContentObjectType ./geometryDataUtils ./Util ./VertexAttribute".split(" "),
function(b,a,q,p,g,m,d,f,l,t){function y(w){if(w.BYTES_PER_ELEMENT===Uint16Array.BYTES_PER_ELEMENT)return w;for(const v of w)if(65536<=v)return w;return new Uint16Array(w)}m=function(w){function v(x,u=[],H=p.PrimitiveType.Triangle,I=-1){var B=w.call(this)||this;B._primitiveType=H;B.edgeIndicesLength=I;B.type=d.ContentObjectType.Geometry;B._vertexAttributes=new Map;B._indices=new Map;B._boundingInfo=null;for(const [K,J]of x)J&&B._vertexAttributes.set(K,{...J});if(null==u||0===u.length){x=B._vertexAttributes.values().next().value;
x=null==x?0:x.data.length/x.size;u=f.generateDefaultIndexArray(x);B.edgeIndicesLength=0>B.edgeIndicesLength?x:B.edgeIndicesLength;for(const K of B._vertexAttributes.keys())B._indices.set(K,u)}else for(const [K,J]of u)J&&(B._indices.set(K,y(J)),K===t.VertexAttribute.POSITION&&(B.edgeIndicesLength=0>B.edgeIndicesLength?B._indices.get(K).length:B.edgeIndicesLength));return B}a._inheritsLoose(v,w);var F=v.prototype;F.cloneShallow=function(){const x=new v([],void 0,this._primitiveType,void 0),{_vertexAttributes:u,
_indices:H}=x;this._vertexAttributes.forEach((I,B)=>{u.set(B,I)});this._indices.forEach((I,B)=>{H.set(B,I)});x.screenToWorldRatio=this.screenToWorldRatio;x._boundingInfo=this._boundingInfo;return x};F.getMutableAttribute=function(x){(x=this._vertexAttributes.get(x))&&!x.exclusive&&(x.data=Array.from(x.data),x.exclusive=!0);return x};F.computeAttachmentOrigin=function(x){return this.primitiveType===p.PrimitiveType.Triangle?this._computeAttachmentOriginTriangles(x):this._computeAttachmentOriginPoints(x)};
F._computeAttachmentOriginTriangles=function(x){const u=this.indices.get(t.VertexAttribute.POSITION),H=this.vertexAttributes.get(t.VertexAttribute.POSITION);return f.computeAttachmentOriginTriangles(H,u,x)};F._computeAttachmentOriginPoints=function(x){const u=this.indices.get(t.VertexAttribute.POSITION),H=this.vertexAttributes.get(t.VertexAttribute.POSITION);return f.computeAttachmentOriginPoints(H,u,x)};F.invalidateBoundingInfo=function(){this._boundingInfo=null};F._calculateBoundingInfo=function(){const x=
this.indices.get(t.VertexAttribute.POSITION);if(0===x.length)return null;const u=this.primitiveType===p.PrimitiveType.Triangle?3:1;l.assert(0===x.length%u,"Indexing error: "+x.length+" not divisible by "+u);const H=f.generateDefaultIndexArray(x.length/u),I=this.vertexAttributes.get(t.VertexAttribute.POSITION);return new g.BoundingInfo(H,u,x,I)};a._createClass(v,[{key:"vertexAttributes",get:function(){return this._vertexAttributes}},{key:"indices",get:function(){return this._indices}},{key:"indexCount",
get:function(){const x=this._indices.values().next().value;return x?x.length:0}},{key:"primitiveType",get:function(){return this._primitiveType}},{key:"faceCount",get:function(){return this.indexCount/3}},{key:"boundingInfo",get:function(){q.isNone(this._boundingInfo)&&(this._boundingInfo=this._calculateBoundingInfo());return this._boundingInfo}}]);return v}(m.ContentObject);b.Geometry=m;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/BoundingInfo":function(){define(["exports",
"../../../../core/PooledArray","../../../../chunks/vec3","../../../../chunks/vec3f64","./Util"],function(b,a,q,p,g){let m=function(){function f(t,y,w,v){this.primitiveIndices=t;this._numIndexPerPrimitive=y;this.indices=w;this.position=v;this.center=p.create();g.assert(1<=t.length);g.assert(0===w.length%this._numIndexPerPrimitive);g.assert(w.length>=t.length*this._numIndexPerPrimitive);g.assert(3===v.size||4===v.size);const {data:F,size:x}=v;v=t.length;y=x*w[this._numIndexPerPrimitive*t[0]];d.clear();
d.push(y);this.bbMin=p.fromValues(F[y],F[y+1],F[y+2]);this.bbMax=p.clone(this.bbMin);for(var u=0;u<v;++u){var H=this._numIndexPerPrimitive*t[u];for(var I=0;I<this._numIndexPerPrimitive;++I){y=x*w[H+I];d.push(y);let B=F[y];this.bbMin[0]=Math.min(B,this.bbMin[0]);this.bbMax[0]=Math.max(B,this.bbMax[0]);B=F[y+1];this.bbMin[1]=Math.min(B,this.bbMin[1]);this.bbMax[1]=Math.max(B,this.bbMax[1]);B=F[y+2];this.bbMin[2]=Math.min(B,this.bbMin[2]);this.bbMax[2]=Math.max(B,this.bbMax[2])}}q.lerp(this.center,this.bbMin,
this.bbMax,.5);this.radius=.5*Math.max(Math.max(this.bbMax[0]-this.bbMin[0],this.bbMax[1]-this.bbMin[1]),this.bbMax[2]-this.bbMin[2]);t=this.radius*this.radius;for(w=0;w<d.length;++w)y=d.getItemAt(w),v=F[y]-this.center[0],u=F[y+1]-this.center[1],y=F[y+2]-this.center[2],H=v*v+u*u+y*y,H<=t||(H=Math.sqrt(H),I=.5*(H-this.radius),this.radius+=I,t=this.radius*this.radius,H=I/H,this.center[0]+=v*H,this.center[1]+=u*H,this.center[2]+=y*H);d.clear()}var l=f.prototype;l.getCenter=function(){return this.center};
l.getBSRadius=function(){return this.radius};l.getBBMin=function(){return this.bbMin};l.getBBMax=function(){return this.bbMax};l.getChildren=function(){if(this._children)return this._children;if(1<q.squaredDistance(this.bbMin,this.bbMax)){var t=q.lerp(p.create(),this.bbMin,this.bbMax,.5),y=this.primitiveIndices.length;const x=new Uint8Array(y),u=Array(8);for(var w=0;8>w;++w)u[w]=0;const {data:H,size:I}=this.position;for(w=0;w<y;++w){var v=0;const B=this._numIndexPerPrimitive*this.primitiveIndices[w];
var F=I*this.indices[B];let K=H[F],J=H[F+1],c=H[F+2];for(let k=1;k<this._numIndexPerPrimitive;++k){F=I*this.indices[B+k];const C=H[F],D=H[F+1];F=H[F+2];C<K&&(K=C);D<J&&(J=D);F<c&&(c=F)}K<t[0]&&(v|=1);J<t[1]&&(v|=2);c<t[2]&&(v|=4);x[w]=v;++u[v]}t=0;for(w=0;8>w;++w)0<u[w]&&++t;if(2>t)return;t=Array(8);for(w=0;8>w;++w)t[w]=0<u[w]?new Uint32Array(u[w]):void 0;for(w=0;8>w;++w)u[w]=0;for(w=0;w<y;++w)v=x[w],t[v][u[v]++]=this.primitiveIndices[w];this._children=Array(8);for(y=0;8>y;++y)void 0!==t[y]&&(this._children[y]=
new f(t[y],this._numIndexPerPrimitive,this.indices,this.position))}return this._children};f.prune=function(){d.prune()};return f}();const d=new a({deallocator:null});b.BoundingInfo=m;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/ContentObject":function(){define(["exports","../../../../core/uid"],function(b,a){let q=function(){function p(){this.id=a.generateUID()}p.prototype.unload=function(){};return p}();b.ContentObject=q;Object.defineProperty(b,"__esModule",
{value:!0})})},"esri/views/3d/webgl-engine/lib/ContentObjectType":function(){define(["exports"],function(b){b.ContentObjectType=void 0;var a=b.ContentObjectType||(b.ContentObjectType={});a[a.Layer=0]="Layer";a[a.Object=1]="Object";a[a.Geometry=2]="Geometry";a[a.Material=3]="Material";a[a.Texture=4]="Texture";a[a.COUNT=5]="COUNT";Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/geometryDataUtils":function(){define(["exports","../../../../chunks/vec3","../../../../chunks/vec3f64",
"../../../../geometry/support/triangle"],function(b,a,q,p){let g=(()=>{const w=new Uint32Array(131072);for(let v=0;v<w.length;++v)w[v]=v;return w})();const m=new Uint16Array([0]),d=(()=>{const w=new Uint16Array(65536);for(let v=0;v<w.length;++v)w[v]=v;return w})(),f=q.create(),l=q.create(),t=q.create(),y=q.create();b.computeAttachmentOriginLines=function(w,v,F,x){if(!w)return!1;const {size:u,data:H}=w;a.set(x,0,0,0);a.set(y,0,0,0);let I=w=0;const B=v?v.length-1:H.length/u-1;F=B+(F?2:0);for(let c=
0;c<F;c+=2){var K=c<B?c:B,J=c<B?c+1:0;K=(v?v[K]:K)*u;J=(v?v[J]:J)*u;f[0]=H[K+0];f[1]=H[K+1];f[2]=H[K+2];l[0]=H[J+0];l[1]=H[J+1];l[2]=H[J+2];a.scale(f,a.add(f,f,l),.5);J=a.dist(f,l);0<J?(a.add(x,x,a.scale(f,f,J)),w+=J):(a.add(y,y,f),I++)}return 0!==w?(a.scale(x,x,1/w),!0):0!==I?(a.scale(x,y,1/I),!0):!1};b.computeAttachmentOriginPoints=function(w,v,F){if(!w||!v)return!1;const {size:x,data:u}=w;a.set(F,0,0,0);w=-1;let H=0;for(let I=0;I<v.length;I++){const B=v[I]*x;w!==B&&(F[0]+=u[B+0],F[1]+=u[B+1],F[2]+=
u[B+2],H++);w=B}1<H&&a.scale(F,F,1/H);return 0<H};b.computeAttachmentOriginTriangles=function(w,v,F){if(!w)return!1;const {size:x,data:u}=w;a.set(F,0,0,0);a.set(y,0,0,0);let H=w=0;for(let B=0;B<v.length-2;B+=3){var I=v[B+0]*x;const K=v[B+1]*x,J=v[B+2]*x;a.set(f,u[I+0],u[I+1],u[I+2]);a.set(l,u[K+0],u[K+1],u[K+2]);a.set(t,u[J+0],u[J+1],u[J+2]);(I=p.areaPoints3d(f,l,t))?(a.add(f,f,l),a.add(f,f,t),a.scale(f,f,1/3*I),a.add(F,F,f),w+=I):(a.add(y,y,f),a.add(y,y,l),a.add(y,y,t),H+=3)}return 0===H&&0===w?
!1:0!==w?(a.scale(F,F,1/w),!0):0!==H?(a.scale(F,y,1/H),!0):!1};b.generateDefaultIndexArray=function(w){if(1===w)return m;if(w<d.length)return new Uint16Array(d.buffer,0,w);if(w>g.length){g=new Uint32Array(Math.max(2*g.length,w));for(let v=0;v<g.length;v++)g[v]=v}return new Uint32Array(g.buffer,0,w)};b.generateIndexArray=function(w){if(1===w)return new Uint16Array(m);if(w<d.length)return new Uint16Array(d.slice(0,w));if(w>g.length){w=new Uint32Array(w);for(let v=0;v<w.length;v++)w[v]=v;return w}return new Uint32Array(g.slice(0,
w))};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/geometry/support/triangle":function(){define("exports ../../core/ObjectStack ../../chunks/vec2 ../../chunks/vec3 ../../chunks/vec3f64 ./lineSegment ./vectorStacks".split(" "),function(b,a,q,p,g,m,d){function f(x){return x?{p0:g.clone(x.p0),p1:g.clone(x.p1),p2:g.clone(x.p2)}:{p0:g.create(),p1:g.create(),p2:g.create()}}function l(x,u,H,I=f()){p.copy(I.p0,x);p.copy(I.p1,u);p.copy(I.p2,H);return I}function t(x,u,H){var I=q.distance(x,u);u=
q.distance(u,H);x=q.distance(H,x);H=(I+u+x)/2;I=H*(H-I)*(H-u)*(H-x);return 0>=I?0:Math.sqrt(I)}const y=new a.ObjectStack(m.create),w=new a.ObjectStack(()=>({p0:null,p1:null,p2:null})),v=g.create(),F=g.create();b.area2d=function(x){return t(x.p0,x.p1,x.p2)};b.areaPoints2d=t;b.areaPoints3d=function(x,u,H){p.subtract(v,u,x);p.subtract(F,H,x);return p.length(p.cross(v,v,F))/2};b.copy=function(x,u=f()){return l(x.p0,x.p1,x.p2,u)};b.create=f;b.distance2=function(x,u){var H=x.p0,I=x.p1;x=x.p2;const B=p.subtract(d.sv3d.get(),
I,H),K=p.subtract(d.sv3d.get(),x,I),J=p.subtract(d.sv3d.get(),H,x),c=p.subtract(d.sv3d.get(),u,H);var k=p.subtract(d.sv3d.get(),u,I),C=p.subtract(d.sv3d.get(),u,x);const D=p.cross(B,B,J),n=p.dot(p.cross(d.sv3d.get(),B,D),c);k=p.dot(p.cross(d.sv3d.get(),K,D),k);C=p.dot(p.cross(d.sv3d.get(),J,D),C);if(0<n&&0<k&&0<C)return u=p.dot(D,c),u*u/p.dot(D,D);H=m.distance2(m.fromValues(H,B,y.get()),u);I=m.distance2(m.fromValues(I,K,y.get()),u);u=m.distance2(m.fromValues(x,J,y.get()),u);return Math.min(H,I,u)};
b.fromValues=l;b.intersectRay=function(x,u,H){const {direction:I,origin:B}=u,{p0:K,p1:J,p2:c}=x;var k=J[0]-K[0],C=J[1]-K[1],D=J[2]-K[2];x=c[0]-K[0];u=c[1]-K[1];const n=c[2]-K[2];var z=I[1]*n-u*I[2],h=I[2]*x-n*I[0];const L=I[0]*u-x*I[1];var M=k*z+C*h+D*L;if(-1E-5<M&&1E-5>M)return!1;M=1/M;const P=B[0]-K[0],S=B[1]-K[1],O=B[2]-K[2];z=M*(P*z+S*h+O*L);if(0>z||1<z)return!1;h=S*D-C*O;D=O*k-D*P;k=P*C-k*S;C=M*(I[0]*h+I[1]*D+I[2]*k);if(0>C||1<z+C)return!1;H&&(p.scale(H,I,M*(x*h+u*D+n*k)),p.add(H,B,H));return!0};
b.wrap=function(x,u,H){const I=w.get();I.p0=x;I.p1=u;I.p2=H;return I};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/geometry/support/lineSegment":function(){define("exports ../../core/mathUtils ../../core/ObjectStack ../../chunks/vec3 ../../chunks/vec3f64 ./vectorStacks".split(" "),function(b,a,q,p,g,m){function d(x){return x?{origin:g.clone(x.origin),vector:g.clone(x.vector)}:{origin:g.create(),vector:g.create()}}function f(x,u){const H=F.get();H.origin=x;H.vector=u;return H}function l(x,
u,H=d()){p.copy(H.origin,x);p.copy(H.vector,u);return H}function t(x,u){u=p.subtract(m.sv3d.get(),u,x.origin);var H=p.dot(x.vector,u);const I=p.dot(x.vector,x.vector);H=a.clamp(H/I,0,1);x=p.subtract(m.sv3d.get(),p.scale(m.sv3d.get(),x.vector,H),u);return p.dot(x,x)}function y(x,u,H,I,B){const {vector:K,origin:J}=x;u=p.subtract(m.sv3d.get(),u,J);u=p.dot(K,u)/p.squaredLength(K);p.scale(B,K,a.clamp(u,H,I));return p.add(B,B,x.origin)}function w(x,u,H,I){const B=x.origin;var K=p.add(m.sv3d.get(),B,x.vector);
x=u.origin;var J=p.add(m.sv3d.get(),x,u.vector),c=m.sv3d.get();u=m.sv3d.get();c[0]=B[0]-x[0];c[1]=B[1]-x[1];c[2]=B[2]-x[2];u[0]=J[0]-x[0];u[1]=J[1]-x[1];u[2]=J[2]-x[2];if(1E-6>Math.abs(u[0])&&1E-6>Math.abs(u[1])&&1E-6>Math.abs(u[2]))return!1;J=m.sv3d.get();J[0]=K[0]-B[0];J[1]=K[1]-B[1];J[2]=K[2]-B[2];if(1E-6>Math.abs(J[0])&&1E-6>Math.abs(J[1])&&1E-6>Math.abs(J[2]))return!1;K=c[0]*u[0]+c[1]*u[1]+c[2]*u[2];var k=u[0]*J[0]+u[1]*J[1]+u[2]*J[2];const C=u[0]*u[0]+u[1]*u[1]+u[2]*u[2],D=(J[0]*J[0]+J[1]*J[1]+
J[2]*J[2])*C-k*k;if(1E-6>Math.abs(D))return!1;c=(K*k-(c[0]*J[0]+c[1]*J[1]+c[2]*J[2])*C)/D;K=(K+k*c)/C;H&&(c=a.clamp(c,0,1),K=a.clamp(K,0,1));H=m.sv3d.get();k=m.sv3d.get();H[0]=B[0]+c*J[0];H[1]=B[1]+c*J[1];H[2]=B[2]+c*J[2];k[0]=x[0]+K*u[0];k[1]=x[1]+K*u[1];k[2]=x[2]+K*u[2];I.tA=c;I.tB=K;I.pA=H;I.pB=k;I.distance2=p.squaredDistance(H,k);return!0}const v={tA:0,tB:0,pA:g.create(),pB:g.create(),distance2:0},F=new q.ObjectStack(()=>({origin:null,vector:null}));b.closestLineSegmentDistance2=function(x,u){return w(x,
u,!0,v)?v.distance2:null};b.closestLineSegmentPoint=function(x,u,H){return w(x,u,!0,v)?(p.copy(H,v.pA),!0):!1};b.closestRayDistance2=function(x,u){if(w(x,f(u.origin,u.direction),!1,v)){const {tA:H,pB:I,distance2:B}=v;if(0<=H&&1>=H)return B;if(0>H)return p.squaredDistance(x.origin,I);if(1<H)return p.squaredDistance(p.add(m.sv3d.get(),x.origin,x.vector),I)}return null};b.copy=function(x,u=d()){return l(x.origin,x.vector,u)};b.create=d;b.distance=function(x,u){return Math.sqrt(t(x,u))};b.distance2=t;
b.fromPoints=function(x,u,H=d()){p.copy(H.origin,x);p.subtract(H.vector,u,x);return H};b.fromValues=l;b.pointAt=function(x,u,H){return p.add(H,x.origin,p.scale(H,x.vector,u))};b.projectPoint=function(x,u,H){return y(x,u,0,1,H)};b.projectPointClamp=y;b.wrap=f;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/VertexAttribute":function(){define(["exports"],function(b){b.VertexAttribute=void 0;var a=b.VertexAttribute||(b.VertexAttribute={});a.POSITION="position";a.NORMAL=
"normal";a.UV0="uv0";a.AUXPOS1="auxpos1";a.AUXPOS2="auxpos2";a.MAPPOS="mapPos";a.COLOR="color";a.SYMBOLCOLOR="symbolColor";a.SIZE="size";a.TANGENT="tangent";a.OFFSET="offset";a.SUBDIVISIONFACTOR="subdivisionFactor";a.COLORFEATUREATTRIBUTE="colorFeatureAttribute";a.SIZEFEATUREATTRIBUTE="sizeFeatureAttribute";a.OPACITYFEATUREATTRIBUTE="opacityFeatureAttribute";a.DISTANCETOSTART="distanceToStart";a.UVMAPSPACE="uvMapSpace";a.BOUNDINGRECT="boundingRect";a.UVREGION="uvRegion";a.NORMALCOMPRESSED="normalCompressed";
a.PROFILERIGHT="profileRight";a.PROFILEUP="profileUp";a.PROFILEVERTEXANDNORMAL="profileVertexAndNormal";a.FEATUREVALUE="featureValue";a.MODELORIGINHI="modelOriginHi";a.MODELORIGINLO="modelOriginLo";a.MODEL="model";a.MODELNORMAL="modelNormal";a.INSTANCECOLOR="instanceColor";a.INSTANCEFEATUREATTRIBUTE="instanceFeatureAttribute";a.LOCALTRANSFORM="localTransform";a.GLOBALTRANSFORM="globalTransform";a.BOUNDINGSPHERE="boundingSphere";a.MODELORIGIN="modelOrigin";a.MODELSCALEFACTORS="modelScaleFactors";a.FEATUREATTRIBUTE=
"featureAttribute";a.STATE="state";a.LODLEVEL="lodLevel";a.POSITION0="position0";a.POSITION1="position1";a.NORMALA="normalA";a.NORMALB="normalB";a.COMPONENTINDEX="componentIndex";a.VARIANTOFFSET="variantOffset";a.VARIANTSTROKE="variantStroke";a.VARIANTEXTENSION="variantExtension";a.U8PADDING="u8padding";a.U16PADDING="u16padding";a.SIDENESS="sideness";a.START="start";a.END="end";a.UP="up";a.EXTRUDE="extrude";Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/LocalOriginFactory":function(){define(["exports",
"../../../../chunks/vec3f64"],function(b,a){let q=function(p,g){this.vec3=p;this.id=g};b.LocalOrigin=q;b.fromValues=function(p,g,m,d){return new q(a.fromValues(p,g,m),d)};b.fromVector=function(p,g){return new q(a.clone(p),g)};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/Object3D":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../chunks/mat4 ../../../../chunks/mat4f64 ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/sphere ../../support/mathUtils ./basicInterfaces ./ContentObject ./ContentObjectType ./GeometryRecord ./Object3DStateID ./Util ../materials/renderers/utils".split(" "),
function(b,a,q,p,g,m,d,f,l,t,y,w,v,F,x,u){y=function(B){function K(c={}){var k=B.call(this)||this;k.type=w.ContentObjectType.Object;k._geometryRecords=[];k._geometries=[];k._objectTransformation=g.create();k._bvObjectSpace=new I;k._bvWorldSpace=new I;k._bvDirty=!0;k._hasVolatileTransformation=!1;k._visible=!0;k.castShadow=null!=c.castShadow?c.castShadow:!0;k.metadata=c.metadata;k.metadata&&k.metadata.isElevationSource&&(k.metadata.lastValidElevationBB=new H);k.transformation=g.create();const {geometries:C,
materials:D,transformations:n,origins:z}=c;if(!Array.isArray(C))return a._assertThisInitialized(k);x.assert(D.length===C.length,"Object3D: materials don't match geometries");x.assert(n.length===C.length,"Object3D: transformations don't match geometries");k._geometryRecords.length=C.length;k._geometries.length=C.length;for(c=0;c<C.length;c++)k._geometries[c]=C[c],k._geometryRecords[c]=v.GeometryRecord.pool.acquire(C[c],D[c],g.clone(n[c]),{highlights:null,occludees:null,visible:k._visible},z&&z[c]);
return k}a._inheritsLoose(K,B);var J=K.prototype;J.dispose=function(){this._geometryRecords.length=0;this._geometries.length=0};J.addGeometry=function(c,k,C,D,n){C=C?C:g.IDENTITY;this._geometries.push(c);c=v.GeometryRecord.pool.acquire(c,k,C,{highlights:null,occludees:null,visible:this._visible},D,n);this._geometryRecords.push(c);this._hasVolatileTransformation=this._hasVolatileTransformation||q.isSome(c.shaderTransformation);this._emit("objectGeometryAdded",{object:this,record:c});this._invalidateBoundingVolume();
return c};J.removeGeometry=function(c){const k=this._geometryRecords.splice(c,1)[0];this._hasVolatileTransformation=q.isSome(k.shaderTransformation)?this._geometryRecords.some(C=>q.isSome(C.shaderTransformation)):this._hasVolatileTransformation;k.dispose();this._geometries.splice(c,1);this._emit("objectGeometryRemoved",{object:this,record:k});this._invalidateBoundingVolume();return k};J.removeAllGeometries=function(){for(;0<this.geometryRecords.length;)this.removeGeometry(0)};J.geometryVertexAttrsUpdated=
function(c){this._emit("vertexAttrsUpdated",{object:this,record:c});this._invalidateBoundingVolume()};J.setVisible=function(c){if(this._visible!==c){this._visible=c;for(const k of this._geometryRecords)k.instanceParameters.visible=this._visible;this._emit("visibilityChanged",this)}};J.maskOccludee=function(){const c=new F.Object3DStateID(t.Object3DState.MaskOccludee);for(const k of this._geometryRecords)k.instanceParameters.occludees=u.addObject3DStateID(k.instanceParameters.occludees,c);this._emit("occlusionChanged",
this);return c};J.removeOcclude=function(c){for(const k of this._geometryRecords)k.instanceParameters.occludees=u.removeObject3DStateID(k.instanceParameters.occludees,c);this._emit("occlusionChanged",this)};J.highlight=function(){const c=new F.Object3DStateID(t.Object3DState.Highlight);for(const k of this._geometryRecords)k.instanceParameters.highlights=u.addObject3DStateID(k.instanceParameters.highlights,c);this._emit("highlightChanged",this);return c};J.removeHighlight=function(c){for(const k of this._geometryRecords)k.instanceParameters.highlights=
u.removeObject3DStateID(k.instanceParameters.highlights,c);this._emit("highlightChanged",this)};J.getCombinedStaticTransformation=function(c,k){return p.multiply(q.unwrapOr(k,g.create()),this.transformation,c.getStaticTransformation())};J._getCombinedShaderTransformation=function(c,k){k=k||g.create();p.multiply(k,this.transformation,c.getShaderTransformation());return k};J.hasVolativeTransformation=function(){return this._hasVolatileTransformation};J._validateBoundingVolume=function(){if(this._bvDirty||
this._hasVolatileTransformation){this._bvObjectSpace.init();this._bvWorldSpace.init();for(var c=0;c<this._geometryRecords.length;++c){var k=this._geometryRecords[c],C=this._geometries[c].boundingInfo;q.isSome(C)&&(this._calculateTransformedBoundingVolume(C,this._bvObjectSpace,k.getShaderTransformation()),this._calculateTransformedBoundingVolume(C,this._bvWorldSpace,this._getCombinedShaderTransformation(k)))}m.lerp(this._bvObjectSpace.bounds,this._bvObjectSpace.min,this._bvObjectSpace.max,.5);m.lerp(this._bvWorldSpace.bounds,
this._bvWorldSpace.min,this._bvWorldSpace.max,.5);c=d.create();k=d.create();C=l.maxScale(this.transformation);for(let h=0;h<this._geometryRecords.length;++h){var D=this._geometries[h].boundingInfo;if(!q.isNone(D)){var n=this._geometryRecords[h].getShaderTransformation(),z=l.maxScale(n);m.transformMat4(c,D.getCenter(),n);n=m.distance(c,this._bvObjectSpace.bounds);D=D.getBSRadius()*z;this._bvObjectSpace.bounds[3]=Math.max(this._bvObjectSpace.bounds[3],n+D);m.transformMat4(k,c,this.transformation);z=
m.distance(k,this._bvWorldSpace.bounds);this._bvWorldSpace.bounds[3]=Math.max(this._bvWorldSpace.bounds[3],z+D*C)}}this._bvDirty=!1}};J._calculateTransformedBoundingVolume=function(c,k,C){const D=c.getBBMin();c=c.getBBMax();const n=d.clone(D),z=d.clone(c);m.transformMat4(n,n,C);m.transformMat4(z,z,C);for(var h=0;3>h;++h)k.min[h]=Math.min(k.min[h],n[h],z[h]),k.max[h]=Math.max(k.max[h],n[h],z[h]);for(h=0;3>h;++h){m.copy(n,D);m.copy(z,c);n[h]=c[h];z[h]=D[h];m.transformMat4(n,n,C);m.transformMat4(z,z,
C);for(let L=0;3>L;++L)k.min[L]=Math.min(k.min[L],n[L],z[L]),k.max[L]=Math.max(k.max[L],n[L],z[L])}};J._invalidateBoundingVolume=function(){this._bvDirty=!0;q.isSome(this._parentLayer)&&this._parentLayer.notifyObjectBBChanged(this,this._bvWorldSpace.bounds)};J._emit=function(c,k){q.isSome(this._parentLayer)&&this._parentLayer.events.emit(c,k)};a._createClass(K,[{key:"geometryRecords",get:function(){return this._geometryRecords}},{key:"geometries",get:function(){return this._geometries}},{key:"transformation",
get:function(){return this._objectTransformation},set:function(c){p.copy(this._objectTransformation,c);this._invalidateBoundingVolume();this._emit("objectTransformation",this)}},{key:"parentLayer",get:function(){return this._parentLayer},set:function(c){x.assert(null==this._parentLayer||null==c,"Object3D can only be added to a single Layer");this._parentLayer=c}},{key:"isVisible",get:function(){return this._visible}},{key:"boundingVolumeWorldSpace",get:function(){this._validateBoundingVolume();return this._bvWorldSpace}},
{key:"boundingVolumeObjectSpace",get:function(){this._validateBoundingVolume();return this._bvObjectSpace}},{key:"test",get:function(){const c=this;return{hasGeometry:k=>-1<c._geometries.indexOf(k),getGeometryIndex:k=>c._geometries.indexOf(k)}}}]);return K}(y.ContentObject);let H=function(){function B(){this.min=d.fromValues(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);this.max=d.fromValues(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE)}B.prototype.isEmpty=function(){return this.max[0]<
this.min[0]&&this.max[1]<this.min[1]&&this.max[2]<this.min[2]};return B}(),I=function(B){function K(){var J=B.apply(this,arguments)||this;J.bounds=f.create();return J}a._inheritsLoose(K,B);K.prototype.init=function(){m.set(this.min,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);m.set(this.max,-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);f.clear(this.bounds)};return K}(H);b.Object3D=y;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/GeometryRecord":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../core/ObjectPool ../../../../core/uid ../../../../chunks/vec3".split(" "),
function(b,a,q,p,g,m){let d=function(){function f(){this._disposed=!1}var l=f.prototype;l.acquire=function(t,y,w,v,F,x){this.id=g.generateUID();this.geometry=t;this.material=y;this.transformation=w;this.instanceParameters=v;this.origin=F;this._shaderTransformation=x;this._disposed=!1};l.release=function(){this._disposed=!1};l.dispose=function(){this._disposed=!0};l.getStaticTransformation=function(){return this.transformation};l.getShaderTransformation=function(){return q.isSome(this._shaderTransformation)?
this._shaderTransformation(this.transformation):this.transformation};l.computeAttachmentOrigin=function(t){return(this.material.computeAttachmentOrigin?this.material.computeAttachmentOrigin(this.geometry,t):this.geometry.computeAttachmentOrigin(t))?(m.transformMat4(t,t,this.getStaticTransformation()),!0):!1};a._createClass(f,[{key:"disposed",get:function(){return this._disposed}},{key:"shaderTransformation",get:function(){return this._shaderTransformation}}]);return f}();d.pool=new p(d);b.GeometryRecord=
d;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/Object3DStateID":function(){define(["exports","../../../../core/uid"],function(b,a){b.Object3DStateID=function(q){this.channel=q;this.id=a.generateUID()};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/materials/renderers/utils":function(){define("exports ../../../../../core/maybe ../../../../../chunks/mat4 ../../../../../chunks/mat4f64 ../../lib/Util ../../../../webgl/doublePrecisionUtils".split(" "),
function(b,a,q,p,g,m){const d=new Float64Array(3),f=new Float32Array(6),l=p.create();b.addObject3DStateID=function(t,y){a.isNone(t)&&(t=[]);t.push(y);return t};b.calculateTransformRelativeToOrigin=function(t,y,w){const v=t.origin.vec3;g.setMatrixTranslation3(l,-v[0],-v[1],-v[2]);a.isSome(t.transformation)?q.multiply(y,l,t.transformation):q.copy(y,l);w&&(q.invert(w,y),q.transpose(w,w))};b.encodeDoubleVec3=function(t,y,w,v,F){d[0]=t.get(y,0);d[1]=t.get(y,1);d[2]=t.get(y,2);m.encodeDoubleArray(d,f,3);
w.set(F,0,f[0]);v.set(F,0,f[1]);w.set(F,1,f[2]);v.set(F,1,f[3]);w.set(F,2,f[4]);v.set(F,2,f[5])};b.isInstanceHidden=function(t){return a.isSome(t)?!t.visible:!1};b.removeObject3DStateID=function(t,y){if(a.isNone(t))return null;t=t.filter(w=>w!==y);return 0===t.length?null:t};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/webgl/doublePrecisionUtils":function(){define(["exports"],function(b){function a(g,m,d){for(let f=0;f<d;++f)m[2*f]=g[f],m[2*f+1]=g[f]-m[2*f]}const q=new Float64Array(1),
p=new Float32Array(2);b.decodeDoubleArray=function(g,m,d){for(let f=0;f<d;++f)m[f]=g[2*f]+g[2*f+1]};b.encodeDouble=function(g,m){p[0]=g;p[1]=g-p[0];m[0]=p[0];m[1]=p[1]};b.encodeDoubleArray=a;b.encodeDoubleArraySplit=function(g,m,d,f){for(let l=0;l<f;++l)q[0]=g[l],a(q,p,1),m[l]=p[0],d[l]=p[1]};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/WebGLLayer":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/Evented ../../../../core/Handles ../../../../core/maybe ../../../../core/PooledArray ./basicInterfaces ./ContentObject ./ContentObjectType ./DirtyEvents ./Octree".split(" "),
function(b,a,q,p,g,m,d,f,l,t,y){f=function(w){function v(x,u=""){var H,I,B;var K=w.call(this)||this;K.apiLayerUid=u;K.type=l.ContentObjectType.Layer;K.events=new q;K.isSliceable=!1;K._objects=new m;K._stageHandles=new p;K.apiLayerUid=u;K.isVisible=null!=(H=null==x?void 0:x.isVisible)?H:!0;K.isPickable=null!=(I=null==x?void 0:x.isPickable)?I:!0;K.updatePolicy=null!=(B=null==x?void 0:x.updatePolicy)?B:d.UpdatePolicy.ASYNC;return K}a._inheritsLoose(v,w);var F=v.prototype;F.destroy=function(){this.detachStage();
this._stage=null};F.attachStage=function(x){this.detachStage();this._stage=x;for(const u of t.DirtyEventNames)this._stageHandles.add(this.events.on(u,H=>x.handleEvent(u,H)))};F.detachStage=function(){this._stageHandles.removeAll();this.invalidateSpatialQueryAccelerator()};F.add=function(x){this._objects.push(x);x.parentLayer=this;this.events.emit("layerObjectAdded",{layer:this,object:x});g.isSome(this._octree)&&this._octree.add([x])};F.remove=function(x){this._objects.removeUnordered(x)&&(x.parentLayer=
null,this.events.emit("layerObjectRemoved",{layer:this,object:x}),g.isSome(this._octree)&&this._octree.remove([x]))};F.addMany=function(x){this._objects.pushArray(x);for(const u of x)u.parentLayer=this;this.events.emit("layerObjectsAdded",{layer:this,objects:x});g.isSome(this._octree)&&this._octree.add(x)};F.removeMany=function(x){const u=[];this._objects.removeUnorderedMany(x,x.length,u);if(0!==u.length){for(const H of u)H.parentLayer=null;this.events.emit("layerObjectsRemoved",{layer:this,objects:u});
g.isSome(this._octree)&&this._octree.remove(u)}};F.sync=function(){g.isSome(this._stage)&&this.updatePolicy!==d.UpdatePolicy.SYNC&&this._stage.syncLayer(this.id)};F.notifyObjectBBChanged=function(x,u){g.isSome(this._octree)&&this._octree.update(x,u)};F.getSpatialQueryAccelerator=function(){g.isNone(this._octree)&&50<this._objects.length&&this._createOctree();return this._octree};F.shaderTransformationChanged=function(){this.invalidateSpatialQueryAccelerator();this.events.emit("shaderTransformationChanged",
this)};F.invalidateSpatialQueryAccelerator=function(){this._octree=g.destroyMaybe(this._octree)};F._createOctree=function(){this._octree=new y.default(x=>x.boundingVolumeWorldSpace.bounds);this._octree.add(this._objects.data,this._objects.length)};a._createClass(v,[{key:"objects",get:function(){return this._objects}}]);return v}(f.ContentObject);b.WebGLLayer=f;b.isWebGLLayer=function(w){return g.isSome(w)&&w.type===l.ContentObjectType.Layer};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/DirtyEvents":function(){define(["exports"],
function(b){b.DirtyEventNames="layerObjectAdded layerObjectRemoved layerObjectsAdded layerObjectsRemoved shaderTransformationChanged objectTransformation visibilityChanged occlusionChanged highlightChanged objectGeometryAdded objectGeometryRemoved vertexAttrsUpdated".split(" ");Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/Octree":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../core/ObjectPool ../../../../core/PooledArray ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../geometry/support/frustum ../../../../geometry/support/ray ../../../../chunks/sphere ./Util".split(" "),
function(b,a,q,p,g,m,d,f,l,t,y){function w(V,U,G){G[0]=V[0]+U;G[1]=V[1]+U;G[2]=V[2]+U}function v(V,U,G,A){if(1===U)V=G(V[0]),t.copy(V,A);else{n[0]=Infinity;n[1]=Infinity;n[2]=Infinity;z[0]=-Infinity;z[1]=-Infinity;z[2]=-Infinity;for(let N=0;N<U;N++){var r=G(V[N]);if(H(r[3])){var e=n,E=r;e[0]=Math.min(e[0],E[0]-E[3]);e[1]=Math.min(e[1],E[1]-E[3]);e[2]=Math.min(e[2],E[2]-E[3]);e=z;e[0]=Math.max(e[0],r[0]+r[3]);e[1]=Math.max(e[1],r[1]+r[3]);e[2]=Math.max(e[2],r[2]+r[3])}}m.lerp(A,n,z,.5);A[3]=Math.max(z[0]-
n[0],z[1]-n[1],z[2]-n[2])/2}}function F(V,U,G){if(!T.length)for(var A=0;8>A;++A)T.push({index:0,distance:0});for(A=0;8>A;++A){const r=K[A];T.data[A].index=A;T.data[A].distance=u(V,U,r)}T.sort((r,e)=>r.distance-e.distance);for(V=0;8>V;++V)G[V]=T.data[V].index}function x(V,U){let G=Infinity,A=null;for(let r=0;8>r;++r){const e=u(V,U,J[r]);e<G&&(G=e,A=J[r])}return A}function u(V,U,G){return U*(V[0]*G[0]+V[1]*G[1]+V[2]*G[2])}function H(V){return!isNaN(V)&&-Infinity!==V&&Infinity!==V&&0<V}let I=function(){function V(G,
A){this._objectToBoundingSphere=G;this._maximumObjectsPerNode=10;this._maximumDepth=20;this._degenerateObjects=new Set;this._root=new B;this._objectCount=0;A&&(void 0!==A.maximumObjectsPerNode&&(this._maximumObjectsPerNode=A.maximumObjectsPerNode),void 0!==A.maximumDepth&&(this._maximumDepth=A.maximumDepth))}var U=V.prototype;U.destroy=function(){this._degenerateObjects.clear();B.clearPool();k[0]=null;h.prune();T.prune()};U.add=function(G,A=G.length){this._objectCount+=A;this._grow(G,A);const r=B.acquire();
for(let e=0;e<A;e++){const E=G[e];this._isDegenerate(E)?this._degenerateObjects.add(E):(r.init(this._root),this._add(E,r))}B.release(r)};U.remove=function(G,A=null){this._objectCount-=G.length;const r=B.acquire();for(const e of G)G=q.isSome(A)?A:t.copy(this._objectToBoundingSphere(e),L),H(G[3])?(r.init(this._root),this._remove(e,G,r)):this._degenerateObjects.delete(e);B.release(r);this._shrink()};U.update=function(G,A){if(H(A[3])||!this._isDegenerate(G))k[0]=G,G=k,this.remove(G,A),this.add(G)};U.forEachAlongRay=
function(G,A,r){const e=l.wrap(G,A);this._forEachNode(this._root,E=>{if(!this._intersectsNode(e,E))return!1;E=E.node;E.terminals.forAll(N=>{this._intersectsObject(e,N)&&r(N)});null!==E.residents&&E.residents.forAll(N=>{this._intersectsObject(e,N)&&r(N)});return!0})};U.forEachAlongRayWithVerticalOffset=function(G,A,r,e){const E=l.wrap(G,A);this._forEachNode(this._root,N=>{if(!this._intersectsNodeWithOffset(E,N,e))return!1;N=N.node;N.terminals.forAll(Q=>{this._intersectsObjectWithOffset(E,Q,e)&&r(Q)});
null!==N.residents&&N.residents.forAll(Q=>{this._intersectsObjectWithOffset(E,Q,e)&&r(Q)});return!0})};U.forEach=function(G){this._forEachNode(this._root,A=>{A=A.node;A.terminals.forAll(G);null!==A.residents&&A.residents.forAll(G);return!0});this._degenerateObjects.forEach(G)};U.forEachDegenerateObject=function(G){this._degenerateObjects.forEach(G)};U.findClosest=function(G,A,r,e=()=>!0,E=Infinity){let N=Infinity,Q=Infinity,Z=null;const ba=x(G,A),aa=da=>{--E;if(e(da)){var na=this._objectToBoundingSphere(da);
if(f.intersectsSphere(r,na)){var va=u(G,A,t.getCenter(na)),ta=va-na[3];na=va+na[3];ta<N&&(N=ta,Q=na,Z=da)}}};this._forEachNodeDepthOrdered(this._root,da=>{if(0>=E||!f.intersectsSphere(r,da.bounds))return!1;m.scale(D,ba,da.halfSize);m.add(D,D,da.bounds);if(u(G,A,D)>Q)return!1;da=da.node;da.terminals.forAll(na=>aa(na));null!==da.residents&&da.residents.forAll(na=>aa(na));return!0},G,A);return Z};U.forEachInDepthRange=function(G,A,r,e,E,N,Q){let Z=-Infinity,ba=Infinity;const aa={setRange:ka=>{r===b.DepthOrder.FRONT_TO_BACK?
(Z=Math.max(Z,ka.near),ba=Math.min(ba,ka.far)):(Z=Math.max(Z,-ka.far),ba=Math.min(ba,-ka.near))}};aa.setRange(e);const da=u(A,r,G),na=x(A,r),va=x(A,-r),ta=ka=>{if(Q(ka)){var fa=this._objectToBoundingSphere(ka),pa=t.getCenter(fa);pa=u(A,r,pa)-da;var X=pa+fa[3];pa-fa[3]>ba||X<Z||!f.intersectsSphere(N,fa)||E(ka,aa)}};this._forEachNodeDepthOrdered(this._root,ka=>{if(!f.intersectsSphere(N,ka.bounds))return!1;m.scale(D,na,ka.halfSize);m.add(D,D,ka.bounds);if(u(A,r,D)-da>ba)return!1;m.scale(D,va,ka.halfSize);
m.add(D,D,ka.bounds);if(u(A,r,D)-da<Z)return!1;ka=ka.node;ka.terminals.forAll(fa=>ta(fa));null!==ka.residents&&ka.residents.forAll(fa=>ta(fa));return!0},A,r)};U.forEachNode=function(G){this._forEachNode(this._root,A=>G(A.node,A.bounds,A.halfSize))};U._intersectsNode=function(G,A){w(A.bounds,2*-A.halfSize,n);w(A.bounds,2*A.halfSize,z);return y.rayBoxTest(G.origin,G.direction,n,z)};U._intersectsNodeWithOffset=function(G,A,r){w(A.bounds,2*-A.halfSize,n);w(A.bounds,2*A.halfSize,z);r.applyToMinMax(n,z);
return y.rayBoxTest(G.origin,G.direction,n,z)};U._intersectsObject=function(G,A){A=this._objectToBoundingSphere(A);return 0<A[3]?t.intersectsRay(A,G):!0};U._intersectsObjectWithOffset=function(G,A,r){A=this._objectToBoundingSphere(A);return 0<A[3]?t.intersectsRay(r.applyToBoundingSphere(A),G):!0};U._forEachNode=function(G,A){G=B.acquire().init(G);const r=[G];for(;0!==r.length;){G=r.pop();if(A(G)&&!G.isLeaf())for(let e=0;e<G.node.children.length;e++)G.node.children[e]&&r.push(B.acquire().init(G).advance(e));
B.release(G)}};U._forEachNodeDepthOrdered=function(G,A,r,e=b.DepthOrder.FRONT_TO_BACK){G=B.acquire().init(G);const E=[G];for(F(r,e,W);0!==E.length;){G=E.pop();if(A(G)&&!G.isLeaf())for(r=7;0<=r;--r)e=W[r],G.node.children[e]&&E.push(B.acquire().init(G).advance(e));B.release(G)}};U._remove=function(G,A,r){h.clear();A=r.advanceTo(A,(e,E)=>{h.push(e.node);h.push(E)})?r.node.terminals:r.node.residents;A.removeUnordered(G);if(0===A.length)for(G=h.length-2;0<=G&&this._purge(h.data[G],h.data[G+1]);G-=2);};
U._nodeIsEmpty=function(G){if(0!==G.terminals.length)return!1;if(null!==G.residents)return 0===G.residents.length;for(let A=0;A<G.children.length;A++)if(G.children[A])return!1;return!0};U._purge=function(G,A){0<=A&&(G.children[A]=null);return this._nodeIsEmpty(G)?(null===G.residents&&(G.residents=new g({shrink:!0})),!0):!1};U._add=function(G,A){A.advanceTo(this._objectToBoundingSphere(G))?A.node.terminals.push(G):(A.node.residents.push(G),A.node.residents.length>this._maximumObjectsPerNode&&A.depth<
this._maximumDepth&&this._split(A))};U._split=function(G){const A=G.node.residents;G.node.residents=null;for(let r=0;r<A.length;r++){const e=B.acquire().init(G);this._add(A.getItemAt(r),e);B.release(e)}};U._grow=function(G,A){0!==A&&(v(G,A,r=>this._objectToBoundingSphere(r),M),H(M[3])&&!this._fitsInsideTree(M)&&(this._nodeIsEmpty(this._root.node)?(t.copy(M,this._root.bounds),this._root.halfSize=1.25*M[3]):(G=this._rootBoundsForRootAsSubNode(M),this._placingRootViolatesMaxDepth(G)?this._rebuildTree(M,
G):this._growRootAsSubNode(G),B.release(G))))};U._rebuildTree=function(G,A){m.copy(P,A.bounds);P[3]=A.halfSize;v([G,P],2,r=>r,S);G=B.acquire().init(this._root);this._root.initFrom(null,S,1.25*S[3]);this._forEachNode(G,r=>{this.add(r.node.terminals.data,r.node.terminals.length);null!==r.node.residents&&this.add(r.node.residents.data,r.node.residents.length);return!0});B.release(G)};U._placingRootViolatesMaxDepth=function(G){const A=Math.log(G.halfSize/this._root.halfSize)*Math.LOG2E;let r=0;this._forEachNode(this._root,
e=>{r=Math.max(r,e.depth);return r+A<=this._maximumDepth});return r+A>this._maximumDepth};U._rootBoundsForRootAsSubNode=function(G){var A=G[3];let r=-Infinity;const e=this._root.bounds,E=this._root.halfSize;for(var N=0;3>N;N++){var Q=Math.max(0,Math.ceil((e[N]-E-(G[N]-A))/(2*E)));const Z=Math.max(0,Math.ceil((G[N]+A-(e[N]+E))/(2*E)))+1;r=Math.max(r,2**Math.ceil(Math.log(Q+Z)*Math.LOG2E));O[N].min=Q;O[N].max=Z}for(G=0;3>G;G++)A=O[G].min,N=O[G].max,Q=(r-(A+N))/2,A+=Math.ceil(Q),N+=Math.floor(Q),C[G]=
e[G]-E-A*E*2+(N+A)*E;C[3]=r*E*c;return B.acquire().initFrom(null,C,r*E,0)};U._growRootAsSubNode=function(G){const A=this._root.node;m.copy(M,this._root.bounds);M[3]=this._root.halfSize;this._root.init(G);G.advanceTo(M,null,!0);G.node.children=A.children;G.node.residents=A.residents;G.node.terminals=A.terminals};U._shrink=function(){for(;;){const G=this._findShrinkIndex();if(-1===G)break;this._root.advance(G);this._root.depth=0}};U._findShrinkIndex=function(){if(0!==this._root.node.terminals.length||
this._root.isLeaf())return-1;let G=null;const A=this._root.node.children;let r=0,e=0;for(;e<A.length&&null==G;)r=e++,G=A[r];for(;e<A.length;)if(A[e++])return-1;return r};U._isDegenerate=function(G){G=this._objectToBoundingSphere(G)[3];return!H(G)};U._fitsInsideTree=function(G){const A=this._root.bounds,r=this._root.halfSize;return G[3]<=r&&G[0]>=A[0]-r&&G[0]<=A[0]+r&&G[1]>=A[1]-r&&G[1]<=A[1]+r&&G[2]>=A[2]-r&&G[2]<=A[2]+r};a._createClass(V,[{key:"bounds",get:function(){return this._root.bounds}},{key:"halfSize",
get:function(){return this._root.halfSize}},{key:"root",get:function(){return this._root.node}},{key:"maximumObjectsPerNode",get:function(){return this._maximumObjectsPerNode}},{key:"maximumDepth",get:function(){return this._maximumDepth}},{key:"objectCount",get:function(){return this._objectCount}}]);return V}(),B=function(){function V(){this.bounds=t.create();this.halfSize=0;this.initFrom(null,null,0,0)}var U=V.prototype;U.init=function(G){return this.initFrom(G.node,G.bounds,G.halfSize,G.depth)};
U.initFrom=function(G,A,r,e=this.depth){this.node=q.isSome(G)?G:V.createEmptyNode();q.isSome(A)&&t.copy(A,this.bounds);this.halfSize=r;this.depth=e;return this};U.advance=function(G){let A=this.node.children[G];A||(A=V.createEmptyNode(),this.node.children[G]=A);this.node=A;this.halfSize/=2;this.depth++;G=K[G];this.bounds[0]+=G[0]*this.halfSize;this.bounds[1]+=G[1]*this.halfSize;this.bounds[2]+=G[2]*this.halfSize;this.bounds[3]=this.halfSize*c;return this};U.advanceTo=function(G,A,r=!1){for(;;){if(this.isTerminalFor(G))return A&&
A(this,-1),!0;if(this.isLeaf()){if(!r)return A&&A(this,-1),!1;this.node.residents=null}const e=this._childIndex(G);A&&A(this,e);this.advance(e)}};U.isLeaf=function(){return null!=this.node.residents};U.isTerminalFor=function(G){return G[3]>this.halfSize/2};U._childIndex=function(G){const A=this.bounds;return(A[0]<G[0]?1:0)+(A[1]<G[1]?2:0)+(A[2]<G[2]?4:0)};V.createEmptyNode=function(){return{children:[null,null,null,null,null,null,null,null],terminals:new g({shrink:!0}),residents:new g({shrink:!0})}};
V.acquire=function(){return V._pool.acquire()};V.release=function(G){V._pool.release(G)};V.clearPool=function(){V._pool.prune()};return V}();B._pool=new p(B);b.DepthOrder=void 0;(function(V){V[V.FRONT_TO_BACK=1]="FRONT_TO_BACK";V[V.BACK_TO_FRONT=-1]="BACK_TO_FRONT"})(b.DepthOrder||(b.DepthOrder={}));const K=[d.fromValues(-1,-1,-1),d.fromValues(1,-1,-1),d.fromValues(-1,1,-1),d.fromValues(1,1,-1),d.fromValues(-1,-1,1),d.fromValues(1,-1,1),d.fromValues(-1,1,1),d.fromValues(1,1,1)],J=[d.fromValues(-1,
-1,-1),d.fromValues(-1,-1,1),d.fromValues(-1,1,-1),d.fromValues(-1,1,1),d.fromValues(1,-1,-1),d.fromValues(1,-1,1),d.fromValues(1,1,-1),d.fromValues(1,1,1)],c=Math.sqrt(3),k=[null],C=t.create(),D=d.create(),n=d.create(),z=d.create(),h=new g,L=t.create(),M=t.create(),P=t.create(),S=t.create(),O=[{min:0,max:0},{min:0,max:0},{min:0,max:0}],T=new g,W=[0,0,0,0,0,0,0,0];b.default=I;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/materials/RibbonLineMaterial":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/Logger ../../../../core/mathUtils ../../../../core/maybe ../../../../core/screenUtils ../../../../chunks/vec2 ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../geometry/support/frustum ../../../../geometry/support/lineSegment ../../../../geometry/support/plane ../../support/buffer/InterleavedLayout ../core/shaderLibrary/ShaderOutputOptions ../lib/geometryDataUtils ../lib/GLMaterial ../lib/GLMaterials ../lib/Material ../lib/RenderSlot ../lib/Util ../lib/VertexAttribute ./VisualVariableMaterialParameters ./renderers/utils ../../../../chunks/RibbonLine.glsl ../shaders/RibbonLineTechnique".split(" "),
function(b,a,q,p,g,m,d,f,l,t,y,w,v,F,x,u,H,I,B,K,J,c,k,C,D){function n(fa,pa,X,R,Y){for(let ha=0;ha<Y;ha++)X[R++]=fa[pa++];return R}function z(fa,pa,X){pa=pa.get(J.VertexAttribute.POSITION).data;X=X?X.get(J.VertexAttribute.POSITION):null;return fa.isClosed?X?2<X.length:6<pa.length:!1}const h=q.getLogger("esri.views.3d.webgl-engine.materials.RibbonLineMaterial");var L;(function(fa){fa[fa.LEFT_JOIN_START=-2]="LEFT_JOIN_START";fa[fa.LEFT_JOIN_END=-1]="LEFT_JOIN_END";fa[fa.LEFT_CAP_START=-4]="LEFT_CAP_START";
fa[fa.LEFT_CAP_END=-5]="LEFT_CAP_END";fa[fa.RIGHT_JOIN_START=2]="RIGHT_JOIN_START";fa[fa.RIGHT_JOIN_END=1]="RIGHT_JOIN_END";fa[fa.RIGHT_CAP_START=4]="RIGHT_CAP_START";fa[fa.RIGHT_CAP_END=5]="RIGHT_CAP_END"})(L||(L={}));q=function(fa){function pa(R){R=fa.call(this,R,P)||this;R._vertexAttributeLocations=D.ribbonVertexAttributeLocations;R.techniqueConfig=new D.RibbonLineTechniqueConfiguration;R.layout=R.createLayout();return R}a._inheritsLoose(pa,fa);var X=pa.prototype;X.isClosed=function(R,Y){return this.parameters.isClosed?
Y?2<Y.length:6<R.length:!1};X.dispose=function(){};X.getPassParameters=function(){return this.parameters};X.getTechniqueConfig=function(R,Y){this.techniqueConfig.output=R;this.techniqueConfig.draped=Y.slot===B.RenderSlot.DRAPED_MATERIAL;R=g.isSome(this.parameters.stipplePattern);this.techniqueConfig.stippleEnabled=R;this.techniqueConfig.stippleOffColorEnabled=R&&g.isSome(this.parameters.stippleOffColor);this.techniqueConfig.stippleScaleWithLineWidth=R&&this.parameters.stippleScaleWithLineWidth;this.techniqueConfig.stipplePreferContinuous=
R&&this.parameters.stipplePreferContinuous;this.techniqueConfig.slicePlaneEnabled=this.parameters.slicePlaneEnabled;this.techniqueConfig.sceneHasOcludees=this.parameters.sceneHasOcludees;this.techniqueConfig.roundJoins="round"===this.parameters.join;this.techniqueConfig.capType=this.parameters.cap;this.techniqueConfig.transparent=this.parameters.transparent;this.techniqueConfig.polygonOffset=this.parameters.polygonOffset;this.techniqueConfig.writeDepth=this.parameters.writeDepth;this.techniqueConfig.vvColor=
this.parameters.vvColorEnabled;this.techniqueConfig.vvOpacity=this.parameters.vvOpacityEnabled;this.techniqueConfig.vvSize=this.parameters.vvSizeEnabled;this.techniqueConfig.innerColorEnabled=0<this.parameters.innerWidth&&g.isSome(this.parameters.innerColor);this.techniqueConfig.falloffEnabled=0<this.parameters.falloff;this.techniqueConfig.occluder=this.parameters.renderOccluded===I.RenderOccludedFlag.OccludeAndTransparentStencil;this.techniqueConfig.transparencyPassType=Y.transparencyPassType;this.techniqueConfig.multipassTerrainEnabled=
Y.multipassTerrainEnabled;this.techniqueConfig.cullAboveGround=Y.cullAboveGround;this.techniqueConfig.wireframe=this.parameters.wireframe;return this.techniqueConfig};X.intersect=function(R,Y,ha,la,ra,ca,ea,ia,ja){g.isSome(ja)?this._intersectDrapedLineGeometry(R,la,ja,ca,ea):this._intersectLineGeometry(R,Y,ha,la,ea)};X._intersectDrapedLineGeometry=function(R,Y,ha,la,ra){if(Y.options.selectionMode){Y=R.vertexAttributes.get(J.VertexAttribute.POSITION).data;var ca=R.vertexAttributes.get(J.VertexAttribute.SIZE),
ea=this.parameters.width;this.parameters.vvSizeEnabled?(ca=R.vertexAttributes.get(J.VertexAttribute.SIZEFEATUREATTRIBUTE).data[0],ea*=p.clamp(this.parameters.vvSizeOffset[0]+ca*this.parameters.vvSizeFactor[0],this.parameters.vvSizeMinSize[0],this.parameters.vvSizeMaxSize[0])):ca&&(ea*=ca.data[0]);ca=la[0];la=la[1];R=(ea/2+4)*R.screenToWorldRatio;ea=Number.MAX_VALUE;var ia=0;for(let wa=0;wa<Y.length-5;wa+=3){var ja=Y[wa],ua=Y[wa+1],ya=ca-ja,ma=la-ua;ja=Y[wa+3]-ja;ua=Y[wa+4]-ua;const Ea=p.clamp((ja*
ya+ua*ma)/(ja*ja+ua*ua),0,1);ya=ja*Ea-ya;ma=ua*Ea-ma;ma=ya*ya+ma*ma;ma<ea&&(ea=ma,ia=wa/3)}ea<R*R&&ra(ha.dist,ha.normal,ia,!1)}};X._intersectLineGeometry=function(R,Y,ha,la,ra){if(la.options.selectionMode&&!k.isInstanceHidden(Y))if(K.isTranslationMatrix(ha)){var ca=R.vertexAttributes,ea=ca.get(J.VertexAttribute.POSITION).data;Y=this.parameters.width;if(this.parameters.vvSizeEnabled){var ia=ca.get(J.VertexAttribute.SIZEFEATUREATTRIBUTE).data[0];Y*=p.clamp(this.parameters.vvSizeOffset[0]+ia*this.parameters.vvSizeFactor[0],
this.parameters.vvSizeMinSize[0],this.parameters.vvSizeMaxSize[0])}else ca.has(J.VertexAttribute.SIZE)&&(Y*=ca.get(J.VertexAttribute.SIZE).data[0]);var ja=la.camera,ua=U;d.copy(ua,la.point);ia=Y*ja.pixelRatio/2+4*ja.pixelRatio;f.set(aa[0],ua[0]-ia,ua[1]+ia,0);f.set(aa[1],ua[0]+ia,ua[1]+ia,0);f.set(aa[2],ua[0]+ia,ua[1]-ia,0);f.set(aa[3],ua[0]-ia,ua[1]-ia,0);for(Y=0;4>Y;Y++)if(!ja.unprojectFromRenderScreen(aa[Y],da[Y]))return;w.fromPoints(ja.eye,da[0],da[1],na);w.fromPoints(ja.eye,da[1],da[2],va);w.fromPoints(ja.eye,
da[2],da[3],ta);w.fromPoints(ja.eye,da[3],da[0],ka);var ya=Number.MAX_VALUE;Y=0;R=z(this.parameters,ca,R.indices)?ea.length-2:ea.length-5;for(ca=0;ca<R;ca+=3){O[0]=ea[ca]+ha[12];O[1]=ea[ca+1]+ha[13];O[2]=ea[ca+2]+ha[14];var ma=(ca+3)%ea.length;T[0]=ea[ma]+ha[12];T[1]=ea[ma+1]+ha[13];T[2]=ea[ma+2]+ha[14];if(!(0>w.signedDistance(na,O)&&0>w.signedDistance(na,T)||0>w.signedDistance(va,O)&&0>w.signedDistance(va,T)||0>w.signedDistance(ta,O)&&0>w.signedDistance(ta,T)||0>w.signedDistance(ka,O)&&0>w.signedDistance(ka,
T))){ja.projectToRenderScreen(O,G);ja.projectToRenderScreen(T,A);if(0>G[2]&&0<A[2])f.subtract(W,O,T),ma=ja.frustum,ma=-w.signedDistance(ma[t.PlaneIndex.NEAR],O)/f.dot(W,w.normal(ma[t.PlaneIndex.NEAR])),f.scale(W,W,ma),f.add(O,O,W),ja.projectToRenderScreen(O,G);else if(0<G[2]&&0>A[2])f.subtract(W,T,O),ma=ja.frustum,ma=-w.signedDistance(ma[t.PlaneIndex.NEAR],T)/f.dot(W,w.normal(ma[t.PlaneIndex.NEAR])),f.scale(W,W,ma),f.add(T,T,W),ja.projectToRenderScreen(T,A);else if(0>G[2]&&0>A[2])continue;G[2]=0;
A[2]=0;ma=y.distance2(y.fromPoints(G,A,E),ua);ma<ya&&(ya=ma,f.copy(r,O),f.copy(e,T),Y=ca/3)}}ha=la.rayBegin;la=la.rayEnd;ya<ia*ia&&(ea=Number.MAX_VALUE,y.closestLineSegmentPoint(y.fromPoints(r,e,E),y.fromPoints(ha,la,N),V)&&(f.subtract(V,V,ha),ea=f.length(V),f.scale(V,V,1/ea),ea/=f.distance(ha,la)),ra(ea,V,Y,!1))}else h.error("intersection assumes a translation-only matrix")};X.computeAttachmentOrigin=function(R,Y){const ha=R.vertexAttributes;if(!ha)return null;R=R.indices;const la=ha.get(J.VertexAttribute.POSITION);
return x.computeAttachmentOriginLines(la,R?R.get(J.VertexAttribute.POSITION):null,R&&z(this.parameters,ha,R),Y)};X.createLayout=function(){const R=v.newLayout().vec3f(J.VertexAttribute.POSITION).f32(J.VertexAttribute.SUBDIVISIONFACTOR).vec2f(J.VertexAttribute.UV0).vec3f(J.VertexAttribute.AUXPOS1).vec3f(J.VertexAttribute.AUXPOS2);this.parameters.vvSizeEnabled?R.f32(J.VertexAttribute.SIZEFEATUREATTRIBUTE):R.f32(J.VertexAttribute.SIZE);this.parameters.vvColorEnabled?R.f32(J.VertexAttribute.COLORFEATUREATTRIBUTE):
R.vec4f(J.VertexAttribute.COLOR);this.parameters.vvOpacityEnabled&&R.f32(J.VertexAttribute.OPACITYFEATUREATTRIBUTE);return R};X.createBufferWriter=function(){return new S(this.layout,this.parameters)};X.requiresSlot=function(R,Y){if(R===B.RenderSlot.DRAPED_MATERIAL)return!0;if(this.parameters.renderOccluded===I.RenderOccludedFlag.OccludeAndTransparentStencil)return R===B.RenderSlot.OPAQUE_MATERIAL||R===B.RenderSlot.OCCLUDER_MATERIAL||R===B.RenderSlot.TRANSPARENT_OCCLUDER_MATERIAL;Y=H.outputFromPass(Y);
return Y===F.ShaderOutput.Color||Y===F.ShaderOutput.Alpha?R===(this.parameters.writeDepth?B.RenderSlot.TRANSPARENT_MATERIAL:B.RenderSlot.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL):R===B.RenderSlot.OPAQUE_MATERIAL};X.createGLMaterial=function(R){return R.output===F.ShaderOutput.Color||R.output===F.ShaderOutput.Alpha||R.output===F.ShaderOutput.Highlight||R.output===F.ShaderOutput.Depth?new M(R):null};X.validateParameters=function(R){"miter"!==R.join&&(R.miterLimit=0);this._requiresTransparent(R)&&(R.transparent=
!0)};X._requiresTransparent=function(R){return!!(1>(R.color&&R.color[3])||0<R.innerWidth&&this._colorRequiresTransparent(R.innerColor)||R.stipplePattern&&this._colorRequiresTransparent(R.stippleOffColor)||0<R.falloff)};X._colorRequiresTransparent=function(R){return g.isSome(R)&&1>R[3]&&0<R[3]};return pa}(I.Material);let M=function(fa){function pa(){return fa.apply(this,arguments)||this}a._inheritsLoose(pa,fa);var X=pa.prototype;X.updateParameters=function(R){return this.ensureTechnique(D.RibbonLineTechnique,
R)};X._updateOccludeeState=function(R){R.hasOccludees!==this._material.parameters.sceneHasOcludees&&this._material.setParameters({sceneHasOcludees:R.hasOccludees})};X.beginSlot=function(R){this._output!==F.ShaderOutput.Color&&this._output!==F.ShaderOutput.Alpha||this._updateOccludeeState(R);return this.updateParameters(R)};X.bind=function(R,Y){Y.bindPass(this._material.getPassParameters(),R)};return pa}(u);const P={width:0,color:[1,1,1,1],join:"miter",cap:C.CapType.BUTT,miterLimit:5,writeDepth:!0,
polygonOffset:!1,stipplePattern:null,stippleOffColor:null,stippleScaleWithLineWidth:!1,stipplePreferContinuous:!0,slicePlaneEnabled:!1,vvFastUpdate:!1,transparent:!1,isClosed:!1,falloff:0,innerWidth:0,innerColor:null,sceneHasOcludees:!1,wireframe:!1,...I.DefaultMaterialParameters,...c.VisualVariableDefaultMaterialParameters};let S=function(){function fa(X,R){this.parameters=R;this.numJoinSubdivisions=0;this.vertexBufferLayout=X;X=R.stipplePattern?1:0;switch(this.parameters.join){case "miter":case "bevel":this.numJoinSubdivisions=
X;break;case "round":this.numJoinSubdivisions=C.NUM_ROUND_JOIN_SUBDIVISIONS+X}}var pa=fa.prototype;pa._isClosed=function(X){return z(this.parameters,X.vertexAttributes,X.indices)};pa.allocate=function(X){return this.vertexBufferLayout.createBuffer(X)};pa.elementCount=function(X){var R=X.indices.get(J.VertexAttribute.POSITION).length/2+1;X=this._isClosed(X);R=(X?2:4)+((X?R:R-1)-(X?0:1))*(2*this.numJoinSubdivisions+4);R+=2;this.parameters.wireframe&&(R=2+4*(R-2));return R};pa.write=function(X,R,Y,ha){var la;
const ra=Q,ca=Z,ea=ba,ia=R.vertexAttributes.get(J.VertexAttribute.POSITION).data;var ja=R.indices&&R.indices.get(J.VertexAttribute.POSITION);const ua=null==(la=R.vertexAttributes.get(J.VertexAttribute.DISTANCETOSTART))?void 0:la.data;ja&&ja.length!==2*(ia.length/3-1)&&console.warn("RibbonLineMaterial does not support indices");let ya=1,ma=0;this.parameters.vvSizeEnabled?ma=R.vertexAttributes.get(J.VertexAttribute.SIZEFEATUREATTRIBUTE).data[0]:R.vertexAttributes.has(J.VertexAttribute.SIZE)&&(ya=R.vertexAttributes.get(J.VertexAttribute.SIZE).data[0]);
let wa=[1,1,1,1],Ea=0;this.parameters.vvColorEnabled?Ea=R.vertexAttributes.get(J.VertexAttribute.COLORFEATUREATTRIBUTE).data[0]:R.vertexAttributes.has(J.VertexAttribute.COLOR)&&(wa=R.vertexAttributes.get(J.VertexAttribute.COLOR).data);let Ha=0;this.parameters.vvOpacityEnabled&&(Ha=R.vertexAttributes.get(J.VertexAttribute.OPACITYFEATUREATTRIBUTE).data[0]);la=ia.length/3;X=X.transformation;const qa=new Float32Array(Y.buffer);ja=this.vertexBufferLayout.stride/4;let oa=ha*ja;ha=oa;let xa=0;const Ga=ua?
(sa,Aa,Ba)=>xa=ua[Ba]:(sa,Aa,Ba)=>xa+=f.distance(sa,Aa),za=(sa,Aa,Ba,Ia,Ja,Ka,La)=>{qa[oa++]=Aa[0];qa[oa++]=Aa[1];qa[oa++]=Aa[2];qa[oa++]=Ia;qa[oa++]=La;qa[oa++]=Ja;qa[oa++]=sa[0];qa[oa++]=sa[1];qa[oa++]=sa[2];qa[oa++]=Ba[0];qa[oa++]=Ba[1];qa[oa++]=Ba[2];this.parameters.vvSizeEnabled?qa[oa++]=ma:qa[oa++]=ya;this.parameters.vvColorEnabled?qa[oa++]=Ea:(sa=Math.min(4*Ka,wa.length-4),qa[oa++]=wa[sa+0],qa[oa++]=wa[sa+1],qa[oa++]=wa[sa+2],qa[oa++]=wa[sa+3]);this.parameters.vvOpacityEnabled&&(qa[oa++]=Ha)};
oa+=ja;f.set(ca,ia[0],ia[1],ia[2]);X&&f.transformMat4(ca,ca,X);if(R=this._isClosed(R)){var Ca=ia.length-3;f.set(ra,ia[Ca],ia[Ca+1],ia[Ca+2]);X&&f.transformMat4(ra,ra,X)}else f.set(ea,ia[3],ia[4],ia[5]),X&&f.transformMat4(ea,ea,X),za(ca,ca,ea,1,L.LEFT_CAP_START,0,0),za(ca,ca,ea,1,L.RIGHT_CAP_START,0,0),f.copy(ra,ca),f.copy(ca,ea);Ca=R?0:1;const Fa=R?la:la-1;for(let sa=Ca;sa<Fa;sa++){var Da=(sa+1)%la*3;f.set(ea,ia[Da+0],ia[Da+1],ia[Da+2]);X&&f.transformMat4(ea,ea,X);Ga(ra,ca,sa);za(ra,ca,ea,0,L.LEFT_JOIN_END,
sa,xa);za(ra,ca,ea,0,L.RIGHT_JOIN_END,sa,xa);Da=this.numJoinSubdivisions;for(let Aa=0;Aa<Da;++Aa){const Ba=(Aa+1)/(Da+1);za(ra,ca,ea,Ba,L.LEFT_JOIN_END,sa,xa);za(ra,ca,ea,Ba,L.RIGHT_JOIN_END,sa,xa)}za(ra,ca,ea,1,L.LEFT_JOIN_START,sa,xa);za(ra,ca,ea,1,L.RIGHT_JOIN_START,sa,xa);f.copy(ra,ca);f.copy(ca,ea)}R?(f.set(ea,ia[3],ia[4],ia[5]),X&&f.transformMat4(ea,ea,X),xa=Ga(ra,ca,Fa),za(ra,ca,ea,0,L.LEFT_JOIN_END,Ca,xa),za(ra,ca,ea,0,L.RIGHT_JOIN_END,Ca,xa)):(xa=Ga(ra,ca,Fa),za(ra,ca,ca,0,L.LEFT_CAP_END,
Fa,xa),za(ra,ca,ca,0,L.RIGHT_CAP_END,Fa,xa));n(qa,ha+ja,qa,ha,ja);oa=n(qa,oa-ja,qa,oa,ja);this.parameters.wireframe&&this._addWireframeVertices(Y,ha,oa,ja)};pa._addWireframeVertices=function(X,R,Y,ha){const la=new Float32Array(X.buffer,Y*Float32Array.BYTES_PER_ELEMENT);X=new Float32Array(X.buffer,R*Float32Array.BYTES_PER_ELEMENT,Y-R);R=0;for(Y=0;Y<X.length-1;Y+=2*ha)R=n(X,Y,la,R,ha),R=n(X,Y+2*ha,la,R,ha),R=n(X,Y+1*ha,la,R,ha),R=n(X,Y+2*ha,la,R,ha),R=n(X,Y+1*ha,la,R,ha),R=n(X,Y+3*ha,la,R,ha)};return fa}();
const O=l.create(),T=l.create(),W=l.create(),V=l.create(),U=l.create(),G=m.createRenderScreenPointArray3(),A=m.createRenderScreenPointArray3(),r=l.create(),e=l.create(),E=y.create(),N=y.create(),Q=l.create(),Z=l.create(),ba=l.create(),aa=[m.createRenderScreenPointArray3(),m.createRenderScreenPointArray3(),m.createRenderScreenPointArray3(),m.createRenderScreenPointArray3()],da=[l.create(),l.create(),l.create(),l.create()],na=w.create(),va=w.create(),ta=w.create(),ka=w.create();b.RibbonLineMaterial=
q;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/support/buffer/InterleavedLayout":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../geometry/support/buffer/BufferView","../../../../geometry/support/buffer/types"],function(b,a,q,p){let g=function(){function d(l,t){this.layout=l;this.buffer="number"===typeof t?new ArrayBuffer(t*l.stride):t;for(const y of l.fieldNames)t=l.fields.get(y),this[y]=new t.constructor(this.buffer,t.offset,this.stride)}
var f=d.prototype;f.getField=function(l,t){return(l=this[l])&&l.elementCount===t.ElementCount&&l.elementType===t.ElementType?l:null};f.slice=function(l,t){return new d(this.layout,this.buffer.slice(l*this.stride,t*this.stride))};f.copyFrom=function(l,t,y,w){const v=this.stride;0===v%4?(l=new Uint32Array(l.buffer,t*v,w*v/4),(new Uint32Array(this.buffer,y*v,w*v/4)).set(l)):(l=new Uint8Array(l.buffer,t*v,w*v),(new Uint8Array(this.buffer,y*v,w*v)).set(l))};a._createClass(d,[{key:"stride",get:function(){return this.layout.stride}},
{key:"count",get:function(){return this.buffer.byteLength/this.stride}},{key:"byteLength",get:function(){return this.buffer.byteLength}}]);return d}(),m=function(){function d(){this.stride=0;this.fields=new Map;this.fieldNames=[]}var f=d.prototype;f.vec2f=function(l,t){this._appendField(l,q.BufferViewVec2f,t);return this};f.vec2f64=function(l,t){this._appendField(l,q.BufferViewVec2f64,t);return this};f.vec3f=function(l,t){this._appendField(l,q.BufferViewVec3f,t);return this};f.vec3f64=function(l,
t){this._appendField(l,q.BufferViewVec3f64,t);return this};f.vec4f=function(l,t){this._appendField(l,q.BufferViewVec4f,t);return this};f.vec4f64=function(l,t){this._appendField(l,q.BufferViewVec4f64,t);return this};f.mat3f=function(l,t){this._appendField(l,q.BufferViewMat3f,t);return this};f.mat3f64=function(l,t){this._appendField(l,q.BufferViewMat3f64,t);return this};f.mat4f=function(l,t){this._appendField(l,q.BufferViewMat4f,t);return this};f.mat4f64=function(l,t){this._appendField(l,q.BufferViewMat4f64,
t);return this};f.vec4u8=function(l,t){this._appendField(l,q.BufferViewVec4u8,t);return this};f.f32=function(l,t){this._appendField(l,q.BufferViewFloat,t);return this};f.f64=function(l,t){this._appendField(l,q.BufferViewFloat64,t);return this};f.u8=function(l,t){this._appendField(l,q.BufferViewUint8,t);return this};f.u16=function(l,t){this._appendField(l,q.BufferViewUint16,t);return this};f.i8=function(l,t){this._appendField(l,q.BufferViewInt8,t);return this};f.vec2i8=function(l,t){this._appendField(l,
q.BufferViewVec2i8,t);return this};f.vec2i16=function(l,t){this._appendField(l,q.BufferViewVec2i16,t);return this};f.vec2u8=function(l,t){this._appendField(l,q.BufferViewVec2u8,t);return this};f.vec4u16=function(l,t){this._appendField(l,q.BufferViewVec4u16,t);return this};f.u32=function(l,t){this._appendField(l,q.BufferViewUint32,t);return this};f._appendField=function(l,t,y){const w=t.ElementCount*p.elementTypeSize(t.ElementType);this.fields.set(l,{size:w,constructor:t,offset:this.stride,optional:y});
this.stride+=w;this.fieldNames.push(l)};f.alignTo=function(l){this.stride=Math.floor((this.stride+l-1)/l)*l;return this};f.hasField=function(l){return 0<=this.fieldNames.indexOf(l)};f.createBuffer=function(l){return new g(this,l)};f.createView=function(l){return new g(this,l)};f.clone=function(){const l=new d;l.stride=this.stride;l.fields=new Map;this.fields.forEach((t,y)=>l.fields.set(y,t));l.fieldNames=this.fieldNames.slice();l.BufferType=this.BufferType;return l};return d}();b.InterleavedBuffer=
g;b.InterleavedLayout=m;b.newLayout=function(){return new m};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/geometry/support/buffer/BufferView":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ./internals/Mat3 ./internals/Mat4 ./internals/Scalar ./internals/Vec2 ./internals/Vec3 ./internals/Vec4".split(" "),function(b,a,q,p,g,m,d,f){let l=function(A){function r(e,E=0,N,Q){e=A.call(this,Float32Array,e,E,N,Q)||this;e.elementType="f32";return e}a._inheritsLoose(r,A);r.fromTypedArray=
function(e,E){return new r(e.buffer,e.byteOffset,E,e.byteOffset+e.byteLength)};return r}(g.BufferViewScalarImpl);l.ElementType="f32";let t=function(A){function r(e,E=0,N,Q){e=A.call(this,Float32Array,e,E,N,Q)||this;e.elementType="f32";return e}a._inheritsLoose(r,A);r.prototype.slice=function(e,E){return this.sliceBuffer(r,e,E)};r.fromTypedArray=function(e,E){return new r(e.buffer,e.byteOffset,E,e.byteOffset+e.byteLength)};return r}(m.BufferViewVec2Impl);t.ElementType="f32";let y=function(A){function r(e,
E=0,N,Q){e=A.call(this,Float32Array,e,E,N,Q)||this;e.elementType="f32";return e}a._inheritsLoose(r,A);r.prototype.slice=function(e,E){return this.sliceBuffer(r,e,E)};r.fromTypedArray=function(e,E){return new r(e.buffer,e.byteOffset,E,e.byteOffset+e.byteLength)};return r}(d.BufferViewVec3Impl);y.ElementType="f32";let w=function(A){function r(e,E=0,N,Q){e=A.call(this,Float32Array,e,E,N,Q)||this;e.elementType="f32";return e}a._inheritsLoose(r,A);r.prototype.slice=function(e,E){return this.sliceBuffer(r,
e,E)};r.fromTypedArray=function(e,E){return new r(e.buffer,e.byteOffset,E,e.byteOffset+e.byteLength)};return r}(f.BufferViewVec4Impl);w.ElementType="f32";let v=function(A){function r(e,E=0,N,Q){e=A.call(this,Float32Array,e,E,N,Q)||this;e.elementType="f32";return e}a._inheritsLoose(r,A);r.prototype.slice=function(e,E){return this.sliceBuffer(r,e,E)};r.fromTypedArray=function(e,E){return new r(e.buffer,e.byteOffset,E,e.byteOffset+e.byteLength)};return r}(q.BufferViewMat3Impl);v.ElementType="f32";q=
function(A){function r(e,E=0,N,Q){e=A.call(this,Float64Array,e,E,N,Q)||this;e.elementType="f64";return e}a._inheritsLoose(r,A);r.prototype.slice=function(e,E){return this.sliceBuffer(r,e,E)};r.fromTypedArray=function(e,E){return new r(e.buffer,e.byteOffset,E,e.byteOffset+e.byteLength)};return r}(q.BufferViewMat3Impl);q.ElementType="f64";let F=function(A){function r(e,E=0,N,Q){e=A.call(this,Float32Array,e,E,N,Q)||this;e.elementType="f32";return e}a._inheritsLoose(r,A);r.prototype.slice=function(e,
E){return this.sliceBuffer(r,e,E)};r.fromTypedArray=function(e,E){return new r(e.buffer,e.byteOffset,E,e.byteOffset+e.byteLength)};return r}(p.BufferViewMat4Impl);F.ElementType="f32";p=function(A){function r(e,E=0,N,Q){e=A.call(this,Float64Array,e,E,N,Q)||this;e.elementType="f64";return e}a._inheritsLoose(r,A);r.prototype.slice=function(e,E){return this.sliceBuffer(r,e,E)};r.fromTypedArray=function(e,E){return new r(e.buffer,e.byteOffset,E,e.byteOffset+e.byteLength)};return r}(p.BufferViewMat4Impl);
p.ElementType="f64";let x=function(A){function r(e,E=0,N,Q){e=A.call(this,Float64Array,e,E,N,Q)||this;e.elementType="f64";return e}a._inheritsLoose(r,A);r.prototype.slice=function(e,E){return this.sliceBuffer(r,e,E)};r.fromTypedArray=function(e,E){return new r(e.buffer,e.byteOffset,E,e.byteOffset+e.byteLength)};return r}(g.BufferViewScalarImpl);x.ElementType="f64";let u=function(A){function r(e,E=0,N,Q){e=A.call(this,Float64Array,e,E,N,Q)||this;e.elementType="f64";return e}a._inheritsLoose(r,A);r.prototype.slice=
function(e,E){return this.sliceBuffer(r,e,E)};r.fromTypedArray=function(e,E){return new r(e.buffer,e.byteOffset,E,e.byteOffset+e.byteLength)};return r}(m.BufferViewVec2Impl);u.ElementType="f64";let H=function(A){function r(e,E=0,N,Q){e=A.call(this,Float64Array,e,E,N,Q)||this;e.elementType="f64";return e}a._inheritsLoose(r,A);r.prototype.slice=function(e,E){return this.sliceBuffer(r,e,E)};r.fromTypedArray=function(e,E){return new r(e.buffer,e.byteOffset,E,e.byteOffset+e.byteLength)};return r}(d.BufferViewVec3Impl);
H.ElementType="f64";let I=function(A){function r(e,E=0,N,Q){e=A.call(this,Float64Array,e,E,N,Q)||this;e.elementType="f64";return e}a._inheritsLoose(r,A);r.prototype.slice=function(e,E){return this.sliceBuffer(r,e,E)};r.fromTypedArray=function(e,E){return new r(e.buffer,e.byteOffset,E,e.byteOffset+e.byteLength)};return r}(f.BufferViewVec4Impl);I.ElementType="f64";let B=function(A){function r(e,E=0,N,Q){e=A.call(this,Uint8Array,e,E,N,Q)||this;e.elementType="u8";return e}a._inheritsLoose(r,A);r.prototype.slice=
function(e,E){return this.sliceBuffer(r,e,E)};r.fromTypedArray=function(e,E){return new r(e.buffer,e.byteOffset,E,e.byteOffset+e.byteLength)};return r}(g.BufferViewScalarImpl);B.ElementType="u8";let K=function(A){function r(e,E=0,N,Q){e=A.call(this,Uint8Array,e,E,N,Q)||this;e.elementType="u8";return e}a._inheritsLoose(r,A);r.prototype.slice=function(e,E){return this.sliceBuffer(r,e,E)};r.fromTypedArray=function(e,E){return new r(e.buffer,e.byteOffset,E,e.byteOffset+e.byteLength)};return r}(m.BufferViewVec2Impl);
K.ElementType="u8";let J=function(A){function r(e,E=0,N,Q){e=A.call(this,Uint8Array,e,E,N,Q)||this;e.elementType="u8";return e}a._inheritsLoose(r,A);r.prototype.slice=function(e,E){return this.sliceBuffer(r,e,E)};r.fromTypedArray=function(e,E){return new r(e.buffer,e.byteOffset,E,e.byteOffset+e.byteLength)};return r}(d.BufferViewVec3Impl);J.ElementType="u8";let c=function(A){function r(e,E=0,N,Q){e=A.call(this,Uint8Array,e,E,N,Q)||this;e.elementType="u8";return e}a._inheritsLoose(r,A);r.prototype.slice=
function(e,E){return this.sliceBuffer(r,e,E)};r.fromTypedArray=function(e,E){return new r(e.buffer,e.byteOffset,E,e.byteOffset+e.byteLength)};return r}(f.BufferViewVec4Impl);c.ElementType="u8";let k=function(A){function r(e,E=0,N,Q){e=A.call(this,Uint16Array,e,E,N,Q)||this;e.elementType="u16";return e}a._inheritsLoose(r,A);r.prototype.slice=function(e,E){return this.sliceBuffer(r,e,E)};r.fromTypedArray=function(e,E){return new r(e.buffer,e.byteOffset,E,e.byteOffset+e.byteLength)};return r}(g.BufferViewScalarImpl);
k.ElementType="u16";let C=function(A){function r(e,E=0,N,Q){e=A.call(this,Uint16Array,e,E,N,Q)||this;e.elementType="u16";return e}a._inheritsLoose(r,A);r.prototype.slice=function(e,E){return this.sliceBuffer(r,e,E)};r.fromTypedArray=function(e,E){return new r(e.buffer,e.byteOffset,E,e.byteOffset+e.byteLength)};return r}(m.BufferViewVec2Impl);C.ElementType="u16";let D=function(A){function r(e,E=0,N,Q){e=A.call(this,Uint16Array,e,E,N,Q)||this;e.elementType="u16";return e}a._inheritsLoose(r,A);r.prototype.slice=
function(e,E){return this.sliceBuffer(r,e,E)};r.fromTypedArray=function(e,E){return new r(e.buffer,e.byteOffset,E,e.byteOffset+e.byteLength)};return r}(d.BufferViewVec3Impl);D.ElementType="u16";let n=function(A){function r(e,E=0,N,Q){e=A.call(this,Uint16Array,e,E,N,Q)||this;e.elementType="u16";return e}a._inheritsLoose(r,A);r.prototype.slice=function(e,E){return this.sliceBuffer(r,e,E)};r.fromTypedArray=function(e,E){return new r(e.buffer,e.byteOffset,E,e.byteOffset+e.byteLength)};return r}(f.BufferViewVec4Impl);
n.ElementType="u16";let z=function(A){function r(e,E=0,N,Q){e=A.call(this,Uint32Array,e,E,N,Q)||this;e.elementType="u32";return e}a._inheritsLoose(r,A);r.prototype.slice=function(e,E){return this.sliceBuffer(r,e,E)};r.fromTypedArray=function(e,E){return new r(e.buffer,e.byteOffset,E,e.byteOffset+e.byteLength)};return r}(g.BufferViewScalarImpl);z.ElementType="u32";let h=function(A){function r(e,E=0,N,Q){e=A.call(this,Uint32Array,e,E,N,Q)||this;e.elementType="u32";return e}a._inheritsLoose(r,A);r.prototype.slice=
function(e,E){return this.sliceBuffer(r,e,E)};r.fromTypedArray=function(e,E){return new r(e.buffer,e.byteOffset,E,e.byteOffset+e.byteLength)};return r}(m.BufferViewVec2Impl);h.ElementType="u32";let L=function(A){function r(e,E=0,N,Q){e=A.call(this,Uint32Array,e,E,N,Q)||this;e.elementType="u32";return e}a._inheritsLoose(r,A);r.prototype.slice=function(e,E){return this.sliceBuffer(r,e,E)};r.fromTypedArray=function(e,E){return new r(e.buffer,e.byteOffset,E,e.byteOffset+e.byteLength)};return r}(d.BufferViewVec3Impl);
L.ElementType="u32";let M=function(A){function r(e,E=0,N,Q){e=A.call(this,Uint32Array,e,E,N,Q)||this;e.elementType="u32";return e}a._inheritsLoose(r,A);r.prototype.slice=function(e,E){return this.sliceBuffer(r,e,E)};r.fromTypedArray=function(e,E){return new r(e.buffer,e.byteOffset,E,e.byteOffset+e.byteLength)};return r}(f.BufferViewVec4Impl);M.ElementType="u32";let P=function(A){function r(e,E=0,N,Q){e=A.call(this,Int8Array,e,E,N,Q)||this;e.elementType="i8";return e}a._inheritsLoose(r,A);r.prototype.slice=
function(e,E){return this.sliceBuffer(r,e,E)};r.fromTypedArray=function(e,E){return new r(e.buffer,e.byteOffset,E,e.byteOffset+e.byteLength)};return r}(g.BufferViewScalarImpl);P.ElementType="i8";let S=function(A){function r(e,E=0,N,Q){e=A.call(this,Int8Array,e,E,N,Q)||this;e.elementType="i8";return e}a._inheritsLoose(r,A);r.prototype.slice=function(e,E){return this.sliceBuffer(r,e,E)};r.fromTypedArray=function(e,E){return new r(e.buffer,e.byteOffset,E,e.byteOffset+e.byteLength)};return r}(m.BufferViewVec2Impl);
S.ElementType="i8";let O=function(A){function r(e,E=0,N,Q){e=A.call(this,Int8Array,e,E,N,Q)||this;e.elementType="i8";return e}a._inheritsLoose(r,A);r.prototype.slice=function(e,E){return this.sliceBuffer(r,e,E)};r.fromTypedArray=function(e,E){return new r(e.buffer,e.byteOffset,E,e.byteOffset+e.byteLength)};return r}(d.BufferViewVec3Impl);O.ElementType="i8";let T=function(A){function r(e,E=0,N,Q){e=A.call(this,Int8Array,e,E,N,Q)||this;e.elementType="i8";return e}a._inheritsLoose(r,A);r.prototype.slice=
function(e,E){return this.sliceBuffer(r,e,E)};r.fromTypedArray=function(e,E){return new r(e.buffer,e.byteOffset,E,e.byteOffset+e.byteLength)};return r}(f.BufferViewVec4Impl);T.ElementType="i8";let W=function(A){function r(e,E=0,N,Q){e=A.call(this,Int16Array,e,E,N,Q)||this;e.elementType="i16";return e}a._inheritsLoose(r,A);r.prototype.slice=function(e,E){return this.sliceBuffer(r,e,E)};r.fromTypedArray=function(e,E){return new r(e.buffer,e.byteOffset,E,e.byteOffset+e.byteLength)};return r}(g.BufferViewScalarImpl);
W.ElementType="i16";let V=function(A){function r(e,E=0,N,Q){e=A.call(this,Int16Array,e,E,N,Q)||this;e.elementType="i16";return e}a._inheritsLoose(r,A);r.prototype.slice=function(e,E){return this.sliceBuffer(r,e,E)};r.fromTypedArray=function(e,E){return new r(e.buffer,e.byteOffset,E,e.byteOffset+e.byteLength)};return r}(m.BufferViewVec2Impl);V.ElementType="i16";let U=function(A){function r(e,E=0,N,Q){e=A.call(this,Int16Array,e,E,N,Q)||this;e.elementType="i16";return e}a._inheritsLoose(r,A);r.prototype.slice=
function(e,E){return this.sliceBuffer(r,e,E)};r.fromTypedArray=function(e,E){return new r(e.buffer,e.byteOffset,E,e.byteOffset+e.byteLength)};return r}(d.BufferViewVec3Impl);U.ElementType="i16";let G=function(A){function r(e,E=0,N,Q){e=A.call(this,Int16Array,e,E,N,Q)||this;e.elementType="i16";return e}a._inheritsLoose(r,A);r.prototype.slice=function(e,E){return this.sliceBuffer(r,e,E)};r.fromTypedArray=function(e,E){return new r(e.buffer,e.byteOffset,E,e.byteOffset+e.byteLength)};return r}(f.BufferViewVec4Impl);
G.ElementType="i16";g=function(A){function r(e,E=0,N,Q){e=A.call(this,Int32Array,e,E,N,Q)||this;e.elementType="i32";return e}a._inheritsLoose(r,A);r.prototype.slice=function(e,E){return this.sliceBuffer(r,e,E)};r.fromTypedArray=function(e,E){return new r(e.buffer,e.byteOffset,E,e.byteOffset+e.byteLength)};return r}(g.BufferViewScalarImpl);g.ElementType="i32";m=function(A){function r(e,E=0,N,Q){e=A.call(this,Int32Array,e,E,N,Q)||this;e.elementType="i32";return e}a._inheritsLoose(r,A);r.prototype.slice=
function(e,E){return this.sliceBuffer(r,e,E)};r.fromTypedArray=function(e,E){return new r(e.buffer,e.byteOffset,E,e.byteOffset+e.byteLength)};return r}(m.BufferViewVec2Impl);m.ElementType="i32";d=function(A){function r(e,E=0,N,Q){e=A.call(this,Int32Array,e,E,N,Q)||this;e.elementType="i32";return e}a._inheritsLoose(r,A);r.prototype.slice=function(e,E){return this.sliceBuffer(r,e,E)};r.fromTypedArray=function(e,E){return new r(e.buffer,e.byteOffset,E,e.byteOffset+e.byteLength)};return r}(d.BufferViewVec3Impl);
d.ElementType="i32";f=function(A){function r(e,E=0,N,Q){e=A.call(this,Int32Array,e,E,N,Q)||this;e.elementType="i32";return e}a._inheritsLoose(r,A);r.prototype.slice=function(e,E){return this.sliceBuffer(r,e,E)};r.fromTypedArray=function(e,E){return new r(e.buffer,e.byteOffset,E,e.byteOffset+e.byteLength)};return r}(f.BufferViewVec4Impl);f.ElementType="i32";b.BufferViewFloat=l;b.BufferViewFloat64=x;b.BufferViewInt16=W;b.BufferViewInt32=g;b.BufferViewInt8=P;b.BufferViewMat3f=v;b.BufferViewMat3f64=q;
b.BufferViewMat4f=F;b.BufferViewMat4f64=p;b.BufferViewUint16=k;b.BufferViewUint32=z;b.BufferViewUint8=B;b.BufferViewVec2f=t;b.BufferViewVec2f64=u;b.BufferViewVec2i16=V;b.BufferViewVec2i32=m;b.BufferViewVec2i8=S;b.BufferViewVec2u16=C;b.BufferViewVec2u32=h;b.BufferViewVec2u8=K;b.BufferViewVec3f=y;b.BufferViewVec3f64=H;b.BufferViewVec3i16=U;b.BufferViewVec3i32=d;b.BufferViewVec3i8=O;b.BufferViewVec3u16=D;b.BufferViewVec3u32=L;b.BufferViewVec3u8=J;b.BufferViewVec4f=w;b.BufferViewVec4f64=I;b.BufferViewVec4i16=
G;b.BufferViewVec4i32=f;b.BufferViewVec4i8=T;b.BufferViewVec4u16=n;b.BufferViewVec4u32=M;b.BufferViewVec4u8=c;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/geometry/support/buffer/internals/Mat3":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers"],function(b,a){let q=function(){function p(m,d,f=0,l,t){this.TypedArrayConstructor=m;this.elementCount=9;m=this.TypedArrayConstructor;void 0===l&&(l=9*m.BYTES_PER_ELEMENT);const y=0===d.byteLength?0:f;this.typedBuffer=
null==t?new m(d,y):new m(d,y,(t-f)/m.BYTES_PER_ELEMENT);this.typedBufferStride=l/m.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}var g=p.prototype;g.sliceBuffer=function(m,d,f=this.count-d){d=this.typedBuffer.byteOffset+d*this.stride;return new m(this.buffer,d,this.stride,d+f*this.stride)};g.getMat=function(m,d){m*=this.typedBufferStride;for(let f=0;9>f;f++)d[f]=this.typedBuffer[m++];
return d};g.setMat=function(m,d){m*=this.typedBufferStride;for(let f=0;9>f;f++)this.typedBuffer[m++]=d[f]};g.get=function(m,d){return this.typedBuffer[m*this.typedBufferStride+d]};g.set=function(m,d,f){this.typedBuffer[m*this.typedBufferStride+d]=f};g.copyFrom=function(m,d,f){const l=this.typedBuffer,t=d.typedBuffer;m*=this.typedBufferStride;d=f*d.typedBufferStride;for(f=0;9>f;++f)l[m++]=t[d++]};a._createClass(p,[{key:"buffer",get:function(){return this.typedBuffer.buffer}}]);return p}();q.ElementCount=
9;b.BufferViewMat3Impl=q;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/geometry/support/buffer/internals/Mat4":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers"],function(b,a){let q=function(){function p(m,d,f=0,l,t){this.TypedArrayConstructor=m;this.elementCount=16;m=this.TypedArrayConstructor;void 0===l&&(l=16*m.BYTES_PER_ELEMENT);const y=0===d.byteLength?0:f;this.typedBuffer=null==t?new m(d,y):new m(d,y,(t-f)/m.BYTES_PER_ELEMENT);this.typedBufferStride=l/m.BYTES_PER_ELEMENT;
this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}var g=p.prototype;g.sliceBuffer=function(m,d,f=this.count-d){d=this.typedBuffer.byteOffset+d*this.stride;return new m(this.buffer,d,this.stride,d+f*this.stride)};g.getMat=function(m,d){m*=this.typedBufferStride;for(let f=0;16>f;f++)d[f]=this.typedBuffer[m++];return d};g.setMat=function(m,d){m*=this.typedBufferStride;for(let f=0;16>f;f++)this.typedBuffer[m++]=
d[f]};g.get=function(m,d){return this.typedBuffer[m*this.typedBufferStride+d]};g.set=function(m,d,f){this.typedBuffer[m*this.typedBufferStride+d]=f};g.copyFrom=function(m,d,f){const l=this.typedBuffer,t=d.typedBuffer;m*=this.typedBufferStride;d=f*d.typedBufferStride;for(f=0;16>f;++f)l[m++]=t[d++]};a._createClass(p,[{key:"buffer",get:function(){return this.typedBuffer.buffer}}]);return p}();q.ElementCount=16;b.BufferViewMat4Impl=q;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/geometry/support/buffer/internals/Scalar":function(){define(["exports",
"../../../../chunks/_rollupPluginBabelHelpers"],function(b,a){let q=function(){function p(m,d,f=0,l,t){this.TypedArrayConstructor=m;this.elementCount=1;m=this.TypedArrayConstructor;void 0===l&&(l=m.BYTES_PER_ELEMENT);const y=0===d.byteLength?0:f;this.typedBuffer=null==t?new m(d,y):new m(d,y,(t-f)/m.BYTES_PER_ELEMENT);this.typedBufferStride=l/m.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}
var g=p.prototype;g.sliceBuffer=function(m,d,f=this.count-d){d=this.typedBuffer.byteOffset+d*this.stride;return new m(this.buffer,d,this.stride,d+f*this.stride)};g.get=function(m){return this.typedBuffer[m*this.typedBufferStride]};g.set=function(m,d){this.typedBuffer[m*this.typedBufferStride]=d};a._createClass(p,[{key:"buffer",get:function(){return this.typedBuffer.buffer}}]);return p}();q.ElementCount=1;b.BufferViewScalarImpl=q;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/geometry/support/buffer/internals/Vec2":function(){define(["exports",
"../../../../chunks/_rollupPluginBabelHelpers","../../../../chunks/vec2"],function(b,a,q){let p=function(){function g(d,f,l=0,t,y){this.TypedArrayConstructor=d;this.elementCount=2;d=this.TypedArrayConstructor;void 0===t&&(t=2*d.BYTES_PER_ELEMENT);const w=0===f.byteLength?0:l;this.typedBuffer=null==y?new d(f,w):new d(f,w,(y-l)/d.BYTES_PER_ELEMENT);this.typedBufferStride=t/d.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}
var m=g.prototype;m.sliceBuffer=function(d,f,l=this.count-f){f=this.typedBuffer.byteOffset+f*this.stride;return new d(this.buffer,f,this.stride,f+l*this.stride)};m.getVec=function(d,f){d*=this.typedBufferStride;return q.set(f,this.typedBuffer[d],this.typedBuffer[d+1])};m.setVec=function(d,f){d*=this.typedBufferStride;this.typedBuffer[d++]=f[0];this.typedBuffer[d]=f[1]};m.get=function(d,f){return this.typedBuffer[d*this.typedBufferStride+f]};m.set=function(d,f,l){this.typedBuffer[d*this.typedBufferStride+
f]=l};m.setValues=function(d,f,l){d*=this.typedBufferStride;this.typedBuffer[d++]=f;this.typedBuffer[d]=l};m.copyFrom=function(d,f,l){const t=this.typedBuffer,y=f.typedBuffer;d*=this.typedBufferStride;f=l*f.typedBufferStride;t[d++]=y[f++];t[d]=y[f]};a._createClass(g,[{key:"buffer",get:function(){return this.typedBuffer.buffer}}]);return g}();p.ElementCount=2;b.BufferViewVec2Impl=p;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/geometry/support/buffer/internals/Vec3":function(){define(["exports",
"../../../../chunks/_rollupPluginBabelHelpers","../../../../chunks/vec3"],function(b,a,q){let p=function(){function g(d,f,l=0,t,y){this.TypedArrayConstructor=d;this.elementCount=3;d=this.TypedArrayConstructor;void 0===t&&(t=3*d.BYTES_PER_ELEMENT);const w=0===f.byteLength?0:l;this.typedBuffer=null==y?new d(f,w):new d(f,w,(y-l)/d.BYTES_PER_ELEMENT);this.typedBufferStride=t/d.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}
var m=g.prototype;m.sliceBuffer=function(d,f,l=this.count-f){f=this.typedBuffer.byteOffset+f*this.stride;return new d(this.buffer,f,this.stride,f+l*this.stride)};m.getVec=function(d,f){d*=this.typedBufferStride;return q.set(f,this.typedBuffer[d],this.typedBuffer[d+1],this.typedBuffer[d+2])};m.setVec=function(d,f){d*=this.typedBufferStride;this.typedBuffer[d++]=f[0];this.typedBuffer[d++]=f[1];this.typedBuffer[d]=f[2]};m.get=function(d,f){return this.typedBuffer[d*this.typedBufferStride+f]};m.set=function(d,
f,l){this.typedBuffer[d*this.typedBufferStride+f]=l};m.setValues=function(d,f,l,t){d*=this.typedBufferStride;this.typedBuffer[d++]=f;this.typedBuffer[d++]=l;this.typedBuffer[d]=t};m.copyFrom=function(d,f,l){const t=this.typedBuffer,y=f.typedBuffer;d*=this.typedBufferStride;f=l*f.typedBufferStride;t[d++]=y[f++];t[d++]=y[f++];t[d]=y[f]};a._createClass(g,[{key:"buffer",get:function(){return this.typedBuffer.buffer}}]);return g}();p.ElementCount=3;b.BufferViewVec3Impl=p;Object.defineProperty(b,"__esModule",
{value:!0})})},"esri/geometry/support/buffer/internals/Vec4":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../chunks/vec4"],function(b,a,q){let p=function(){function g(d,f,l=0,t,y){this.TypedArrayConstructor=d;this.elementCount=4;d=this.TypedArrayConstructor;void 0===t&&(t=4*d.BYTES_PER_ELEMENT);const w=0===f.byteLength?0:l;this.typedBuffer=null==y?new d(f,w):new d(f,w,(y-l)/d.BYTES_PER_ELEMENT);this.typedBufferStride=t/d.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/
this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}var m=g.prototype;m.sliceBuffer=function(d,f,l=this.count-f){f=this.typedBuffer.byteOffset+f*this.stride;return new d(this.buffer,f,this.stride,f+l*this.stride)};m.getVec=function(d,f){d*=this.typedBufferStride;return q.set(f,this.typedBuffer[d++],this.typedBuffer[d++],this.typedBuffer[d++],this.typedBuffer[d])};m.setVec=function(d,f){d*=this.typedBufferStride;this.typedBuffer[d++]=f[0];this.typedBuffer[d++]=
f[1];this.typedBuffer[d++]=f[2];this.typedBuffer[d]=f[3]};m.get=function(d,f){return this.typedBuffer[d*this.typedBufferStride+f]};m.set=function(d,f,l){this.typedBuffer[d*this.typedBufferStride+f]=l};m.setValues=function(d,f,l,t,y){d*=this.typedBufferStride;this.typedBuffer[d++]=f;this.typedBuffer[d++]=l;this.typedBuffer[d++]=t;this.typedBuffer[d]=y};m.copyFrom=function(d,f,l){const t=this.typedBuffer,y=f.typedBuffer;d*=this.typedBufferStride;f=l*f.typedBufferStride;t[d++]=y[f++];t[d++]=y[f++];t[d++]=
y[f++];t[d]=y[f]};a._createClass(g,[{key:"buffer",get:function(){return this.typedBuffer.buffer}}]);return g}();p.ElementCount=4;b.BufferViewVec4Impl=p;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/geometry/support/buffer/types":function(){define(["exports","../../../core/has"],function(b,a){b.elementTypeSize=function(q){switch(q){case "u8":return 1;case "u16":return 2;case "u32":return 4;case "i8":return 1;case "i16":return 2;case "i32":return 4;case "f32":return 4;case "f64":return 8}};
b.isInteger=function(q){switch(q){case "u8":case "u16":case "u32":case "i8":case "i16":case "i32":return!0;case "f32":case "f64":return!1}};b.isSigned=function(q){switch(q){case "u8":case "u16":case "u32":return!1;case "i8":case "i16":case "i32":case "f32":case "f64":return!0}};b.maximumValue=function(q){switch(q){case "u8":return 255;case "u16":return 65535;case "u32":return 4294967295;case "i8":return 127;case "i16":return 32767;case "i32":return 2147483647;case "f32":return 3.402823E38;case "f64":return 1.79769E308}};
Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/ShaderOutputOptions":function(){define(["exports"],function(b){b.ShaderOutput=void 0;var a=b.ShaderOutput||(b.ShaderOutput={});a[a.Color=0]="Color";a[a.Depth=1]="Depth";a[a.Normal=2]="Normal";a[a.Shadow=3]="Shadow";a[a.Highlight=4]="Highlight";a[a.Draped=5]="Draped";a[a.Occlusion=6]="Occlusion";a[a.Alpha=7]="Alpha";a[a.COUNT=8]="COUNT";Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/GLMaterial":function(){define(["../../../../chunks/_rollupPluginBabelHelpers",
"./basicInterfaces"],function(b,a){return function(){function q(g){this._material=g.material;this._techniqueRep=g.techniqueRep;this._output=g.output}var p=q.prototype;p.dispose=function(){this._techniqueRep.release(this._technique)};p.ensureTechnique=function(g,m,d=this._output){return this._technique=this._techniqueRep.releaseAndAcquire(g,this._material.getTechniqueConfig(d,m),this._technique)};p.ensureResources=function(g){return a.ResourceState.LOADED};b._createClass(q,[{key:"technique",get:function(){return this._technique}}]);
return q}()})},"esri/views/3d/webgl-engine/lib/GLMaterials":function(){define(["exports","../../../../core/maybe","../core/shaderLibrary/ShaderOutputOptions","./basicInterfaces","./RenderPass"],function(b,a,q,p,g){function m(f){switch(f){default:case g.RenderPass.MATERIAL:return q.ShaderOutput.Color;case g.RenderPass.MATERIAL_ALPHA:return q.ShaderOutput.Alpha;case g.RenderPass.MATERIAL_DEPTH_SHADOWMAP_ALL:return q.ShaderOutput.Shadow;case g.RenderPass.MATERIAL_NORMAL:return q.ShaderOutput.Normal;
case g.RenderPass.MATERIAL_DEPTH:return q.ShaderOutput.Depth;case g.RenderPass.MATERIAL_HIGHLIGHT:return q.ShaderOutput.Highlight;case g.RenderPass.MATERIAL_DEPTH_SHADOWMAP_HIGHLIGHT:return q.ShaderOutput.Shadow;case g.RenderPass.MATERIAL_DEPTH_SHADOWMAP_DEFAULT:return q.ShaderOutput.Shadow}}let d=function(){function f(t,y){this._material=t;this._repository=y;this._map=new Map}var l=f.prototype;l.destroy=function(){this._map.forEach((t,y)=>{a.isSome(t)&&this._repository.release(this._material,m(y))})};
l.load=function(t,y){this._map.has(y)||this._map.set(y,this._repository.acquire(this._material,m(y)));y=this._map.get(y);if(a.isSome(y)){if(y.ensureResources(t)===p.ResourceState.LOADED)return y;this._repository.requestRender()}return null};return f}();b.GLMaterials=d;b.outputFromPass=m;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/Material":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ./ContentObject ./ContentObjectType ./DefaultVertexAttributeLocations ../materials/internal/MaterialUtil".split(" "),
function(b,a,q,p,g,m,d){p=function(f){function l(y,w){var v=f.call(this)||this;v.type=g.ContentObjectType.Material;v.supportsEdges=!1;v._visible=!0;v._renderPriority=0;v._insertOrder=0;v._vertexAttributeLocations=m.Default3D;v._parameters=d.copyParameters(y,w);v.validateParameters(v._parameters);return v}a._inheritsLoose(l,f);var t=l.prototype;t.dispose=function(){};t.update=function(y){return!1};t.setParameters=function(y){d.updateParameters(this._parameters,y)&&(this.validateParameters(this._parameters),
this.parametersChanged())};t.validateParameters=function(y){};t.shouldRender=function(y){return this.isVisible()&&this.isVisibleInPass(y.pass)&&0!==(this.renderOccluded&y.renderOccludedMask)};t.isVisibleInPass=function(y){return!0};t.isVisible=function(){return this._visible};t.parametersChanged=function(){q.isSome(this.repository)&&this.repository.materialChanged(this)};a._createClass(l,[{key:"parameters",get:function(){return this._parameters}},{key:"visible",get:function(){return this._visible},
set:function(y){y!==this._visible&&(this._visible=y,this.parametersChanged())}},{key:"renderOccluded",get:function(){return this.parameters.renderOccluded}},{key:"renderPriority",get:function(){return this._renderPriority},set:function(y){y!==this._renderPriority&&(this._renderPriority=y,this.parametersChanged())}},{key:"insertOrder",get:function(){return this._insertOrder},set:function(y){y!==this._insertOrder&&(this._insertOrder=y,this.parametersChanged())}},{key:"vertexAttributeLocations",get:function(){return this._vertexAttributeLocations}}]);
return l}(p.ContentObject);b.RenderOccludedFlag=void 0;(function(f){f[f.Occlude=1]="Occlude";f[f.Transparent=2]="Transparent";f[f.OccludeAndTransparent=4]="OccludeAndTransparent";f[f.OccludeAndTransparentStencil=8]="OccludeAndTransparentStencil";f[f.Opaque=16]="Opaque"})(b.RenderOccludedFlag||(b.RenderOccludedFlag={}));b.DefaultMaterialParameters={renderOccluded:b.RenderOccludedFlag.Occlude};b.Material=p;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/DefaultVertexAttributeLocations":function(){define(["exports",
"./VertexAttribute"],function(b,a){a=new Map([[a.VertexAttribute.POSITION,0],[a.VertexAttribute.NORMAL,1],[a.VertexAttribute.UV0,2],[a.VertexAttribute.COLOR,3],[a.VertexAttribute.SIZE,4],[a.VertexAttribute.TANGENT,4],[a.VertexAttribute.AUXPOS1,5],[a.VertexAttribute.SYMBOLCOLOR,5],[a.VertexAttribute.AUXPOS2,6],[a.VertexAttribute.FEATUREATTRIBUTE,6],[a.VertexAttribute.INSTANCEFEATUREATTRIBUTE,6],[a.VertexAttribute.INSTANCECOLOR,7],[a.VertexAttribute.MODEL,8],[a.VertexAttribute.MODELNORMAL,12],[a.VertexAttribute.MODELORIGINHI,
11],[a.VertexAttribute.MODELORIGINLO,15]]);b.Default3D=a;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/materials/internal/MaterialUtil":function(){define("exports ../../../../../core/mathUtils ../../../../../core/maybe ../../../../../chunks/vec3 ../../../../../chunks/vec3f64 ../../../../../geometry/support/aaBoundingBox ../../lib/basicInterfaces ../../lib/screenSizePerspectiveUtils ../../lib/Util ../../lib/VertexAttribute ../renderers/utils".split(" "),function(b,
a,q,p,g,m,d,f,l,t,y){function w(D,n,z,h,L,M){if(!q.isNone(D)){var P=x(n,z,J);m.setMin(K,D.getBBMin());m.setMax(K,D.getBBMax());q.isSome(L)&&L.applyToAabb(K);if(u(K,n,P,h)){const {primitiveIndices:S,indices:O,position:T}=D;P=S?S.length:O.length/3;if(1E3<P&&(D=D.getChildren(),void 0!==D)){for(P=0;8>P;++P)void 0!==D[P]&&w(D[P],n,z,h,L,M);return}v(n,z,0,P,O,T,S,L,M)}}}function v(D,n,z,h,L,M,P,S,O){if(P){var T=M.data;M=M.stride||M.size;var W=D[0],V=D[1];D=D[2];var U=n[0]-W,G=n[1]-V;for(n=n[2]-D;z<h;++z){var A=
P[z],r=3*A,e=M*L[r++],E=T[e++],N=T[e++],Q=T[e];e=M*L[r++];var Z=T[e++],ba=T[e++],aa=T[e];e=M*L[r];r=T[e++];var da=T[e++];e=T[e];q.isSome(S)&&([E,N,Q]=S.applyToVertex(E,N,Q,z),[Z,ba,aa]=S.applyToVertex(Z,ba,aa,z),[r,da,e]=S.applyToVertex(r,da,e,z));Z-=E;ba-=N;aa-=Q;r-=E;da-=N;e-=Q;var na=G*e-da*n,va=n*r-e*U;const ka=U*da-r*G;var ta=Z*na+ba*va+aa*ka;if(!(Math.abs(ta)<=Number.EPSILON)){E=W-E;N=V-N;Q=D-Q;na=E*na+N*va+Q*ka;if(0<ta){if(0>na||na>ta)continue}else if(0<na||na<ta)continue;va=N*aa-ba*Q;Q=Q*
Z-aa*E;N=E*ba-Z*N;E=U*va+G*Q+n*N;if(0<ta){if(0>E||na+E>ta)continue}else if(0<E||na+E<ta)continue;Q=(r*va+da*Q+e*N)/ta;0<=Q&&(Z=F(Z,ba,aa,r,da,e,c),O(Q,Z,A,!1))}}}else{P=M.data;T=M.stride||M.size;M=D[0];W=D[1];V=D[2];D=n[0]-M;U=n[1]-W;G=n[2]-V;for(let ka=z,fa=3*z;ka<h;++ka)if(r=T*L[fa++],N=P[r++],Q=P[r++],aa=P[r],r=T*L[fa++],n=P[r++],z=P[r++],A=P[r],r=T*L[fa++],Z=P[r++],ba=P[r++],r=P[r],q.isSome(S)&&([N,Q,aa]=S.applyToVertex(N,Q,aa,ka),[n,z,A]=S.applyToVertex(n,z,A,ka),[Z,ba,r]=S.applyToVertex(Z,ba,
r,ka)),n-=N,z-=Q,A-=aa,Z-=N,ba-=Q,r-=aa,e=U*r-ba*G,E=G*Z-r*D,ta=D*ba-Z*U,da=n*e+z*E+A*ta,!(Math.abs(da)<=Number.EPSILON)){N=M-N;Q=W-Q;aa=V-aa;e=N*e+Q*E+aa*ta;if(0<da){if(0>e||e>da)continue}else if(0<e||e<da)continue;E=Q*A-z*aa;aa=aa*n-A*N;Q=N*z-n*Q;N=D*E+U*aa+G*Q;if(0<da){if(0>N||e+N>da)continue}else if(0<N||e+N<da)continue;aa=(Z*E+ba*aa+r*Q)/da;0<=aa&&(n=F(n,z,A,Z,ba,r,c),O(aa,n,ka,!1))}}}function F(D,n,z,h,L,M,P){p.set(k,D,n,z);p.set(C,h,L,M);p.cross(P,k,C);p.normalize(P,P);return P}function x(D,
n,z){return p.set(z,1/(n[0]-D[0]),1/(n[1]-D[1]),1/(n[2]-D[2]))}function u(D,n,z,h){return H(D,n,z,h,Infinity)}function H(D,n,z,h,L){var M=(D[0]-h-n[0])*z[0],P=(D[3]+h-n[0])*z[0];let S=Math.min(M,P);M=Math.max(M,P);P=(D[1]-h-n[1])*z[1];const O=(D[4]+h-n[1])*z[1];M=Math.min(M,Math.max(P,O));if(0>M)return!1;S=Math.max(S,Math.min(P,O));if(S>M)return!1;P=(D[2]-h-n[2])*z[2];D=(D[5]+h-n[2])*z[2];M=Math.min(M,Math.max(P,D));if(0>M)return!1;S=Math.max(S,Math.min(P,D));return S>M?!1:S<L}function I(D,n){n=n?
I(n):{};for(const z in D){let h=D[z];h&&h.forEach&&(h=B(h));null==h&&z in n||(n[z]=h)}return n}function B(D){const n=[];D.forEach(z=>n.push(z));return n}const K=m.create(),J=g.create(),c=g.create(),k=g.create(),C=g.create();b.bindScreenSizePerspective=function(D,n,z){if(D){var h=D.parameters;n.setUniform4f(z,h.divisor,h.offset,h.minPixelSize,D.paddingPixelsOverride)}};b.colorMixModes={multiply:1,ignore:2,replace:3,tint:4};b.computeInvDir=x;b.computeNormal=F;b.copyParameters=I;b.intersectAabbInvDir=
u;b.intersectAabbInvDirBefore=H;b.intersectDrapedRenderLineGeometry=function(D,n,z,h,L,M){if(n.options.selectionMode){n=D.vertexAttributes.get(t.VertexAttribute.POSITION).data;var P=D.vertexAttributes.get(t.VertexAttribute.SIZE),S=h[0];h=h[1];D=(((P&&P.data[0])+L)/2+4)*D.screenToWorldRatio;L=Number.MAX_VALUE;P=0;for(let U=0;U<n.length-5;U+=3){var O=n[U],T=n[U+1],W=S-O,V=h-T;O=n[U+3]-O;T=n[U+4]-T;const G=a.clamp((O*W+T*V)/(O*O+T*T),0,1);W=O*G-W;V=T*G-V;V=W*W+V*V;V<L&&(L=V,P=U/3)}L<D*D&&M(z.dist,z.normal,
P,!1)}};b.intersectTriangleGeometry=function(D,n,z,h,L,M,P){y.isInstanceHidden(n)||(D.boundingInfo?(l.assert(D.primitiveType===d.PrimitiveType.Triangle),w(D.boundingInfo,h,L,z.tolerance,M,P)):(n=D.indices.get(t.VertexAttribute.POSITION),D=D.vertexAttributes.get(t.VertexAttribute.POSITION),v(h,L,0,n.length/3,n,D,void 0,M,P)))};b.intersectTriangles=v;b.updateParameters=function(D,n){let z=!1;for(const h in n){const L=n[h];void 0!==L&&(z=!0,Array.isArray(L)?D[h]=L.slice():D[h]=L)}return z};b.verticalOffsetAtDistance=
function(D,n,z,h,L){let M=(z.screenLength||0)*D.pixelRatio;L&&(M=f.scale(M,h,n,L));return a.clamp(M*Math.tan(.5*D.fovY)/(.5*D.fullHeight)*n,z.minWorldLength||0,null!=z.maxWorldLength?z.maxWorldLength:Infinity)};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/screenSizePerspectiveUtils":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/mathUtils","../../../ViewingMode"],function(b,a,q,p){function g(w,v,F){const x=F.parameters;
F=F.paddingPixelsOverride;t.scale=Math.min(x.divisor/(v-x.offset),1);t.factor=Math.abs(w*w*w);t.minPixelSize=x.minPixelSize;t.paddingPixels=F;return t}function m(w,v){return 0===w?v.minPixelSize:v.minPixelSize*(1+2*v.paddingPixels/w)}function d(w,v){return Math.max(q.lerp(w*v.scale,w,v.factor),m(w,v))}let f=function(){function w(F,x,u,H={camera:{distance:0,fovY:0},divisor:0,offset:0,minPixelSize:0,paddingPixels:0},I){this.viewingMode=F;this.description=x;this.ellipsoidRadius=u;this.parameters=H;this._paddingPixelsOverride=
I;this.viewingMode===p.ViewingMode.Local?(this.coverageCompensation=this._surfaceCoverageCompensationLocal,this.calculateCurvatureDependentParameters=this._calculateCurvatureDependentParametersLocal):(this.coverageCompensation=this._surfaceCoverageCompensationGlobal,this.calculateCurvatureDependentParameters=this._calculateCurvatureDependentParametersGlobal)}var v=w.prototype;v.update=function(F){if(this.parameters&&this.parameters.camera.fovY===F.fovY&&this.parameters.camera.distance===F.distance)return!1;
this._calculateParameters(F,this.ellipsoidRadius,this.parameters);return!0};v.overridePadding=function(F){return F!==this.paddingPixelsOverride?new w(this.viewingMode,this.description,this.ellipsoidRadius,this.parameters,F):this};v._calculateParameters=function(F,x,u){const {scaleStart:H,scaleFallOffRange:I,minPixelSize:B}=this.description,{fovY:K,distance:J}=F;var c=this.calculateCurvatureDependentParameters(F,x);x=this.coverageCompensation(F,x,c);const {tiltAngle:k,scaleFallOffFactor:C}=c,D=Math.sin(k)*
J,n=.5*Math.PI-k-K*(.5-H*x);c=D/Math.cos(n);x=(c-D/Math.cos(n+K*I*x)*C)/(1-C);u.camera.fovY=F.fovY;u.camera.distance=F.distance;u.offset=x;u.divisor=c-x;u.minPixelSize=B;return u};v._calculateCurvatureDependentParametersLocal=function(F,x,u=y){u.tiltAngle=this.description.curvatureDependent.min.tiltAngle;u.scaleFallOffFactor=this.description.curvatureDependent.min.scaleFallOffFactor;return u};v._calculateCurvatureDependentParametersGlobal=function(F,x,u=y){const H=this.description.curvatureDependent;
F=1+F.distance/x;F=Math.sqrt(F*F-1);const [I,B]=[H.min.curvature,H.max.curvature];F=q.clamp((F-I)/(B-I),0,1);const [K,J]=[H.min,H.max];u.tiltAngle=q.lerp(K.tiltAngle,J.tiltAngle,F);u.scaleFallOffFactor=q.lerp(K.scaleFallOffFactor,J.scaleFallOffFactor,F);return u};v._surfaceCoverageCompensationLocal=function(F,x,u){return(F.fovY-u.tiltAngle)/F.fovY};v._surfaceCoverageCompensationGlobal=function(F,x,u){const H=x*x;u=u.tiltAngle+.5*Math.PI;const {fovY:I,distance:B}=F;F=B*B+H-2*Math.cos(u)*B*x;const K=
Math.sqrt(F);return(Math.acos(Math.sqrt(F-H)/K)-Math.asin(x/(K/Math.sin(u)))+.5*I)/I};a._createClass(w,[{key:"paddingPixelsOverride",get:function(){return this._paddingPixelsOverride||this.parameters.paddingPixels}}]);return w}();const l={curvatureDependent:{min:{curvature:q.deg2rad(10),tiltAngle:q.deg2rad(12),scaleFallOffFactor:.5},max:{curvature:q.deg2rad(70),tiltAngle:q.deg2rad(40),scaleFallOffFactor:.8}},scaleStart:.3,scaleFallOffRange:.65,minPixelSize:0},t={scale:0,factor:0,minPixelSize:0,paddingPixels:0},
y={tiltAngle:0,scaleFallOffFactor:0};b.applyPrecomputedScaleFactor=function(w,v,F=[0,0]){v=Math.min(Math.max(v.scale,m(w[1],v)/Math.max(1E-5,w[1])),1);F[0]=w[0]*v;F[1]=w[1]*v;return F};b.applyScaleFactor=d;b.getLabelSettings=function(w,v){const {curvatureDependent:F,scaleStart:x,scaleFallOffRange:u}=l;return new f(w,{curvatureDependent:{min:{curvature:F.min.curvature,tiltAngle:F.min.tiltAngle,scaleFallOffFactor:.7},max:{curvature:F.max.curvature,tiltAngle:F.max.tiltAngle,scaleFallOffFactor:.95}},
scaleStart:x,scaleFallOffRange:u,minPixelSize:14},v)};b.getSettings=function(w,v){return new f(w,l,v)};b.precomputeScaleFactor=function(w,v,F,x){w=g(w,v,F);w.minPixelSize=0;w.paddingPixels=0;w=d(1,w);x.scale=w;x.factor=0;x.minPixelSize=F.parameters.minPixelSize;x.paddingPixels=F.paddingPixelsOverride};b.scale=function(w,v,F,x){return d(w,g(v,F,x))};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/materials/VisualVariableMaterialParameters":function(){define(["exports",
"../../../../chunks/mat3f64","../../../../chunks/vec3f32"],function(b,a,q){a={vvSizeEnabled:!1,vvSizeMinSize:q.fromValues(1,1,1),vvSizeMaxSize:q.fromValues(100,100,100),vvSizeOffset:q.fromValues(0,0,0),vvSizeFactor:q.fromValues(1,1,1),vvSizeValue:q.fromValues(1,1,1),vvColorEnabled:!1,vvColorValues:[0,0,0,0,0,0,0,0],vvColorColors:[1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],vvOpacityEnabled:!1,vvOpacityValues:[0,0,0,0,0,0,0,0],vvOpacityOpacities:[1,1,1,1,1,1,1,1],vvSymbolAnchor:[0,
0,0],vvSymbolRotationMatrix:a.create()};b.VisualVariableDefaultMaterialParameters=a;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/chunks/vec3f32":function(){define(["exports"],function(b){function a(){return new Float32Array(3)}function q(H){const I=new Float32Array(3);I[0]=H[0];I[1]=H[1];I[2]=H[2];return I}function p(H,I,B){const K=new Float32Array(3);K[0]=H;K[1]=I;K[2]=B;return K}function g(H,I){return new Float32Array(H,I,3)}function m(){return a()}function d(){return p(1,1,1)}function f(){return p(1,
0,0)}function l(){return p(0,1,0)}function t(){return p(0,0,1)}const y=a(),w=d(),v=f(),F=l(),x=t(),u=Object.freeze({__proto__:null,create:a,clone:q,fromValues:p,createView:g,zeros:m,ones:d,unitX:f,unitY:l,unitZ:t,ZEROS:y,ONES:w,UNIT_X:v,UNIT_Y:F,UNIT_Z:x});b.ONES=w;b.UNIT_X=v;b.UNIT_Y=F;b.UNIT_Z=x;b.ZEROS=y;b.clone=q;b.create=a;b.createView=g;b.fromValues=p;b.ones=d;b.unitX=f;b.unitY=l;b.unitZ=t;b.vec3f32=u;b.zeros=m})},"esri/chunks/RibbonLine.glsl":function(){define("exports ../views/3d/webgl-engine/core/shaderLibrary/ShaderOutputOptions ../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl ../views/3d/webgl-engine/core/shaderLibrary/attributes/RibbonVertexPosition.glsl ../views/3d/webgl-engine/core/shaderLibrary/output/OutputDepth.glsl ../views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl ../views/3d/webgl-engine/core/shaderLibrary/shading/LineStipple.glsl ../views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl ../views/3d/webgl-engine/core/shaderLibrary/shading/PiUtils.glsl ../views/3d/webgl-engine/core/shaderLibrary/util/AlphaDiscard.glsl ../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl ../views/3d/webgl-engine/core/shaderModules/interfaces ../views/3d/webgl-engine/core/shaderModules/ShaderBuilder ../views/3d/webgl-engine/lib/VertexAttribute".split(" "),
function(b,a,q,p,g,m,d,f,l,t,y,w,v,F){function x(H){const I=new v.ShaderBuilder,B=H.capType!==b.CapType.BUTT,K=H.capType===b.CapType.ROUND,J=H.stippleEnabled&&K,c=H.falloffEnabled||J,k=H.innerColorEnabled||K,C=H.stippleEnabled&&H.stippleScaleWithLineWidth||K,D=H.stippleEnabled&&H.stippleScaleWithLineWidth,n=H.stippleEnabled||K;I.include(l.PiUtils);I.include(p.RibbonVertexPosition,H);I.include(d.LineStipple,{...H,stippleRequiresStretchMeasure:!0});H.output===a.ShaderOutput.Depth&&I.include(g.OutputDepth,
H);I.vertex.uniforms.add("proj","mat4").add("view","mat4").add("nearFar","vec2").add("pixelRatio","float").add("miterLimit","float").add("screenSize","vec2").add("inverseProjectionMatrix","mat4");I.vertex.constants.add("LARGE_HALF_FLOAT","float",65500);I.attributes.add(F.VertexAttribute.POSITION,"vec3");I.attributes.add(F.VertexAttribute.SUBDIVISIONFACTOR,"float");I.attributes.add(F.VertexAttribute.UV0,"vec2");I.attributes.add(F.VertexAttribute.AUXPOS1,"vec3");I.attributes.add(F.VertexAttribute.AUXPOS2,
"vec3");I.varyings.add("vColor","vec4");I.varyings.add("vpos","vec3");I.varyings.add("linearDepth","float");H.multipassTerrainEnabled&&I.varyings.add("depth","float");C&&I.varyings.add("vLineWidth","float");D&&I.varyings.add("vLineSizeInv","float");k&&I.varyings.add("vLineDistance","float");c&&I.varyings.add("vLineDistanceNorm","float");H.falloffEnabled&&I.fragment.uniforms.add("falloff","float");H.innerColorEnabled&&(I.fragment.uniforms.add("innerColor","vec4"),I.fragment.uniforms.add("innerWidth",
"float"));K&&(I.varyings.add("vSegmentSDF","float"),I.varyings.add("vReverseSegmentSDF","float"));I.vertex.code.add(w.glsl`#define PERPENDICULAR(v) vec2(v.y, -v.x);
float interp(float ncp, vec4 a, vec4 b) {
return (-ncp - a.z) / (b.z - a.z);
}
vec2 rotate(vec2 v, float a) {
float s = sin(a);
float c = cos(a);
mat2 m = mat2(c, -s, s, c);
return m * v;
}`);I.vertex.code.add(w.glsl`vec4 projectAndScale(vec4 pos) {
vec4 posNdc = proj * pos;
posNdc.xy *= screenSize / posNdc.w;
return posNdc;
}`);I.vertex.code.add(w.glsl`
    void clipAndTransform(inout vec4 pos, inout vec4 prev, inout vec4 next, in bool isStartVertex) {
      float vnp = nearFar[0] * 0.99;

      if(pos.z > -nearFar[0]) {
        //current pos behind ncp --> we need to clip
        if (!isStartVertex) {
          if(prev.z < -nearFar[0]) {
            //previous in front of ncp
            pos = mix(prev, pos, interp(vnp, prev, pos));
            next = pos;
          } else {
            pos = vec4(0.0, 0.0, 0.0, 1.0);
          }
        } else {
          if(next.z < -nearFar[0]) {
            //next in front of ncp
            pos = mix(pos, next, interp(vnp, pos, next));
            prev = pos;
          } else {
            pos = vec4(0.0, 0.0, 0.0, 1.0);
          }
        }
      } else {
        //current position visible
        if (prev.z > -nearFar[0]) {
          //previous behind ncp
          prev = mix(pos, prev, interp(vnp, pos, prev));
        }
        if (next.z > -nearFar[0]) {
          //next behind ncp
          next = mix(next, pos, interp(vnp, next, pos));
        }
      }

      ${H.multipassTerrainEnabled?"depth \x3d pos.z;":""}
      linearDepth = (-pos.z - nearFar[0]) / (nearFar[1] - nearFar[0]);

      pos = projectAndScale(pos);
      next = projectAndScale(next);
      prev = projectAndScale(prev);
    }
  `);I.vertex.code.add(w.glsl`
  void main(void) {
    // unpack values from uv0.y
    bool isStartVertex = abs(abs(uv0.y)-3.0) == 1.0;

    float coverage = 1.0;

    // Check for special value of uv0.y which is used by the Renderer when graphics
    // are removed before the VBO is recompacted. If this is the case, then we just
    // project outside of clip space.
    if (uv0.y == 0.0) {
      // Project out of clip space
      gl_Position = vec4(1e038, 1e038, 1e038, 1.0);
    }
    else {
      bool isJoin = abs(uv0.y) < 3.0;

      float lineSize = getSize();
      float lineWidth = lineSize * pixelRatio;

      ${C?w.glsl`vLineWidth = lineWidth;`:""}
      ${D?w.glsl`vLineSizeInv = 1.0 / lineSize;`:""}

      // convert sub-pixel coverage to alpha
      if (lineWidth < 1.0) {
        coverage = lineWidth;
        lineWidth = 1.0;
      }else{
        // Ribbon lines cannot properly render non-integer sizes. Round width to integer size if
        // larger than one for better quality. Note that we do render < 1 pixels more or less correctly
        // so we only really care to round anything larger than 1.
        lineWidth = floor(lineWidth + 0.5);
      }

      vec4 pos  = view * vec4(position.xyz, 1.0);
      vec4 prev = view * vec4(auxpos1.xyz, 1.0);
      vec4 next = view * vec4(auxpos2.xyz, 1.0);

      clipAndTransform(pos, prev, next, isStartVertex);

      vec2 left = (pos.xy - prev.xy);
      vec2 right = (next.xy - pos.xy);

      float leftLen = length(left);
      float rightLen = length(right);
  `);n&&I.vertex.code.add(w.glsl`
      float isEndVertex = float(!isStartVertex);
      vec2 segmentOrigin = mix(pos.xy, prev.xy, isEndVertex);
      vec2 segment = mix(right, left, isEndVertex);
      ${K?w.glsl`vec2 segmentEnd = mix(next.xy, pos.xy, isEndVertex);`:""}
    `);I.vertex.code.add(w.glsl`left = (leftLen > 0.001) ? left/leftLen : vec2(0.0, 0.0);
right = (rightLen > 0.001) ? right/rightLen : vec2(0.0, 0.0);
vec2 capDisplacementDir = vec2(0, 0);
vec2 joinDisplacementDir = vec2(0, 0);
float displacementLen = lineWidth;
if (isJoin) {
bool isOutside = (left.x * right.y - left.y * right.x) * uv0.y > 0.0;
joinDisplacementDir = normalize(left + right);
joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);
if (leftLen > 0.001 && rightLen > 0.001) {
float nDotSeg = dot(joinDisplacementDir, left);
displacementLen /= length(nDotSeg * left - joinDisplacementDir);
if (!isOutside) {
displacementLen = min(displacementLen, min(leftLen, rightLen)/abs(nDotSeg));
}
}
if (isOutside && (displacementLen > miterLimit * lineWidth)) {`);H.roundJoins?I.vertex.code.add(w.glsl`
        vec2 startDir = leftLen < 0.001 ? right : left;
        startDir = PERPENDICULAR(startDir);

        vec2 endDir = rightLen < 0.001 ? left : right;
        endDir = PERPENDICULAR(endDir);

        float factor = ${H.stippleEnabled?w.glsl`min(1.0, subdivisionFactor * ${w.glsl.float(1.5)})`:w.glsl`subdivisionFactor`};

        float rotationAngle = acos(clamp(dot(startDir, endDir), -1.0, 1.0));
        joinDisplacementDir = rotate(startDir, -sign(uv0.y) * factor * rotationAngle);
      `):I.vertex.code.add(w.glsl`if (leftLen < 0.001) {
joinDisplacementDir = right;
}
else if (rightLen < 0.001) {
joinDisplacementDir = left;
}
else {
joinDisplacementDir = (isStartVertex || subdivisionFactor > 0.0) ? right : left;
}
joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);`);I.vertex.code.add(w.glsl`
        displacementLen = lineWidth;
      }
    } else {
      // CAP handling ---------------------------------------------------
      joinDisplacementDir = isStartVertex ? right : left;
      joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);

      ${B?w.glsl`capDisplacementDir = isStartVertex ? -right : left;`:""}
    }
  `);I.vertex.code.add(w.glsl`
    // Displacement (in pixels) caused by join/or cap
    vec2 dpos = joinDisplacementDir * sign(uv0.y) * displacementLen + capDisplacementDir * displacementLen;

    ${c||k?w.glsl`float lineDistNorm = sign(uv0.y) * pos.w;`:""}

    ${k?w.glsl`vLineDistance = lineWidth * lineDistNorm;`:""}
    ${c?w.glsl`vLineDistanceNorm = lineDistNorm;`:""}

    pos.xy += dpos;
  `);K&&I.vertex.code.add(w.glsl`vec2 segmentDir = normalize(segment);
vSegmentSDF = (isJoin && isStartVertex) ? LARGE_HALF_FLOAT : (dot(pos.xy - segmentOrigin, segmentDir) * pos.w) ;
vReverseSegmentSDF = (isJoin && !isStartVertex) ? LARGE_HALF_FLOAT : (dot(pos.xy - segmentEnd, -segmentDir) * pos.w);`);H.stippleEnabled&&(H.draped||I.vertex.code.add(w.glsl`vec3 segmentCenter = mix((auxpos2 + position) * 0.5, (position + auxpos1) * 0.5, isEndVertex);
float worldToScreenRatio = computeWorldToScreenRatio(segmentCenter);`),I.vertex.code.add(w.glsl`float segmentLengthScreenDouble = length(segment);
float segmentLengthScreen = segmentLengthScreenDouble * 0.5;
float discreteWorldToScreenRatio = discretizeWorldToScreenRatio(worldToScreenRatio);
float segmentLengthRender = length(mix(auxpos2 - position, position - auxpos1, isEndVertex));
vStipplePatternStretch = worldToScreenRatio / discreteWorldToScreenRatio;`),H.draped?I.vertex.code.add(w.glsl`float segmentLengthPseudoScreen = segmentLengthScreen / pixelRatio * discreteWorldToScreenRatio / worldToScreenRatio;
float startPseudoScreen = uv0.x * discreteWorldToScreenRatio - mix(0.0, segmentLengthPseudoScreen, isEndVertex);`):I.vertex.code.add(w.glsl`float startPseudoScreen = mix(uv0.x, uv0.x - segmentLengthRender, isEndVertex) * discreteWorldToScreenRatio;
float segmentLengthPseudoScreen = segmentLengthRender * discreteWorldToScreenRatio;`),I.vertex.code.add(w.glsl`
      float patternLength = ${H.stippleScaleWithLineWidth?"lineSize * ":""} stipplePatternPixelSize;

      // Compute the coordinates at both start and end of the line segment, because we need both to clamp to in the fragment shader
      vStippleDistanceLimits = computeStippleDistanceLimits(startPseudoScreen, segmentLengthPseudoScreen, segmentLengthScreen, patternLength);

      vStippleDistance = mix(vStippleDistanceLimits.x, vStippleDistanceLimits.y, isEndVertex);

      // Adjust the coordinate to the displaced position (the pattern is shortened/overextended on the in/outside of joins)
      if (segmentLengthScreenDouble >= 0.001) {
        // Project the actual vertex position onto the line segment. Note that the resulting factor is within [0..1] at the
        // original vertex positions, and slightly outside of that range at the displaced positions
        vec2 stippleDisplacement = pos.xy - segmentOrigin;
        float stippleDisplacementFactor = dot(segment, stippleDisplacement) / (segmentLengthScreenDouble * segmentLengthScreenDouble);

        // Apply this offset to the actual vertex coordinate (can be screen or pseudo-screen space)
        vStippleDistance += (stippleDisplacementFactor - isEndVertex) * (vStippleDistanceLimits.y - vStippleDistanceLimits.x);
      }

      // Cancel out perspective correct interpolation because we want this length the really represent the screen distance
      vStippleDistanceLimits *= pos.w;
      vStippleDistance *= pos.w;

      // Disable stipple distance limits on caps
      vStippleDistanceLimits = isJoin ?
                                 vStippleDistanceLimits :
                                 isStartVertex ?
                                  vec2(-1e038, vStippleDistanceLimits.y) :
                                  vec2(vStippleDistanceLimits.x, 1e038);
    `));I.vertex.code.add(w.glsl`
      // Convert back into NDC
      pos.xy = (pos.xy / screenSize) * pos.w;

      vColor = getColor();
      vColor.a *= coverage;

      ${H.wireframe&&!H.draped?"pos.z -\x3d 0.001 * pos.w;":""}

      // transform final position to camera space for slicing
      vpos = (inverseProjectionMatrix * pos).xyz;
      gl_Position = pos;
    }
  }
  `);H.multipassTerrainEnabled&&(I.fragment.include(m.ReadLinearDepth),I.include(f.multipassTerrainTest,H));I.include(q.Slice,H);I.fragment.uniforms.add("intrinsicColor","vec4");I.fragment.include(y.ColorConversion);I.fragment.code.add(w.glsl`
  void main() {
    discardBySlice(vpos);
    ${H.multipassTerrainEnabled?"terrainDepthTest(gl_FragCoord, depth);":""}
  `);H.wireframe?I.fragment.code.add(w.glsl`vec4 finalColor = vec4(1.0, 0.0, 1.0, 1.0);`):(K&&I.fragment.code.add(w.glsl`
      float sdf = min(vSegmentSDF, vReverseSegmentSDF);
      vec2 fragmentPosition = vec2(
        min(sdf, 0.0),
        vLineDistance
      ) * gl_FragCoord.w;

      float fragmentRadius = length(fragmentPosition);
      float fragmentCapSDF = (fragmentRadius - vLineWidth) * 0.5; // Divide by 2 to transform from double pixel scale
      float capCoverage = clamp(0.5 - fragmentCapSDF, 0.0, 1.0);

      if (capCoverage < ${w.glsl.float(t.symbolAlphaCutoff)}) {
        discard;
      }
    `),J?I.fragment.code.add(w.glsl`
      vec2 stipplePosition = vec2(
        min(getStippleSDF() * 2.0 - 1.0, 0.0),
        vLineDistanceNorm * gl_FragCoord.w
      );
      float stippleRadius = length(stipplePosition * vLineWidth);
      float stippleCapSDF = (stippleRadius - vLineWidth) * 0.5; // Divide by 2 to transform from double pixel scale
      float stippleCoverage = clamp(0.5 - stippleCapSDF, 0.0, 1.0);
      float stippleAlpha = step(${w.glsl.float(t.symbolAlphaCutoff)}, stippleCoverage);
      `):I.fragment.code.add(w.glsl`float stippleAlpha = getStippleAlpha();`),I.fragment.code.add(w.glsl`discardByStippleAlpha(stippleAlpha, stippleAlphaColorDiscard);
vec4 color = intrinsicColor * vColor;`),H.innerColorEnabled&&I.fragment.code.add(w.glsl`float distToInner = abs(vLineDistance * gl_FragCoord.w) - innerWidth;
float innerAA = clamp(0.5 - distToInner, 0.0, 1.0);
float innerAlpha = innerColor.a + color.a * (1.0 - innerColor.a);
color = mix(color, vec4(innerColor.rgb, innerAlpha), innerAA);`),I.fragment.code.add(w.glsl`vec4 finalColor = blendStipple(color, stippleAlpha);`),H.falloffEnabled&&I.fragment.code.add(w.glsl`finalColor.a *= pow(max(0.0, 1.0 - abs(vLineDistanceNorm * gl_FragCoord.w)), falloff);`));I.fragment.code.add(w.glsl`
    if (finalColor.a < ${w.glsl.float(t.symbolAlphaCutoff)}) {
      discard;
    }

    ${H.output===a.ShaderOutput.Alpha?w.glsl`gl_FragColor = vec4(finalColor.a);`:""}
    ${H.output===a.ShaderOutput.Color?w.glsl`gl_FragColor = highlightSlice(finalColor, vpos);`:""}
    ${H.output===a.ShaderOutput.Color&&H.oitEnabled?"gl_FragColor \x3d premultiplyAlpha(gl_FragColor);":""}
    ${H.output===a.ShaderOutput.Highlight?w.glsl`gl_FragColor = vec4(1.0);`:""}
    ${H.output===a.ShaderOutput.Depth?w.glsl`outputDepth(linearDepth);`:""}
  }
  `);return I}b.CapType=void 0;(function(H){H[H.BUTT=0]="BUTT";H[H.SQUARE=1]="SQUARE";H[H.ROUND=2]="ROUND";H[H.COUNT=3]="COUNT"})(b.CapType||(b.CapType={}));const u=Object.freeze({__proto__:null,NUM_ROUND_JOIN_SUBDIVISIONS:1,get CapType(){return b.CapType},build:x});b.NUM_ROUND_JOIN_SUBDIVISIONS=1;b.RibbonLineShader=u;b.build=x})},"esri/views/3d/webgl-engine/core/shaderLibrary/Slice.glsl":function(){define("exports ../../../../../core/maybe ../../../../../chunks/mat4 ../../../../../chunks/mat4f64 ../../../../../chunks/vec3 ../../../../../chunks/vec3f64 ../shaderModules/interfaces".split(" "),
function(b,a,q,p,g,m,d){function f(v,F,x,u){F.slicePlaneEnabled&&(a.isSome(x)?(g.copy(l,x.origin),g.copy(t,x.basis1),g.copy(y,x.basis2),a.isSome(u)&&a.isSome(u.origin)&&g.subtract(l,x.origin,u.origin),a.isSome(u)&&a.isSome(u.view)&&(F=a.isSome(u.origin)?q.translate(w,u.view,u.origin):u.view,g.add(t,t,l),g.add(y,y,l),g.transformMat4(l,l,F),g.transformMat4(t,t,F),g.transformMat4(y,y,F),g.subtract(t,t,l),g.subtract(y,y,l)),v.setUniform3fv("slicePlaneOrigin",l),v.setUniform3fv("slicePlaneBasis1",t),v.setUniform3fv("slicePlaneBasis2",
y)):(v.setUniform3fv("slicePlaneBasis1",m.ZEROS),v.setUniform3fv("slicePlaneBasis2",m.ZEROS),v.setUniform3fv("slicePlaneOrigin",m.ZEROS)))}const l=m.create(),t=m.create(),y=m.create(),w=p.create();b.Slice=function(v,F){if(F.slicePlaneEnabled){v.extensions.add("GL_OES_standard_derivatives");F.sliceEnabledForVertexPrograms&&(v.vertex.uniforms.add("slicePlaneOrigin","vec3"),v.vertex.uniforms.add("slicePlaneBasis1","vec3"),v.vertex.uniforms.add("slicePlaneBasis2","vec3"));v.fragment.uniforms.add("slicePlaneOrigin",
"vec3");v.fragment.uniforms.add("slicePlaneBasis1","vec3");v.fragment.uniforms.add("slicePlaneBasis2","vec3");var x=d.glsl`struct SliceFactors {
float front;
float side0;
float side1;
float side2;
float side3;
};
SliceFactors calculateSliceFactors(vec3 pos) {
vec3 rel = pos - slicePlaneOrigin;
vec3 slicePlaneNormal = -cross(slicePlaneBasis1, slicePlaneBasis2);
float slicePlaneW = -dot(slicePlaneNormal, slicePlaneOrigin);
float basis1Len2 = dot(slicePlaneBasis1, slicePlaneBasis1);
float basis2Len2 = dot(slicePlaneBasis2, slicePlaneBasis2);
float basis1Dot = dot(slicePlaneBasis1, rel);
float basis2Dot = dot(slicePlaneBasis2, rel);
return SliceFactors(
dot(slicePlaneNormal, pos) + slicePlaneW,
-basis1Dot - basis1Len2,
basis1Dot - basis1Len2,
-basis2Dot - basis2Len2,
basis2Dot - basis2Len2
);
}
bool sliceByFactors(SliceFactors factors) {
return factors.front < 0.0
&& factors.side0 < 0.0
&& factors.side1 < 0.0
&& factors.side2 < 0.0
&& factors.side3 < 0.0;
}
bool sliceEnabled() {
return dot(slicePlaneBasis1, slicePlaneBasis1) != 0.0;
}
bool sliceByPlane(vec3 pos) {
return sliceEnabled() && sliceByFactors(calculateSliceFactors(pos));
}
#define rejectBySlice(_pos_) sliceByPlane(_pos_)
#define discardBySlice(_pos_) { if (sliceByPlane(_pos_)) discard; }`,u=d.glsl`vec4 applySliceHighlight(vec4 color, vec3 pos) {
SliceFactors factors = calculateSliceFactors(pos);
const float HIGHLIGHT_WIDTH = 1.0;
const vec4 HIGHLIGHT_COLOR = vec4(0.0, 0.0, 0.0, 0.3);
factors.front /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.front);
factors.side0 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side0);
factors.side1 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side1);
factors.side2 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side2);
factors.side3 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side3);
if (sliceByFactors(factors)) {
return color;
}
float highlightFactor = (1.0 - step(0.5, factors.front))
* (1.0 - step(0.5, factors.side0))
* (1.0 - step(0.5, factors.side1))
* (1.0 - step(0.5, factors.side2))
* (1.0 - step(0.5, factors.side3));
return mix(color, vec4(HIGHLIGHT_COLOR.rgb, color.a), highlightFactor * HIGHLIGHT_COLOR.a);
}`;u=F.sliceHighlightDisabled?d.glsl`#define highlightSlice(_color_, _pos_) (_color_)`:d.glsl`
        ${u}
        #define highlightSlice(_color_, _pos_) (sliceEnabled() ? applySliceHighlight(_color_, _pos_) : (_color_))
      `;F.sliceEnabledForVertexPrograms&&v.vertex.code.add(x);v.fragment.code.add(x);v.fragment.code.add(u)}else x=d.glsl`#define rejectBySlice(_pos_) false
#define discardBySlice(_pos_) {}
#define highlightSlice(_color_, _pos_) (_color_)`,F.sliceEnabledForVertexPrograms&&v.vertex.code.add(x),v.fragment.code.add(x)};b.bindSliceUniforms=f;b.bindSliceUniformsWithOrigin=function(v,F,x){f(v,F,x.slicePlane,{origin:x.origin})};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderModules/interfaces":function(){define(["exports"],function(b){function a(q,...p){let g="";for(let m=0;m<p.length;m++)g+=q[m]+p[m];return g+=q[q.length-1]}(function(q){q.int=function(p){return Math.round(p).toString()};
q.float=function(p){return p.toPrecision(8)}})(a||(a={}));b.glsl=a;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/attributes/RibbonVertexPosition.glsl":function(){define(["exports","../../shaderModules/interfaces","../../../lib/VertexAttribute"],function(b,a,q){b.RibbonVertexPosition=function(p,g){p.vertex.uniforms.add("intrinsicWidth","float");g.vvSize?(p.attributes.add(q.VertexAttribute.SIZEFEATUREATTRIBUTE,"float"),p.vertex.uniforms.add("vvSizeMinSize",
"vec3"),p.vertex.uniforms.add("vvSizeMaxSize","vec3"),p.vertex.uniforms.add("vvSizeOffset","vec3"),p.vertex.uniforms.add("vvSizeFactor","vec3"),p.vertex.code.add(a.glsl`float getSize() {
return intrinsicWidth * clamp(vvSizeOffset + sizeFeatureAttribute * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize).x;
}`)):(p.attributes.add(q.VertexAttribute.SIZE,"float"),p.vertex.code.add(a.glsl`float getSize(){
return intrinsicWidth * size;
}`));g.vvOpacity?(p.attributes.add(q.VertexAttribute.OPACITYFEATUREATTRIBUTE,"float"),p.vertex.constants.add("vvOpacityNumber","int",8),p.vertex.code.add(a.glsl`uniform float vvOpacityValues[vvOpacityNumber];
uniform float vvOpacityOpacities[vvOpacityNumber];
float interpolateOpacity( float value ){
if (value <= vvOpacityValues[0]) {
return vvOpacityOpacities[0];
}
for (int i = 1; i < vvOpacityNumber; ++i) {
if (vvOpacityValues[i] >= value) {
float f = (value - vvOpacityValues[i-1]) / (vvOpacityValues[i] - vvOpacityValues[i-1]);
return mix(vvOpacityOpacities[i-1], vvOpacityOpacities[i], f);
}
}
return vvOpacityOpacities[vvOpacityNumber - 1];
}
vec4 applyOpacity( vec4 color ){
return vec4(color.xyz, interpolateOpacity(opacityFeatureAttribute));
}`)):p.vertex.code.add(a.glsl`vec4 applyOpacity( vec4 color ){
return color;
}`);g.vvColor?(p.attributes.add(q.VertexAttribute.COLORFEATUREATTRIBUTE,"float"),p.vertex.constants.add("vvColorNumber","int",8),p.vertex.code.add(a.glsl`uniform float vvColorValues[vvColorNumber];
uniform vec4 vvColorColors[vvColorNumber];
vec4 interpolateColor( float value ) {
if (value <= vvColorValues[0]) {
return vvColorColors[0];
}
for (int i = 1; i < vvColorNumber; ++i) {
if (vvColorValues[i] >= value) {
float f = (value - vvColorValues[i-1]) / (vvColorValues[i] - vvColorValues[i-1]);
return mix(vvColorColors[i-1], vvColorColors[i], f);
}
}
return vvColorColors[vvColorNumber - 1];
}
vec4 getColor(){
return applyOpacity(interpolateColor(colorFeatureAttribute));
}`)):(p.attributes.add(q.VertexAttribute.COLOR,"vec4"),p.vertex.code.add(a.glsl`vec4 getColor(){
return applyOpacity(color);
}`))};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/output/OutputDepth.glsl":function(){define(["exports","../ShaderOutputOptions","../util/RgbaFloatEncoding.glsl","../../shaderModules/interfaces"],function(b,a,q,p){b.OutputDepth=function(g,m){g.fragment.include(q.RgbaFloatEncoding);m.output===a.ShaderOutput.Shadow?(g.extensions.add("GL_OES_standard_derivatives"),g.fragment.code.add(p.glsl`float _calculateFragDepth(const in float depth) {
const float SLOPE_SCALE = 2.0;
const float BIAS = 2.0 * .000015259;
float m = max(abs(dFdx(depth)), abs(dFdy(depth)));
float result = depth + SLOPE_SCALE * m + BIAS;
return clamp(result, .0, .999999);
}
void outputDepth(float _linearDepth) {
gl_FragColor = float2rgba(_calculateFragDepth(_linearDepth));
}`)):m.output===a.ShaderOutput.Depth&&g.fragment.code.add(p.glsl`void outputDepth(float _linearDepth) {
gl_FragColor = float2rgba(_linearDepth);
}`)};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/util/RgbaFloatEncoding.glsl":function(){define(["exports","../../shaderModules/interfaces"],function(b,a){b.RgbaFloatEncoding=function(q){q.code.add(a.glsl`const float MAX_RGBA_FLOAT =
255.0 / 256.0 +
255.0 / 256.0 / 256.0 +
255.0 / 256.0 / 256.0 / 256.0 +
255.0 / 256.0 / 256.0 / 256.0 / 256.0;
const vec4 FIXED_POINT_FACTORS = vec4(1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0);
vec4 float2rgba(const float value) {
float valueInValidDomain = clamp(value, 0.0, MAX_RGBA_FLOAT);
vec4 fixedPointU8 = floor(fract(valueInValidDomain * FIXED_POINT_FACTORS) * 256.0);
const float toU8AsFloat = 1.0 / 255.0;
return fixedPointU8 * toU8AsFloat;
}
const vec4 RGBA_2_FLOAT_FACTORS = vec4(
255.0 / (256.0),
255.0 / (256.0 * 256.0),
255.0 / (256.0 * 256.0 * 256.0),
255.0 / (256.0 * 256.0 * 256.0 * 256.0)
);
float rgba2float(vec4 rgba) {
return dot(rgba, RGBA_2_FLOAT_FACTORS);
}`)};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl":function(){define(["exports","../util/RgbaFloatEncoding.glsl","../../shaderModules/interfaces"],function(b,a,q){b.ReadLinearDepth=function(p){p.include(a.RgbaFloatEncoding);p.code.add(q.glsl`float linearDepthFromFloat(float depth, vec2 nearFar) {
return -(depth * (nearFar[1] - nearFar[0]) + nearFar[0]);
}
float linearDepthFromTexture(sampler2D depthTex, vec2 uv, vec2 nearFar) {
return linearDepthFromFloat(rgba2float(texture2D(depthTex, uv)), nearFar);
}`)};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/shading/LineStipple.glsl":function(){define(["exports","../util/RgbaFloatEncoding.glsl","../../shaderModules/interfaces"],function(b,a,q){const p=q.glsl.float(.4);b.LineStipple=function(g,m){g.constants.add("stippleAlphaColorDiscard","float",.001);g.constants.add("stippleAlphaHighlightDiscard","float",.5);if(m.stippleEnabled){{const d=!(m.draped&&m.stipplePreferContinuous);g.fragment.include(a.RgbaFloatEncoding);
g.vertex.uniforms.add("stipplePatternPixelSize","float");g.vertex.uniforms.add("pixelRatio","float");m.draped?g.vertex.uniforms.add("worldToScreenRatio","float"):(g.vertex.uniforms.add("worldToScreenPerDistanceRatio","float"),g.vertex.uniforms.add("cameraPosition","vec3"),g.vertex.code.add(q.glsl`float computeWorldToScreenRatio(vec3 segmentCenter) {
float segmentDistanceToCamera = length(segmentCenter - cameraPosition);
return worldToScreenPerDistanceRatio / segmentDistanceToCamera;
}`));g.varyings.add("vStippleDistance","float");m.stippleRequiresClamp&&g.varyings.add("vStippleDistanceLimits","vec2");m.stippleRequiresStretchMeasure&&g.varyings.add("vStipplePatternStretch","float");g.vertex.code.add(q.glsl`
    float discretizeWorldToScreenRatio(float worldToScreenRatio) {
      float step = ${p};

      float discreteWorldToScreenRatio = log(worldToScreenRatio);
      discreteWorldToScreenRatio = ceil(discreteWorldToScreenRatio / step) * step;
      discreteWorldToScreenRatio = exp(discreteWorldToScreenRatio);
      return discreteWorldToScreenRatio;
    }
  `);g.vertex.code.add(q.glsl`vec2 computeStippleDistanceLimits(float startPseudoScreen, float segmentLengthPseudoScreen, float segmentLengthScreen, float patternLength) {`);g.vertex.code.add(q.glsl`
    if (segmentLengthPseudoScreen >= ${d?"patternLength":"1e4"}) {
  `);g.vertex.code.add(q.glsl`
        // Round the screen length to get an integer number of pattern repetitions (minimum 1).
        float repetitions = segmentLengthScreen / (patternLength * pixelRatio);
        float flooredRepetitions = max(1.0, floor(repetitions + 0.5));
        float segmentLengthScreenRounded = flooredRepetitions * patternLength;

        ${m.stippleRequiresStretchMeasure?q.glsl`
              float stretch = repetitions / flooredRepetitions;

              // We need to impose a lower bound on the stretch factor to prevent the dots from merging together when there is only 1 repetition.
              // 0.75 is the lowest possible stretch value for flooredRepetitions > 1, so it makes sense as lower bound.
              vStipplePatternStretch = max(0.75, stretch);`:""}

        return vec2(0.0, segmentLengthScreenRounded);
      }
      return vec2(startPseudoScreen, startPseudoScreen + segmentLengthPseudoScreen);
    }
  `);g.fragment.uniforms.add("stipplePatternTexture","sampler2D");g.fragment.uniforms.add("stipplePatternSDFNormalizer","float");g.fragment.uniforms.add("stipplePatternTextureSize","float");g.fragment.uniforms.add("stipplePatternPixelSizeInv","float");m.stippleOffColorEnabled&&g.fragment.uniforms.add("stippleOffColor","vec4");g.fragment.code.add(q.glsl`float padTexture(float u) {
return (u * stipplePatternTextureSize + 1.0)/(stipplePatternTextureSize + 2.0);
}`);g.fragment.code.add(q.glsl`
    float getStippleSDF(out bool isClamped) {
      ${m.stippleRequiresClamp?q.glsl`
          float stippleDistanceClamped = clamp(vStippleDistance, vStippleDistanceLimits.x, vStippleDistanceLimits.y);
          vec2 aaCorrectedLimits = vStippleDistanceLimits + vec2(1.0, -1.0) / gl_FragCoord.w;
          isClamped = vStippleDistance < aaCorrectedLimits.x || vStippleDistance > aaCorrectedLimits.y;`:q.glsl`
          float stippleDistanceClamped = vStippleDistance;
          isClamped = false;`}

      float u = stippleDistanceClamped * gl_FragCoord.w * stipplePatternPixelSizeInv;
      ${m.stippleScaleWithLineWidth?q.glsl`u *= vLineSizeInv;`:""}
      u = padTexture(fract(u));

      float encodedSDF = rgba2float(texture2D(stipplePatternTexture, vec2(u, 0.5)));
      float sdf = (encodedSDF * 2.0 - 1.0) * stipplePatternSDFNormalizer;

      ${m.stippleRequiresStretchMeasure?q.glsl`return (sdf - 0.5) * vStipplePatternStretch + 0.5;`:q.glsl`return sdf;`}
    }

    float getStippleSDF() {
      bool ignored;
      return getStippleSDF(ignored);
    }

    float getStippleAlpha() {
      bool isClamped;
      float stippleSDF = getStippleSDF(isClamped);

      float antiAliasedResult = ${m.stippleScaleWithLineWidth?q.glsl`clamp(stippleSDF * vLineWidth + 0.5, 0.0, 1.0);`:q.glsl`clamp(stippleSDF + 0.5, 0.0, 1.0);`}

      return isClamped ? floor(antiAliasedResult + 0.5) : antiAliasedResult;
    }
  `);m.stippleOffColorEnabled?g.fragment.code.add(q.glsl`#define discardByStippleAlpha(stippleAlpha, threshold) {}
#define blendStipple(color, stippleAlpha) mix(color, stippleOffColor, stippleAlpha)`):g.fragment.code.add(q.glsl`#define discardByStippleAlpha(stippleAlpha, threshold) if (stippleAlpha < threshold) { discard; }
#define blendStipple(color, stippleAlpha) vec4(color.rgb, color.a * stippleAlpha)`)}}else g.fragment.code.add(q.glsl`float getStippleAlpha() { return 1.0; }
#define discardByStippleAlpha(_stippleAlpha_, _threshold_) {}
#define blendStipple(color, _stippleAlpha_) color`)};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl":function(){define(["exports","../../shaderModules/interfaces"],function(b,a){b.bindMultipassTerrainTexture=function(q,p){p.multipassTerrainEnabled&&p.terrainLinearDepthTexture&&q.bindTexture(p.terrainLinearDepthTexture,"terrainDepthTexture")};b.multipassTerrainTest=function(q,p){q.fragment.uniforms.add("terrainDepthTexture",
"sampler2D");q.fragment.uniforms.add("nearFar","vec2");q.fragment.uniforms.add("inverseViewport","vec2");q.fragment.code.add(a.glsl`
    // Compare the linearized depths of fragment and terrain. Discard fragments on the wrong side of the terrain.
    void terrainDepthTest(vec4 fragCoord, float fragmentDepth){

      float terrainDepth = linearDepthFromTexture(terrainDepthTexture, fragCoord.xy * inverseViewport, nearFar);
      if(fragmentDepth ${p.cullAboveGround?"\x3e":"\x3c\x3d"} terrainDepth){
        discard;
      }
    }
  `)};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/shading/PiUtils.glsl":function(){define(["exports","../../shaderModules/interfaces"],function(b,a){b.PiUtils=function(q){q.vertex.code.add(a.glsl`const float PI = 3.141592653589793;`);q.fragment.code.add(a.glsl`const float PI = 3.141592653589793;
const float LIGHT_NORMALIZATION = 1.0 / PI;
const float INV_PI = 0.3183098861837907;
const float HALF_PI = 1.570796326794897;`)};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/util/AlphaDiscard.glsl":function(){define(["exports","../../shaderModules/interfaces","../../../lib/basicInterfaces"],function(b,a,q){b.DiscardOrAdjustAlpha=function(p,g){const m=p.fragment;switch(g.alphaDiscardMode){case q.AlphaDiscardMode.Blend:m.code.add(a.glsl`
        #define discardOrAdjustAlpha(color) { if (color.a < ${a.glsl.float(.001)}) { discard; } }
      `);break;case q.AlphaDiscardMode.Opaque:m.code.add(a.glsl`void discardOrAdjustAlpha(inout vec4 color) {
color.a = 1.0;
}`);break;case q.AlphaDiscardMode.Mask:m.uniforms.add("textureAlphaCutoff","float");m.code.add(a.glsl`#define discardOrAdjustAlpha(color) { if (color.a < textureAlphaCutoff) { discard; } else { color.a = 1.0; } }`);break;case q.AlphaDiscardMode.MaskBlend:p.fragment.uniforms.add("textureAlphaCutoff","float"),p.fragment.code.add(a.glsl`#define discardOrAdjustAlpha(color) { if (color.a < textureAlphaCutoff) { discard; } }`)}};b.defaultMaskAlphaCutoff=.1;b.symbolAlphaCutoff=.001;Object.defineProperty(b,
"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl":function(){define(["exports","../../shaderModules/interfaces"],function(b,a){b.ColorConversion=function(q){q.code.add(a.glsl`vec4 premultiplyAlpha(vec4 v) {
return vec4(v.rgb * v.a, v.a);
}
vec3 rgb2hsv(vec3 c) {
vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);
vec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);
vec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);
float d = q.x - min(q.w, q.y);
float e = 1.0e-10;
return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), min(d / (q.x + e), 1.0), q.x);
}
vec3 hsv2rgb(vec3 c) {
vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);
vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
}
float rgb2v(vec3 c) {
return max(c.x, max(c.y, c.z));
}`)};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderModules/ShaderBuilder":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/Logger"],function(b,a,q){const p=q.getLogger("esri.views.3d.webgl-engine.core.shaderModules.shaderBuilder");q=function(){function v(){this.includedModules=new Map}v.prototype.include=function(F,x){this.includedModules.has(F)?this.includedModules.get(F)!==x&&p.error("Trying to include shader module multiple times with different sets of options."):
(this.includedModules.set(F,x),F(this.builder,x))};return v}();let g=function(v){function F(){var x=v.apply(this,arguments)||this;x.vertex=new f;x.fragment=new f;x.attributes=new l;x.varyings=new t;x.extensions=new y;x.constants=new w;return x}a._inheritsLoose(F,v);F.prototype.generateSource=function(x){const u=this.extensions.generateSource(x),H=this.attributes.generateSource(x),I=this.varyings.generateSource();var B="vertex"===x?this.vertex:this.fragment;const K=B.uniforms.generateSource(),J=B.code.generateSource();
x="vertex"===x?"precision highp float;\nprecision highp sampler2D;":"#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n  precision highp sampler2D;\n#else\n  precision mediump float;\n  precision mediump sampler2D;\n#endif";B=this.constants.generateSource().concat(B.constants.generateSource());return`\n${u.join("\n")}\n\n${x}\n\n${B.join("\n")}\n\n${K.join("\n")}\n\n${H.join("\n")}\n\n${I.join("\n")}\n\n${J.join("\n")}`};a._createClass(F,[{key:"fragmentUniforms",get:function(){return this.fragment.uniforms}},
{key:"builder",get:function(){return this}}]);return F}(q),m=function(){function v(){this._entries=new Map}var F=v.prototype;F.add=function(x,u,H){this._entries.set(`${x}_${u}_${H}`,{name:x,type:u,arraySize:H});return this};F.generateSource=function(){return Array.from(this._entries.values()).map(x=>{var u=x.arraySize;return`uniform ${x.type} ${x.name}${u?`[${u}]`:""};`})};a._createClass(v,[{key:"entries",get:function(){return Array.from(this._entries.values())}}]);return v}(),d=function(){function v(){this._entries=
[]}var F=v.prototype;F.add=function(x){this._entries.push(x)};F.generateSource=function(){return this._entries};return v}(),f=function(v){function F(){var x=v.apply(this,arguments)||this;x.uniforms=new m;x.code=new d;x.constants=new w;return x}a._inheritsLoose(F,v);a._createClass(F,[{key:"builder",get:function(){return this}}]);return F}(q),l=function(){function v(){this._entries=[]}var F=v.prototype;F.add=function(x,u){this._entries.push([x,u])};F.generateSource=function(x){return"fragment"===x?
[]:this._entries.map(u=>`attribute ${u[1]} ${u[0]};`)};return v}(),t=function(){function v(){this._entries=[]}var F=v.prototype;F.add=function(x,u){this._entries.push([x,u])};F.generateSource=function(){return this._entries.map(x=>`varying ${x[1]} ${x[0]};`)};return v}(),y=function(){function v(){this._entries=new Set}var F=v.prototype;F.add=function(x){this._entries.add(x)};F.generateSource=function(x){const u="vertex"===x?v.ALLOWLIST_VERTEX:v.ALLOWLIST_FRAGMENT;return Array.from(this._entries).filter(H=>
u.includes(H)).map(H=>`#extension ${H} : enable`)};return v}();y.ALLOWLIST_FRAGMENT=["GL_EXT_shader_texture_lod","GL_OES_standard_derivatives"];y.ALLOWLIST_VERTEX=[];let w=function(){function v(){this._entries=[]}var F=v.prototype;F.add=function(x,u,H){let I="ERROR_CONSTRUCTOR_STRING";switch(u){case "float":I=v._numberToFloatStr(H);break;case "int":I=v._numberToIntStr(H);break;case "bool":I=H.toString();break;case "vec2":I=`vec2(${v._numberToFloatStr(H[0])},                            ${v._numberToFloatStr(H[1])})`;
break;case "vec3":I=`vec3(${v._numberToFloatStr(H[0])},                            ${v._numberToFloatStr(H[1])},                            ${v._numberToFloatStr(H[2])})`;break;case "vec4":I=`vec4(${v._numberToFloatStr(H[0])},                            ${v._numberToFloatStr(H[1])},                            ${v._numberToFloatStr(H[2])},                            ${v._numberToFloatStr(H[3])})`;break;case "ivec2":I=`ivec2(${v._numberToIntStr(H[0])},                             ${v._numberToIntStr(H[1])})`;
break;case "ivec3":I=`ivec3(${v._numberToIntStr(H[0])},                             ${v._numberToIntStr(H[1])},                             ${v._numberToIntStr(H[2])})`;break;case "ivec4":I=`ivec4(${v._numberToIntStr(H[0])},                             ${v._numberToIntStr(H[1])},                             ${v._numberToIntStr(H[2])},                             ${v._numberToIntStr(H[3])})`;break;case "mat2":case "mat3":case "mat4":I=`${u}(${Array.prototype.map.call(H,B=>v._numberToFloatStr(B)).join(", ")})`}this._entries.push(`const ${u} ${x} = ${I};`);
return this};v._numberToIntStr=function(x){return x.toFixed(0)};v._numberToFloatStr=function(x){return Number.isInteger(x)?x.toFixed(1):x.toString()};F.generateSource=function(){return Array.from(this._entries)};return v}();b.Code=d;b.Includes=q;b.ShaderBuilder=g;b.Stage=f;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/shaders/RibbonLineTechnique":function(){define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/maybe ../../../../chunks/mat4 ../../../../geometry/support/vectorStacks ../core/shaderLibrary/ShaderOutputOptions ../core/shaderLibrary/Slice.glsl ../core/shaderLibrary/output/OutputHighlight.glsl ../core/shaderLibrary/shading/MultipassTerrainTest.glsl ../core/shaderLibrary/shading/VisualVariables.glsl ../core/shaderLibrary/util/View.glsl ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../core/shaderTechnique/ShaderTechniqueConfiguration ../lib/basicInterfaces ../lib/OrderIndependentTransparency ../lib/Program ../lib/RenderSlot ../lib/StencilUtils ../lib/VertexAttribute ../../../../chunks/RibbonLine.glsl ../../../webgl/enums ../../../webgl/renderState".split(" "),
function(b,a,q,p,g,m,d,f,l,t,y,w,v,F,x,u,H,I,B,K,J,c,k,C,D){const n=new Map([[c.VertexAttribute.POSITION,0],[c.VertexAttribute.SUBDIVISIONFACTOR,1],[c.VertexAttribute.UV0,2],[c.VertexAttribute.AUXPOS1,3],[c.VertexAttribute.AUXPOS2,4],[c.VertexAttribute.SIZE,6],[c.VertexAttribute.SIZEFEATUREATTRIBUTE,6],[c.VertexAttribute.COLOR,5],[c.VertexAttribute.COLORFEATUREATTRIBUTE,5],[c.VertexAttribute.OPACITYFEATUREATTRIBUTE,7]]);x=function(h){function L(P,S,O){S=h.call(this,P,S,O)||this;S.stippleTextureRepository=
P.stippleTextureRepository;return S}q._inheritsLoose(L,h);var M=L.prototype;M.initializeProgram=function(P){var S=L.shader.get();const O=this.configuration;S=S.build({oitEnabled:O.transparencyPassType===H.TransparencyPassType.Color,output:O.output,slicePlaneEnabled:O.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!1,draped:O.draped,stippleEnabled:this.stippleEnabled,stippleOffColorEnabled:O.stippleOffColorEnabled,stippleRequiresClamp:!0,stippleScaleWithLineWidth:O.stippleScaleWithLineWidth,
stipplePreferContinuous:O.stipplePreferContinuous,capType:O.capType,roundJoins:O.roundJoins,vvColor:O.vvColor,vvSize:O.vvSize,vvInstancingEnabled:!0,vvOpacity:O.vvOpacity,falloffEnabled:O.falloffEnabled,innerColorEnabled:O.innerColorEnabled,multipassTerrainEnabled:O.multipassTerrainEnabled,cullAboveGround:O.cullAboveGround,wireframe:O.wireframe});return new B.Program(P.rctx,S,n)};M.destroy=function(){h.prototype.destroy.call(this);this.stippleTextureRepository.release(this.stipplePattern);this.stippleTextureBind=
this.stipplePattern=null};M.bindPass=function(P,S){v.bindProjectionMatrix(this.program,S.camera.projectionMatrix);this.configuration.output===f.ShaderOutput.Highlight&&t.bindOutputHighlight(this.program,S);S.multipassTerrainEnabled&&(this.program.setUniform2fv("inverseViewport",S.inverseViewport),y.bindMultipassTerrainTexture(this.program,S));this.program.setUniform1f("intrinsicWidth",P.width);this.program.setUniform4fv("intrinsicColor",P.color);this.program.setUniform1f("miterLimit","miter"!==P.join?
0:P.miterLimit);this.program.setUniform2fv("nearFar",S.camera.nearFar);this.program.setUniform1f("pixelRatio",S.camera.pixelRatio);this.program.setUniform2f("screenSize",S.camera.fullViewport[2],S.camera.fullViewport[3]);w.bindVisualVariablesUniformsWithOpacity(this.program,P);if(this.stipplePattern!==P.stipplePattern){var O=P.stipplePattern;this.stippleTextureBind=this.stippleTextureRepository.swap(this.stipplePattern,O);this.stipplePattern=O}if(this.stippleEnabled){const {pixelSize:T,sdfNormalizer:W,
pixels:V}=g.isSome(this.stippleTextureBind)?this.stippleTextureBind(this.program):{pixelSize:1,sdfNormalizer:1,pixels:1};this.program.setUniform1f("stipplePatternSDFNormalizer",W);this.program.setUniform1f("stipplePatternTextureSize",V);this.program.setUniform1f("stipplePatternPixelSize",T);this.program.setUniform1f("stipplePatternPixelSizeInv",1/T);this.configuration.draped?this.program.setUniform1f("worldToScreenRatio",1/S.screenToPCSRatio):this.program.setUniform1f("worldToScreenPerDistanceRatio",
1/S.camera.perScreenPixelRatio);this.configuration.stippleOffColorEnabled&&(O=g.unwrap(P.stippleOffColor),this.program.setUniform4f("stippleOffColor",O[0],O[1],O[2],3<O.length?O[3]:1))}this.configuration.falloffEnabled&&this.program.setUniform1f("falloff",P.falloff);this.configuration.innerColorEnabled&&(this.program.setUniform4fv("innerColor",g.unwrapOr(P.innerColor,P.color)),this.program.setUniform1f("innerWidth",P.innerWidth*S.camera.pixelRatio))};M.bindDraw=function(P){v.bindView(this.program,
P);this.stippleEnabled&&!this.configuration.draped&&v.bindCameraPosition(this.program,P.origin,P.camera.viewInverseTransposeMatrix);l.bindSliceUniforms(this.program,this.configuration,P.slicePlane,{origin:P.origin,view:P.camera.viewMatrix});this.program.setUniformMatrix4fv("inverseProjectionMatrix",m.invert(d.sm4d.get(),P.camera.projectionMatrix));this.program.rebindTextures()};M._makePipelineState=function(P,S){const O=this.configuration,T=P===H.TransparencyPassType.NONE,W=P===H.TransparencyPassType.FrontFace;
return D.makePipelineState({blending:O.output===f.ShaderOutput.Color||O.output===f.ShaderOutput.Alpha?T?I.blendingDefault:I.oitBlending(P):null,depthTest:{func:I.oitDepthTest(P)},depthWrite:T?O.writeDepth&&D.defaultDepthWriteParams:I.oitDepthWrite(P),colorWrite:D.defaultColorWriteParams,stencilWrite:O.sceneHasOcludees?J.stencilWriteMaskOn:null,stencilTest:O.sceneHasOcludees?S?J.stencilToolMaskBaseParams:J.stencilBaseAllZerosParams:null,polygonOffset:T||W?O.polygonOffset&&z:I.OITPolygonOffset})};M.initializePipeline=
function(){const P=this.configuration,S=P.polygonOffset&&z;P.occluder&&(this._occluderPipelineTransparent=D.makePipelineState({blending:I.blendingDefault,polygonOffset:S,depthTest:J.depthCompareAlways,depthWrite:null,colorWrite:D.defaultColorWriteParams,stencilWrite:null,stencilTest:J.stencilToolTransparentOccluderParams}),this._occluderPipelineOpaque=D.makePipelineState({blending:I.blendingDefault,polygonOffset:S,depthTest:J.depthCompareAlways,depthWrite:null,colorWrite:D.defaultColorWriteParams,
stencilWrite:J.stencilWriteMaskOff,stencilTest:J.stencilToolMaskOccluderParams}),this._occluderPipelineMaskWrite=D.makePipelineState({blending:null,polygonOffset:S,depthTest:J.depthCompareLess,depthWrite:null,colorWrite:null,stencilWrite:J.stencilWriteMaskOn,stencilTest:J.stencilToolMaskBaseParams}));this._occludeePipelineState=this._makePipelineState(this.configuration.transparencyPassType,!0);return this._makePipelineState(this.configuration.transparencyPassType,!1)};M.getPipelineState=function(P,
S){return S?this._occludeePipelineState:this.configuration.occluder?P===K.RenderSlot.TRANSPARENT_OCCLUDER_MATERIAL?this._occluderPipelineTransparent:P===K.RenderSlot.OCCLUDER_MATERIAL?this._occluderPipelineOpaque:this._occluderPipelineMaskWrite:h.prototype.getPipelineState.call(this,P,S)};q._createClass(L,[{key:"stippleEnabled",get:function(){return this.configuration.stippleEnabled&&this.configuration.output!==f.ShaderOutput.Highlight}},{key:"primitiveType",get:function(){return this.configuration.wireframe?
C.PrimitiveType.LINES:C.PrimitiveType.TRIANGLE_STRIP}}]);return L}(x.ShaderTechnique);x.shader=new F.ReloadableShaderModule(k.RibbonLineShader,()=>new Promise((h,L)=>b(["./RibbonLine.glsl"],h,L)));const z={factor:0,units:-4};F=function(h){function L(){var M=h.apply(this,arguments)||this;M.output=f.ShaderOutput.Color;M.occluder=!1;M.slicePlaneEnabled=!1;M.transparent=!1;M.polygonOffset=!1;M.writeDepth=!1;M.draped=!1;M.stippleEnabled=!1;M.stippleOffColorEnabled=!1;M.stippleScaleWithLineWidth=!1;M.stipplePreferContinuous=
!0;M.capType=k.CapType.BUTT;M.roundJoins=!1;M.vvSize=!1;M.vvColor=!1;M.vvOpacity=!1;M.falloffEnabled=!1;M.innerColorEnabled=!1;M.sceneHasOcludees=!1;M.transparencyPassType=H.TransparencyPassType.NONE;M.multipassTerrainEnabled=!1;M.cullAboveGround=!1;M.wireframe=!1;return M}q._inheritsLoose(L,h);return L}(u.ShaderTechniqueConfiguration);p.__decorate([u.parameter({count:f.ShaderOutput.COUNT})],F.prototype,"output",void 0);p.__decorate([u.parameter()],F.prototype,"occluder",void 0);p.__decorate([u.parameter()],
F.prototype,"slicePlaneEnabled",void 0);p.__decorate([u.parameter()],F.prototype,"transparent",void 0);p.__decorate([u.parameter()],F.prototype,"polygonOffset",void 0);p.__decorate([u.parameter()],F.prototype,"writeDepth",void 0);p.__decorate([u.parameter()],F.prototype,"draped",void 0);p.__decorate([u.parameter()],F.prototype,"stippleEnabled",void 0);p.__decorate([u.parameter()],F.prototype,"stippleOffColorEnabled",void 0);p.__decorate([u.parameter()],F.prototype,"stippleScaleWithLineWidth",void 0);
p.__decorate([u.parameter()],F.prototype,"stipplePreferContinuous",void 0);p.__decorate([u.parameter({count:k.CapType.COUNT})],F.prototype,"capType",void 0);p.__decorate([u.parameter()],F.prototype,"roundJoins",void 0);p.__decorate([u.parameter()],F.prototype,"vvSize",void 0);p.__decorate([u.parameter()],F.prototype,"vvColor",void 0);p.__decorate([u.parameter()],F.prototype,"vvOpacity",void 0);p.__decorate([u.parameter()],F.prototype,"falloffEnabled",void 0);p.__decorate([u.parameter()],F.prototype,
"innerColorEnabled",void 0);p.__decorate([u.parameter()],F.prototype,"sceneHasOcludees",void 0);p.__decorate([u.parameter({count:H.TransparencyPassType.COUNT})],F.prototype,"transparencyPassType",void 0);p.__decorate([u.parameter()],F.prototype,"multipassTerrainEnabled",void 0);p.__decorate([u.parameter()],F.prototype,"cullAboveGround",void 0);p.__decorate([u.parameter()],F.prototype,"wireframe",void 0);a.RibbonLineTechnique=x;a.RibbonLineTechniqueConfiguration=F;a.ribbonVertexAttributeLocations=
n;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/output/OutputHighlight.glsl":function(){define(["exports","../../../../../../chunks/vec4f64","../../shaderModules/interfaces"],function(b,a,q){const p=a.fromValues(1,1,0,1),g=a.fromValues(1,0,1,1);b.OutputHighlight=function(m){m.fragment.uniforms.add("depthTex","sampler2D");m.fragment.uniforms.add("highlightViewportPixelSz","vec4");m.fragment.constants.add("occludedHighlightFlag","vec4",p).add("unoccludedHighlightFlag",
"vec4",g);m.fragment.code.add(q.glsl`void outputHighlight() {
vec4 fragCoord = gl_FragCoord;
float sceneDepth = texture2D(depthTex, (fragCoord.xy - highlightViewportPixelSz.xy) * highlightViewportPixelSz.zw).r;
if (fragCoord.z > sceneDepth + 5e-7) {
gl_FragColor = occludedHighlightFlag;
}
else {
gl_FragColor = unoccludedHighlightFlag;
}
}`)};b.bindOutputHighlight=function(m,d){m.bindTexture(d.highlightDepthTexture,"depthTex");m.setUniform4f("highlightViewportPixelSz",0,0,d.inverseViewport[0],d.inverseViewport[1])};b.occludedHighlightFlag=p;b.unoccludedHighlightFlag=g;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/shading/VisualVariables.glsl":function(){define(["exports","../../shaderModules/interfaces","../../../lib/VertexAttribute"],function(b,a,q){function p(g,m){m.vvSizeEnabled&&
(g.setUniform3fv("vvSizeMinSize",m.vvSizeMinSize),g.setUniform3fv("vvSizeMaxSize",m.vvSizeMaxSize),g.setUniform3fv("vvSizeOffset",m.vvSizeOffset),g.setUniform3fv("vvSizeFactor",m.vvSizeFactor));m.vvColorEnabled&&(g.setUniform1fv("vvColorValues",m.vvColorValues),g.setUniform4fv("vvColorColors",m.vvColorColors))}b.VisualVariables=function(g,m){m.vvInstancingEnabled&&(m.vvSize||m.vvColor)&&g.attributes.add(q.VertexAttribute.INSTANCEFEATUREATTRIBUTE,"vec4");m.vvSize?(g.vertex.uniforms.add("vvSizeMinSize",
"vec3"),g.vertex.uniforms.add("vvSizeMaxSize","vec3"),g.vertex.uniforms.add("vvSizeOffset","vec3"),g.vertex.uniforms.add("vvSizeFactor","vec3"),g.vertex.uniforms.add("vvSymbolRotationMatrix","mat3"),g.vertex.uniforms.add("vvSymbolAnchor","vec3"),g.vertex.code.add(a.glsl`vec3 vvScale(vec4 _featureAttribute) {
return clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize);
}
vec4 vvTransformPosition(vec3 position, vec4 _featureAttribute) {
return vec4(vvSymbolRotationMatrix * ( vvScale(_featureAttribute) * (position + vvSymbolAnchor)), 1.0);
}`),g.vertex.code.add(a.glsl`
      const float eps = 1.192092896e-07;
      vec4 vvTransformNormal(vec3 _normal, vec4 _featureAttribute) {
        vec3 vvScale = clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize + eps, vvSizeMaxSize);
        return vec4(vvSymbolRotationMatrix * _normal / vvScale, 1.0);
      }

      ${m.vvInstancingEnabled?a.glsl`
      vec4 vvLocalNormal(vec3 _normal) {
        return vvTransformNormal(_normal, instanceFeatureAttribute);
      }

      vec4 localPosition() {
        return vvTransformPosition(position, instanceFeatureAttribute);
      }`:""}
    `)):g.vertex.code.add(a.glsl`vec4 localPosition() { return vec4(position, 1.0); }
vec4 vvLocalNormal(vec3 _normal) { return vec4(_normal, 1.0); }`);m.vvColor?(g.vertex.constants.add("vvColorNumber","int",8),g.vertex.code.add(a.glsl`
      uniform float vvColorValues[vvColorNumber];
      uniform vec4 vvColorColors[vvColorNumber];

      vec4 vvGetColor(vec4 featureAttribute, float values[vvColorNumber], vec4 colors[vvColorNumber]) {
        float value = featureAttribute.y;
        if (value <= values[0]) {
          return colors[0];
        }

        for (int i = 1; i < vvColorNumber; ++i) {
          if (values[i] >= value) {
            float f = (value - values[i-1]) / (values[i] - values[i-1]);
            return mix(colors[i-1], colors[i], f);
          }
        }
        return colors[vvColorNumber - 1];
      }

      ${m.vvInstancingEnabled?a.glsl`
      vec4 vvColor() {
        return vvGetColor(instanceFeatureAttribute, vvColorValues, vvColorColors);
      }`:""}
    `)):g.vertex.code.add(a.glsl`vec4 vvColor() { return vec4(1.0); }`)};b.bindVisualVariablesUniforms=p;b.bindVisualVariablesUniformsForSymbols=function(g,m){p(g,m);m.vvSizeEnabled&&(g.setUniform3fv("vvSymbolAnchor",m.vvSymbolAnchor),g.setUniformMatrix3fv("vvSymbolRotationMatrix",m.vvSymbolRotationMatrix))};b.bindVisualVariablesUniformsWithOpacity=function(g,m){p(g,m);m.vvOpacityEnabled&&(g.setUniform1fv("vvOpacityValues",m.vvOpacityValues),g.setUniform1fv("vvOpacityOpacities",m.vvOpacityOpacities))};
Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/util/View.glsl":function(){define(["exports","../../../../../../chunks/mat4","../../../../../../chunks/mat4f32"],function(b,a,q){function p(m,d,f){a.translate(g,f,d);m.setUniform3fv("localOrigin",d);m.setUniformMatrix4fv("view",g)}const g=q.create();b.bindCameraPosition=function(m,d,f){m.setUniform3f("cameraPosition",f[3]-d[0],f[7]-d[1],f[11]-d[2])};b.bindProjectionMatrix=function(m,d){m.setUniformMatrix4fv("proj",
d)};b.bindView=function(m,d){p(m,d.origin,d.camera.viewMatrix)};b.bindViewCustomOrigin=p;b.bindViewport=function(m,d){m.setUniform4fv("viewport",d.camera.fullViewport)};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderTechnique/ReloadableShaderModule":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers"],function(b,a){let q=function(){function p(m,d){this._module=m;this._loadModule=d}var g=p.prototype;g.get=function(){return this._module};
g.reload=function(){var m=a._asyncToGenerator(function*(){return this._module=yield this._loadModule()});return function(){return m.apply(this,arguments)}}();return p}();b.ReloadableShaderModule=q;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderTechnique/ShaderTechnique":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/maybe","../../../../webgl/enums"],function(b,a,q,p){let g=function(){function m(f,l,t){this.release=
t;l&&(this._config=l.snapshot());this._program=this.initializeProgram(f);this._pipeline=this.initializePipeline(f)}var d=m.prototype;d.destroy=function(){this._program=q.disposeMaybe(this._program);this._pipeline=this._config=null};d.reload=function(f){q.disposeMaybe(this._program);this._program=this.initializeProgram(f);this._pipeline=this.initializePipeline(f)};d.bindPass=function(f,l){};d.bindMaterial=function(f,l){};d.bindDraw=function(f){};d.bindPipelineState=function(f,l=null,t){f.setPipelineState(this.getPipelineState(l,
t))};d.ensureAttributeLocations=function(f){this.program.assertCompatibleVertexAttributeLocations(f)};d.getPipelineState=function(f,l){return this._pipeline};a._createClass(m,[{key:"program",get:function(){return this._program}},{key:"key",get:function(){return this._config.key}},{key:"configuration",get:function(){return this._config}},{key:"primitiveType",get:function(){return p.PrimitiveType.TRIANGLES}}]);return m}();b.ShaderTechnique=g;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/webgl/enums":function(){define(["exports"],
function(b){b.ClearBufferBit=void 0;(function(a){a[a.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT";a[a.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT";a[a.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT"})(b.ClearBufferBit||(b.ClearBufferBit={}));b.PrimitiveType=void 0;(function(a){a[a.POINTS=0]="POINTS";a[a.LINES=1]="LINES";a[a.LINE_LOOP=2]="LINE_LOOP";a[a.LINE_STRIP=3]="LINE_STRIP";a[a.TRIANGLES=4]="TRIANGLES";a[a.TRIANGLE_STRIP=5]="TRIANGLE_STRIP";a[a.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(b.PrimitiveType||(b.PrimitiveType=
{}));b.BlendFactor=void 0;(function(a){a[a.ZERO=0]="ZERO";a[a.ONE=1]="ONE";a[a.SRC_COLOR=768]="SRC_COLOR";a[a.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR";a[a.SRC_ALPHA=770]="SRC_ALPHA";a[a.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA";a[a.DST_ALPHA=772]="DST_ALPHA";a[a.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA";a[a.DST_COLOR=774]="DST_COLOR";a[a.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR";a[a.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE";a[a.CONSTANT_COLOR=32769]="CONSTANT_COLOR";a[a.ONE_MINUS_CONSTANT_COLOR=
32770]="ONE_MINUS_CONSTANT_COLOR";a[a.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA";a[a.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA"})(b.BlendFactor||(b.BlendFactor={}));b.BlendOperation=void 0;(function(a){a[a.ADD=32774]="ADD";a[a.SUBTRACT=32778]="SUBTRACT";a[a.REVERSE_SUBTRACT=32779]="REVERSE_SUBTRACT"})(b.BlendOperation||(b.BlendOperation={}));b.BufferType=void 0;(function(a){a[a.ARRAY_BUFFER=34962]="ARRAY_BUFFER";a[a.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER";a[a.UNIFORM_BUFFER=
35345]="UNIFORM_BUFFER";a[a.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER";a[a.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER";a[a.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER";a[a.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER"})(b.BufferType||(b.BufferType={}));b.Face=void 0;(function(a){a[a.FRONT=1028]="FRONT";a[a.BACK=1029]="BACK";a[a.FRONT_AND_BACK=1032]="FRONT_AND_BACK"})(b.Face||(b.Face={}));b.CullMode=void 0;(function(a){a[a.CW=2304]="CW";a[a.CCW=2305]="CCW"})(b.CullMode||(b.CullMode={}));b.DataType=
void 0;(function(a){a[a.BYTE=5120]="BYTE";a[a.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE";a[a.SHORT=5122]="SHORT";a[a.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT";a[a.INT=5124]="INT";a[a.UNSIGNED_INT=5125]="UNSIGNED_INT";a[a.FLOAT=5126]="FLOAT"})(b.DataType||(b.DataType={}));b.CompareFunction=void 0;(function(a){a[a.NEVER=512]="NEVER";a[a.LESS=513]="LESS";a[a.EQUAL=514]="EQUAL";a[a.LEQUAL=515]="LEQUAL";a[a.GREATER=516]="GREATER";a[a.NOTEQUAL=517]="NOTEQUAL";a[a.GEQUAL=518]="GEQUAL";a[a.ALWAYS=519]="ALWAYS"})(b.CompareFunction||
(b.CompareFunction={}));b.StencilOperation=void 0;(function(a){a[a.ZERO=0]="ZERO";a[a.KEEP=7680]="KEEP";a[a.REPLACE=7681]="REPLACE";a[a.INCR=7682]="INCR";a[a.DECR=7683]="DECR";a[a.INVERT=5386]="INVERT";a[a.INCR_WRAP=34055]="INCR_WRAP";a[a.DECR_WRAP=34056]="DECR_WRAP"})(b.StencilOperation||(b.StencilOperation={}));b.TextureSamplingMode=void 0;(function(a){a[a.NEAREST=9728]="NEAREST";a[a.LINEAR=9729]="LINEAR";a[a.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST";a[a.LINEAR_MIPMAP_NEAREST=9985]=
"LINEAR_MIPMAP_NEAREST";a[a.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR";a[a.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"})(b.TextureSamplingMode||(b.TextureSamplingMode={}));b.TextureWrapMode=void 0;(function(a){a[a.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE";a[a.REPEAT=10497]="REPEAT";a[a.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(b.TextureWrapMode||(b.TextureWrapMode={}));b.TextureType=void 0;(function(a){a[a.TEXTURE_2D=3553]="TEXTURE_2D";a[a.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP";a[a.TEXTURE_3D=
32879]="TEXTURE_3D";a[a.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X";a[a.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X";a[a.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y";a[a.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y";a[a.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z";a[a.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z";a[a.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY"})(b.TextureType||(b.TextureType=
{}));b.PixelFormat=void 0;(function(a){a[a.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT";a[a.DEPTH_STENCIL=34041]="DEPTH_STENCIL";a[a.ALPHA=6406]="ALPHA";a[a.RGB=6407]="RGB";a[a.RGBA=6408]="RGBA";a[a.LUMINANCE=6409]="LUMINANCE";a[a.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA";a[a.RED=6403]="RED";a[a.RG=33319]="RG";a[a.RED_INTEGER=36244]="RED_INTEGER";a[a.RG_INTEGER=33320]="RG_INTEGER";a[a.RGB_INTEGER=36248]="RGB_INTEGER";a[a.RGBA_INTEGER=36249]="RGBA_INTEGER"})(b.PixelFormat||(b.PixelFormat={}));b.SizedPixelFormat=
void 0;(function(a){a[a.RGBA4=32854]="RGBA4";a[a.R16F=33325]="R16F";a[a.RG16F=33327]="RG16F";a[a.RGB32F=34837]="RGB32F";a[a.RGBA16F=34842]="RGBA16F";a[a.R32F=33326]="R32F";a[a.RG32F=33328]="RG32F";a[a.RGBA32F=34836]="RGBA32F";a[a.R11F_G11F_B10F=35898]="R11F_G11F_B10F";a[a.RGB8=32849]="RGB8";a[a.RGBA8=32856]="RGBA8";a[a.RGB5_A1=32855]="RGB5_A1";a[a.R8=33321]="R8";a[a.RG8=33323]="RG8";a[a.R8I=33329]="R8I";a[a.R8UI=33330]="R8UI";a[a.R16I=33331]="R16I";a[a.R16UI=33332]="R16UI";a[a.R32I=33333]="R32I";
a[a.R32UI=33334]="R32UI";a[a.RG8I=33335]="RG8I";a[a.RG8UI=33336]="RG8UI";a[a.RG16I=33337]="RG16I";a[a.RG16UI=33338]="RG16UI";a[a.RG32I=33339]="RG32I";a[a.RG32UI=33340]="RG32UI";a[a.RGB16F=34843]="RGB16F";a[a.RGB9_E5=35901]="RGB9_E5";a[a.SRGB8=35905]="SRGB8";a[a.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8";a[a.RGB565=36194]="RGB565";a[a.RGBA32UI=36208]="RGBA32UI";a[a.RGB32UI=36209]="RGB32UI";a[a.RGBA16UI=36214]="RGBA16UI";a[a.RGB16UI=36215]="RGB16UI";a[a.RGBA8UI=36220]="RGBA8UI";a[a.RGB8UI=36221]="RGB8UI";a[a.RGBA32I=
36226]="RGBA32I";a[a.RGB32I=36227]="RGB32I";a[a.RGBA16I=36232]="RGBA16I";a[a.RGB16I=36233]="RGB16I";a[a.RGBA8I=36238]="RGBA8I";a[a.RGB8I=36239]="RGB8I";a[a.R8_SNORM=36756]="R8_SNORM";a[a.RG8_SNORM=36757]="RG8_SNORM";a[a.RGB8_SNORM=36758]="RGB8_SNORM";a[a.RGBA8_SNORM=36759]="RGBA8_SNORM";a[a.RGB10_A2=32857]="RGB10_A2";a[a.RGB10_A2UI=36975]="RGB10_A2UI"})(b.SizedPixelFormat||(b.SizedPixelFormat={}));b.PixelType=void 0;(function(a){a[a.FLOAT=5126]="FLOAT";a[a.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE";a[a.UNSIGNED_INT_24_8=
34042]="UNSIGNED_INT_24_8";a[a.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4";a[a.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1";a[a.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5";a[a.BYTE=5120]="BYTE";a[a.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT";a[a.SHORT=5122]="SHORT";a[a.UNSIGNED_INT=5125]="UNSIGNED_INT";a[a.INT=5124]="INT";a[a.HALF_FLOAT=5131]="HALF_FLOAT";a[a.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV";a[a.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV";
a[a.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV";a[a.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV"})(b.PixelType||(b.PixelType={}));b.RenderbufferFormat=void 0;(function(a){a[a.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16";a[a.STENCIL_INDEX8=36168]="STENCIL_INDEX8";a[a.DEPTH_STENCIL=34041]="DEPTH_STENCIL";a[a.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24";a[a.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F";a[a.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8";a[a.DEPTH32F_STENCIL8=
36013]="DEPTH32F_STENCIL8"})(b.RenderbufferFormat||(b.RenderbufferFormat={}));b.Usage=void 0;(function(a){a[a.STATIC_DRAW=35044]="STATIC_DRAW";a[a.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW";a[a.STREAM_DRAW=35040]="STREAM_DRAW";a[a.STATIC_READ=35045]="STATIC_READ";a[a.DYNAMIC_READ=35049]="DYNAMIC_READ";a[a.STREAM_READ=35041]="STREAM_READ";a[a.STATIC_COPY=35046]="STATIC_COPY";a[a.DYNAMIC_COPY=35050]="DYNAMIC_COPY";a[a.STREAM_COPY=35042]="STREAM_COPY"})(b.Usage||(b.Usage={}));b.ShaderType=void 0;(function(a){a[a.FRAGMENT_SHADER=
35632]="FRAGMENT_SHADER";a[a.VERTEX_SHADER=35633]="VERTEX_SHADER"})(b.ShaderType||(b.ShaderType={}));b.FramebufferTarget=void 0;(function(a){a[a.FRAMEBUFFER=36160]="FRAMEBUFFER";a[a.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER";a[a.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER"})(b.FramebufferTarget||(b.FramebufferTarget={}));b.TargetType=void 0;(function(a){a[a.TEXTURE=0]="TEXTURE";a[a.RENDER_BUFFER=1]="RENDER_BUFFER";a[a.CUBEMAP=2]="CUBEMAP"})(b.TargetType||(b.TargetType={}));b.DepthStencilTargetType=
void 0;(function(a){a[a.NONE=0]="NONE";a[a.DEPTH_RENDER_BUFFER=1]="DEPTH_RENDER_BUFFER";a[a.STENCIL_RENDER_BUFFER=2]="STENCIL_RENDER_BUFFER";a[a.DEPTH_STENCIL_RENDER_BUFFER=3]="DEPTH_STENCIL_RENDER_BUFFER";a[a.DEPTH_STENCIL_TEXTURE=4]="DEPTH_STENCIL_TEXTURE"})(b.DepthStencilTargetType||(b.DepthStencilTargetType={}));b.ResourceType=void 0;(function(a){a[a.Texture=0]="Texture";a[a.Buffer=1]="Buffer";a[a.VAO=2]="VAO";a[a.Shader=3]="Shader";a[a.Program=4]="Program";a[a.Framebuffer=5]="Framebuffer";a[a.Renderbuffer=
6]="Renderbuffer";a[a.Sync=7]="Sync";a[a.COUNT=8]="COUNT"})(b.ResourceType||(b.ResourceType={}));b.ColorAttachment=void 0;(function(a){a[a.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0";a[a.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1";a[a.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2";a[a.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3";a[a.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4";a[a.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5";a[a.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6";a[a.COLOR_ATTACHMENT7=36071]=
"COLOR_ATTACHMENT7";a[a.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8";a[a.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9";a[a.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10";a[a.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11";a[a.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12";a[a.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13";a[a.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14";a[a.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15"})(b.ColorAttachment||(b.ColorAttachment={}));b.CompressedTextureFormat=void 0;
(function(a){a[a.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT";a[a.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT";a[a.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT";a[a.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT";a[a.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC";a[a.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC";a[a.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC";a[a.COMPRESSED_SIGNED_RG11_EAC=
37491]="COMPRESSED_SIGNED_RG11_EAC";a[a.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2";a[a.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2";a[a.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2";a[a.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2";a[a.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC";a[a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC"})(b.CompressedTextureFormat||
(b.CompressedTextureFormat={}));b.UniformType=void 0;(function(a){a[a.FLOAT=5126]="FLOAT";a[a.FLOAT_VEC2=35664]="FLOAT_VEC2";a[a.FLOAT_VEC3=35665]="FLOAT_VEC3";a[a.FLOAT_VEC4=35666]="FLOAT_VEC4";a[a.INT=5124]="INT";a[a.INT_VEC2=35667]="INT_VEC2";a[a.INT_VEC3=35668]="INT_VEC3";a[a.INT_VEC4=35669]="INT_VEC4";a[a.BOOL=35670]="BOOL";a[a.BOOL_VEC2=35671]="BOOL_VEC2";a[a.BOOL_VEC3=35672]="BOOL_VEC3";a[a.BOOL_VEC4=35673]="BOOL_VEC4";a[a.FLOAT_MAT2=35674]="FLOAT_MAT2";a[a.FLOAT_MAT3=35675]="FLOAT_MAT3";a[a.FLOAT_MAT4=
35676]="FLOAT_MAT4";a[a.SAMPLER_2D=35678]="SAMPLER_2D";a[a.SAMPLER_CUBE=35680]="SAMPLER_CUBE";a[a.UNSIGNED_INT=5125]="UNSIGNED_INT";a[a.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2";a[a.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3";a[a.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4";a[a.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3";a[a.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4";a[a.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2";a[a.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4";a[a.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2";a[a.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3";
a[a.SAMPLER_3D=35679]="SAMPLER_3D";a[a.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW";a[a.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY";a[a.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW";a[a.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW";a[a.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D";a[a.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D";a[a.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE";a[a.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY";a[a.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D";a[a.UNSIGNED_INT_SAMPLER_3D=
36307]="UNSIGNED_INT_SAMPLER_3D";a[a.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE";a[a.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY"})(b.UniformType||(b.UniformType={}));b.SyncParameter=void 0;(function(a){a[a.OBJECT_TYPE=37138]="OBJECT_TYPE";a[a.SYNC_CONDITION=37139]="SYNC_CONDITION";a[a.SYNC_STATUS=37140]="SYNC_STATUS";a[a.SYNC_FLAGS=37141]="SYNC_FLAGS"})(b.SyncParameter||(b.SyncParameter={}));b.SyncStatus=void 0;(function(a){a[a.UNSIGNALED=37144]="UNSIGNALED";
a[a.SIGNALED=37145]="SIGNALED"})(b.SyncStatus||(b.SyncStatus={}));b.ClientWaitSyncStatus=void 0;(function(a){a[a.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED";a[a.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED";a[a.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED";a[a.WAIT_FAILED=37149]="WAIT_FAILED"})(b.ClientWaitSyncStatus||(b.ClientWaitSyncStatus={}));b.SyncCondition=void 0;(function(a){a[a.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE"})(b.SyncCondition||(b.SyncCondition={}));b.SyncFlag=
void 0;(function(a){a[a.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT"})(b.SyncFlag||(b.SyncFlag={}));b.BASE_TEXTURE_UNIT=33984;b.DepthStencilAttachment=33306;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderTechnique/ShaderTechniqueConfiguration":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers"],function(b,a){let q=function(){function p(){this._key="";this._keyDirty=!1;this._parameterBits=this._parameterBits?this._parameterBits.map(()=>
0):[];this._parameterNames||(this._parameterNames=[])}p.prototype.snapshot=function(){const g=this._parameterNames,m={key:this.key};for(const d of g)m[d]=this[d];return m};a._createClass(p,[{key:"key",get:function(){this._keyDirty&&(this._keyDirty=!1,this._key=String.fromCharCode.apply(String,this._parameterBits));return this._key}}]);return p}();b.ShaderTechniqueConfiguration=q;b.parameter=function(p={}){return(g,m)=>{var d,f;g._parameterNames=null!=(d=g._parameterNames)?d:[];g._parameterNames.push(m);
const l=g._parameterNames.length-1;d=Math.ceil(Math.log2(p.count||2));const t=null!=(f=g._parameterBits)?f:[0];let y=0;for(;16<t[y]+d;)y++,y>=t.length&&t.push(0);g._parameterBits=t;const w=t[y],v=(1<<d)-1<<w;t[y]+=d;Object.defineProperty(g,m,{get(){return this[l]},set(F){if(this[l]!==F&&(this[l]=F,this._keyDirty=!0,this._parameterBits[y]=this._parameterBits[y]&~v|+F<<w&v,"number"!==typeof F&&"boolean"!==typeof F))throw"Configuration value for "+m+" must be boolean or number, got "+typeof F;}})}};
Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/OrderIndependentTransparency":function(){define(["exports","./basicInterfaces","../../../webgl/enums","../../../webgl/renderState"],function(b,a,q,p){const g=p.separateBlendingParams(q.BlendFactor.SRC_ALPHA,q.BlendFactor.ONE,q.BlendFactor.ONE_MINUS_SRC_ALPHA,q.BlendFactor.ONE_MINUS_SRC_ALPHA),m=p.simpleBlendingParams(q.BlendFactor.ONE,q.BlendFactor.ONE),d=p.simpleBlendingParams(q.BlendFactor.ZERO,q.BlendFactor.ONE_MINUS_SRC_ALPHA),
f={factor:-1,units:-2};b.OITPolygonOffset=f;b.OITPolygonOffsetLimit=5E5;b.blendingAlpha=d;b.blendingColor=m;b.blendingDefault=g;b.getOITPolygonOffset=function(l){return l?f:null};b.oitBlending=function(l){return l===a.TransparencyPassType.FrontFace?null:l===a.TransparencyPassType.Alpha?d:m};b.oitDepthTest=function(l,t=q.CompareFunction.LESS){return l===a.TransparencyPassType.NONE||l===a.TransparencyPassType.FrontFace?t:q.CompareFunction.LEQUAL};b.oitDepthWrite=function(l){return l===a.TransparencyPassType.FrontFace?
p.defaultDepthWriteParams:null};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/webgl/renderState":function(){define(["exports","../3d/webgl-engine/lib/basicInterfaces","./enums"],function(b,a,q){function p(O){return C.intern(O)}function g(O){return D.intern(O)}function m(O){return n.intern(O)}function d(O){return z.intern(O)}function f(O){return h.intern(O)}function l(O){return L.intern(O)}function t(O){return M.intern(O)}function y(O){return P.intern(O)}function w(O){return"["+O.join(",")+
"]"}function v(O){return O?w([O.srcRgb,O.srcAlpha,O.dstRgb,O.dstAlpha,O.opRgb,O.opAlpha,O.color.r,O.color.g,O.color.b,O.color.a]):null}function F(O){return O?w([O.face,O.mode]):null}function x(O){return O?w([O.factor,O.units]):null}function u(O){return O?w([O.func]):null}function H(O){return O?w([O.function.func,O.function.ref,O.function.mask,O.operation.fail,O.operation.zFail,O.operation.zPass]):null}function I(O){return O?w([O.zNear,O.zFar]):null}function B(O){return O?w([O.r,O.g,O.b,O.a]):null}
function K(O){return O?w([O.mask]):null}const J={face:q.Face.BACK,mode:q.CullMode.CCW},c={face:q.Face.FRONT,mode:q.CullMode.CCW};var k=function(){function O(T,W){this.makeKey=T;this.makeRef=W;this.interns=new Map}O.prototype.intern=function(T){if(!T)return null;const W=this.makeKey(T),V=this.interns;V.has(W)||V.set(W,this.makeRef(T));return V.get(W)};return O}();const C=new k(v,O=>({__tag:"Blending",...O})),D=new k(F,O=>({__tag:"Culling",...O})),n=new k(x,O=>({__tag:"PolygonOffset",...O})),z=new k(u,
O=>({__tag:"DepthTest",...O})),h=new k(H,O=>({__tag:"StencilTest",...O})),L=new k(I,O=>({__tag:"DepthWrite",...O})),M=new k(B,O=>({__tag:"ColorWrite",...O})),P=new k(K,O=>({__tag:"StencilWrite",...O})),S=new k(function(O){return O?w([v(O.blending),F(O.culling),x(O.polygonOffset),u(O.depthTest),H(O.stencilTest),I(O.depthWrite),B(O.colorWrite),K(O.stencilWrite)]):null},O=>({blending:p(O.blending),culling:g(O.culling),polygonOffset:m(O.polygonOffset),depthTest:d(O.depthTest),stencilTest:f(O.stencilTest),
depthWrite:l(O.depthWrite),colorWrite:t(O.colorWrite),stencilWrite:y(O.stencilWrite)}));k=function(){function O(W){this._stencilWriteInvalid=this._colorWriteInvalid=this._depthWriteInvalid=this._stencilTestInvalid=this._depthTestInvalid=this._polygonOffsetInvalid=this._cullingInvalid=this._blendingInvalid=this._pipelineInvalid=!0;this._stateSetters=W}var T=O.prototype;T.setPipeline=function(W){if(this._pipelineInvalid||W!==this._pipeline)this._setBlending(W.blending),this._setCulling(W.culling),this._setPolygonOffset(W.polygonOffset),
this._setDepthTest(W.depthTest),this._setStencilTest(W.stencilTest),this._setDepthWrite(W.depthWrite),this._setColorWrite(W.colorWrite),this._setStencilWrite(W.stencilWrite),this._pipeline=W;this._pipelineInvalid=!1};T.invalidateBlending=function(){this._pipelineInvalid=this._blendingInvalid=!0};T.invalidateCulling=function(){this._pipelineInvalid=this._cullingInvalid=!0};T.invalidatePolygonOffset=function(){this._pipelineInvalid=this._polygonOffsetInvalid=!0};T.invalidateDepthTest=function(){this._pipelineInvalid=
this._depthTestInvalid=!0};T.invalidateStencilTest=function(){this._pipelineInvalid=this._stencilTestInvalid=!0};T.invalidateDepthWrite=function(){this._pipelineInvalid=this._depthWriteInvalid=!0};T.invalidateColorWrite=function(){this._pipelineInvalid=this._colorWriteInvalid=!0};T.invalidateStencilWrite=function(){this._pipelineInvalid=this._stencilTestInvalid=!0};T._setBlending=function(W){this._blending=this._setSubState(W,this._blending,this._blendingInvalid,this._stateSetters.setBlending);this._blendingInvalid=
!1};T._setCulling=function(W){this._culling=this._setSubState(W,this._culling,this._cullingInvalid,this._stateSetters.setCulling);this._cullingInvalid=!1};T._setPolygonOffset=function(W){this._polygonOffset=this._setSubState(W,this._polygonOffset,this._polygonOffsetInvalid,this._stateSetters.setPolygonOffset);this._polygonOffsetInvalid=!1};T._setDepthTest=function(W){this._depthTest=this._setSubState(W,this._depthTest,this._depthTestInvalid,this._stateSetters.setDepthTest);this._depthTestInvalid=
!1};T._setStencilTest=function(W){this._stencilTest=this._setSubState(W,this._stencilTest,this._stencilTestInvalid,this._stateSetters.setStencilTest);this._stencilTestInvalid=!1};T._setDepthWrite=function(W){this._depthWrite=this._setSubState(W,this._depthWrite,this._depthWriteInvalid,this._stateSetters.setDepthWrite);this._depthWriteInvalid=!1};T._setColorWrite=function(W){this._colorWrite=this._setSubState(W,this._colorWrite,this._colorWriteInvalid,this._stateSetters.setColorWrite);this._colorWriteInvalid=
!1};T._setStencilWrite=function(W){this._stencilWrite=this._setSubState(W,this._stencilWrite,this._stencilWriteInvalid,this._stateSetters.setStencilWrite);this._stencilTestInvalid=!1};T._setSubState=function(W,V,U,G){if(U||W!==V)G(W),this._pipelineInvalid=!0;return W};return O}();b.StateTracker=k;b.backFaceCullingParams=J;b.cullingParams=O=>O===a.CullFaceOptions.Back?J:O===a.CullFaceOptions.Front?c:null;b.defaultColorWriteParams={r:!0,g:!0,b:!0,a:!0};b.defaultDepthWriteParams={zNear:0,zFar:1};b.frontFaceCullingParams=
c;b.makeBlending=p;b.makeColorWrite=t;b.makeCulling=g;b.makeDepthTest=d;b.makeDepthWrite=l;b.makePipelineState=function(O){return S.intern(O)};b.makePolygonOffset=m;b.makeStencilTest=f;b.makeStencilWrite=y;b.separateBlendingParams=function(O,T,W,V,U=q.BlendOperation.ADD,G=q.BlendOperation.ADD,A=[0,0,0,0]){return{srcRgb:O,srcAlpha:T,dstRgb:W,dstAlpha:V,opRgb:U,opAlpha:G,color:{r:A[0],g:A[1],b:A[2],a:A[3]}}};b.simpleBlendingParams=function(O,T,W=q.BlendOperation.ADD,V=[0,0,0,0]){return{srcRgb:O,srcAlpha:O,
dstRgb:T,dstAlpha:T,opRgb:W,opAlpha:W,color:{r:V[0],g:V[1],b:V[2],a:V[3]}}};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/Program":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/maybe","../../../../core/PooledArray","../../../webgl/checkWebGLError"],function(b,a,q,p,g){let m=function(){function d(l,t,y){this._context=l;this._locations=y;this._textures=new Map;this._freeTextureUnits=new p({deallocator:null});this._glProgram=
l.programCache.acquire(t.generateSource("vertex"),t.generateSource("fragment"),y);this._glProgram.stop=()=>{throw Error("Wrapped _glProgram used directly");};this._fragmentUniforms=g.webglDebugEnabled()?t.fragmentUniforms.entries:null}var f=d.prototype;f.dispose=function(){this._glProgram.dispose()};f.setUniform1b=function(l,t){this._glProgram.setUniform1i(l,t?1:0)};f.setUniform1i=function(l,t){this._glProgram.setUniform1i(l,t)};f.setUniform1f=function(l,t){this._glProgram.setUniform1f(l,t)};f.setUniform1fv=
function(l,t){this._glProgram.setUniform1fv(l,t)};f.setUniform1iv=function(l,t){this._glProgram.setUniform1iv(l,t)};f.setUniform2f=function(l,t,y){this._glProgram.setUniform2f(l,t,y)};f.setUniform2fv=function(l,t){this._glProgram.setUniform2fv(l,t)};f.setUniform2iv=function(l,t){this._glProgram.setUniform2iv(l,t)};f.setUniform3f=function(l,t,y,w){this._glProgram.setUniform3f(l,t,y,w)};f.setUniform3fv=function(l,t){this._glProgram.setUniform3fv(l,t)};f.setUniform3iv=function(l,t){this._glProgram.setUniform3iv(l,
t)};f.setUniform4f=function(l,t,y,w,v){this._glProgram.setUniform4f(l,t,y,w,v)};f.setUniform4fv=function(l,t){this._glProgram.setUniform4fv(l,t)};f.setUniform4iv=function(l,t){this._glProgram.setUniform4iv(l,t)};f.setUniformMatrix3fv=function(l,t){this._glProgram.setUniformMatrix3fv(l,t)};f.setUniformMatrix4fv=function(l,t){this._glProgram.setUniformMatrix4fv(l,t)};f.assertCompatibleVertexAttributeLocations=function(l){l.locations!==this._locations&&console.error("VertexAttributeLocations are incompatible")};
f.stop=function(){this._textures.clear();this._freeTextureUnits.clear()};f.bindTexture=function(l,t){if(q.isNone(l)||null==l.glName){if(l=this._textures.get(t))this._context.bindTexture(null,l.unit),this._freeTextureUnit(l),this._textures.delete(t);return null}let y=this._textures.get(t);null==y?(y=this._allocTextureUnit(l),this._textures.set(t,y)):y.texture=l;this._context.useProgram(this);this.setUniform1i(t,y.unit);this._context.bindTexture(l,y.unit);return y.unit};f.rebindTextures=function(){this._context.useProgram(this);
this._textures.forEach((l,t)=>{this._context.bindTexture(l.texture,l.unit);this.setUniform1i(t,l.unit)});q.isSome(this._fragmentUniforms)&&this._fragmentUniforms.forEach(l=>{if(("sampler2D"===l.type||"samplerCube"===l.type)&&!this._textures.has(l.name))throw Error(`Texture sampler ${l.name} has no bound texture`);})};f._allocTextureUnit=function(l){return{texture:l,unit:0===this._freeTextureUnits.length?this._textures.size:this._freeTextureUnits.pop()}};f._freeTextureUnit=function(l){this._freeTextureUnits.push(l.unit)};
a._createClass(d,[{key:"glName",get:function(){return this._glProgram.glName}},{key:"isCompiled",get:function(){return this._glProgram.isCompiled}}]);return d}();b.Program=m;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/webgl/checkWebGLError":function(){define(["exports","../../core/Error","../../core/has","../../core/Logger"],function(b,a,q,p){function g(f,l){switch(l){case f.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";
case f.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case f.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case f.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case f.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case f.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";
default:return"Unknown error"}}const m=p.getLogger("esri/views/webgl"),d=!!q("enable-feature:webgl-debug");b.checkWebGLError=function(f){if(d){const l=f.getError();l&&(f=g(f,l),m.error(new a("webgl-error","WebGL error occured",{message:f,stack:Error().stack})))}};b.hasFeatureFlagWebGLDebug=d;b.webglDebugEnabled=function(){return d};b.webglValidateShadersEnabled=function(){return d};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/StencilUtils":function(){define(["exports",
"./basicInterfaces","../../../webgl/enums"],function(b,a,q){const p={func:q.CompareFunction.LESS},g={function:{func:q.CompareFunction.ALWAYS,ref:a.StencilBits.OutlineVisualElementMask,mask:a.StencilBits.OutlineVisualElementMask},operation:{fail:q.StencilOperation.KEEP,zFail:q.StencilOperation.KEEP,zPass:q.StencilOperation.ZERO}},m={function:{func:q.CompareFunction.ALWAYS,ref:a.StencilBits.OutlineVisualElementMask,mask:a.StencilBits.OutlineVisualElementMask},operation:{fail:q.StencilOperation.KEEP,
zFail:q.StencilOperation.KEEP,zPass:q.StencilOperation.REPLACE}},d={function:{func:q.CompareFunction.EQUAL,ref:a.StencilBits.OutlineVisualElementMask,mask:a.StencilBits.OutlineVisualElementMask},operation:{fail:q.StencilOperation.KEEP,zFail:q.StencilOperation.KEEP,zPass:q.StencilOperation.KEEP}};a={function:{func:q.CompareFunction.NOTEQUAL,ref:a.StencilBits.OutlineVisualElementMask,mask:a.StencilBits.OutlineVisualElementMask},operation:{fail:q.StencilOperation.KEEP,zFail:q.StencilOperation.KEEP,zPass:q.StencilOperation.KEEP}};
b.depthCompareAlways={func:q.CompareFunction.ALWAYS};b.depthCompareLess=p;b.renderWhenBitIsNotSet=f=>({function:{func:q.CompareFunction.NOTEQUAL,ref:f,mask:f},operation:{fail:q.StencilOperation.KEEP,zFail:q.StencilOperation.KEEP,zPass:q.StencilOperation.KEEP}});b.replaceBitWhenDepthTestPasses=f=>({function:{func:q.CompareFunction.ALWAYS,ref:f,mask:f},operation:{fail:q.StencilOperation.KEEP,zFail:q.StencilOperation.KEEP,zPass:q.StencilOperation.REPLACE}});b.stencilBaseAllZerosParams=g;b.stencilToolMaskBaseParams=
m;b.stencilToolMaskOccluderParams=d;b.stencilToolTransparentOccluderParams=a;b.stencilWriteMaskOff={mask:0};b.stencilWriteMaskOn={mask:255};Object.defineProperty(b,"__esModule",{value:!0})})},"fx3d/views/3d/webgl-engine-extensions/GLVerTexture":function(){define(["dojo/_base/declare","../support/fx3dUtils"],function(b,a){var q=0;return b(null,{declaredClass:"esri.views.3d.webgl-engine-extensions.GLVerTexture",constructor:function(p){this.id=q++;this._gl=p;this._ready=!1;this._textureHandle=this._pixelDataType=
this._pixelData=null;this._gl&&(this._textureHandle=this._gl.createTexture())},_setTexParams:function(){this._gl.pixelStorei(this._gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE);this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE);this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST);this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,
this._gl.NEAREST)},_reset:function(p,g){this._width=p;this._height=g;this._pixelSize=window.parseInt(this._width*this._height*4);(this._isPowerOfTwo=a.isPowerOfTwo(p)&&a.isPowerOfTwo(g))||(console.warn("Width and height are not power of 2, and the rendering may be incorrect."),console.error("GLVerTexture ERROR 222"))},initTexture:function(p,g,m){if(m instanceof Uint8Array)this._pixelDataType=5121;else{if(!(m instanceof Float32Array))return;this._pixelDataType=5126}return this._reset(p,g),isNaN(this._pixelSize)||
this._pixelSize!==m.length?(console.warn("The pixel size is invalid."),void console.error("GLVerTexture ERROR 333")):(this._gl.bindTexture(this._gl.TEXTURE_2D,this._textureHandle),this._setTexParams(),void this._texImage2D())},setData:function(p,g,m){if(m instanceof Uint8Array)this._pixelDataType=5121;else{if(!(m instanceof Float32Array))return;this._pixelDataType=5126}return this._reset(p,g),isNaN(this._pixelSize)||this._pixelSize!==m.length?(console.warn("The pixel size is invalid."),void console.error("GLVerTexture ERROR 333")):
(this._pixelData=m,this._gl.bindTexture(this._gl.TEXTURE_2D,this._textureHandle),this._setTexParams(),void this._texImage2D())},updateTexture:function(p){this._pixelData=p;this._gl.bindTexture(this._gl.TEXTURE_2D,this._textureHandle);this._setTexParams();this._texImage2D();this._showError()},syncData:function(p){this._gl.bindTexture(this._gl.TEXTURE_2D,this._textureHandle);this._setTexParams();this._texImage2D();this._showError()},_showError:function(){var p=this._gl.getError();0!==p&&console.error("TEX Error \x3d\x3d\x3e "+
p)},bind:function(p){return this._textureHandle?("number"==typeof p&&this._gl.activeTexture(33984+p),this._gl.bindTexture(3553,this._textureHandle),void this.syncData()):void console.error("GLVerTexture ERROR 444")},unbind:function(){this._gl.bindTexture(3553,null)},release:function(){this._gl.bindTexture(3553,null)},getTextureHandle:function(){return this._textureHandle},dispose:function(){this._textureHandle.__deleted__=!0;this._gl.deleteTexture(this._textureHandle)},_texImage2D:function(){var p=
this._gl.RGBA;this._gl instanceof WebGLRenderingContext||this._gl instanceof WebGL2RenderingContext&&(p=this._gl.RGBA32F);this._gl.texImage2D(this._gl.TEXTURE_2D,0,p,this._width,this._height,0,this._gl.RGBA,this._pixelDataType,this._pixelData)}})})},"fx3d/views/3d/effects/FxEffectFactory":function(){define(["dojo/Deferred","../support/fx3dUtils"],function(b,a){return{make:function(q){var p=new b;if(q instanceof Object&&q.layer&&q.view&&q.layerView){var g=q.layer.vizType;if("string"!=typeof g)p.reject("No viz type specified.");
else{var m=g+"Effect";g=q._test&&a.enableAddTesting?"fx3d/views/3d/effects/_test/"+m:"fx3d/views/3d/effects/"+g+"/"+m;try{require([g],function(d){d=new d(q);p.resolve(d)})}catch(d){p.reject(d)}}}else p.reject("No FxLayer object found.");return p}}})},"url:fx3d/views/3d/effects/config.json":'{"point":[{"name":"Bounce","icon":"Bounce.png","requireTimeInfo": true,"status": null,"renderingInfo":[{"name":"visible","displayName":"Visible","dataType":"Boolean","defaultValue": true},{"name":"repeat","displayName":"Repeat","dataType":"Integer","defaultValue": 1000,"scope":[0, 10000000000]},{"name":"animationInterval","displayName":"Interval","dataType":"Speed","defaultValue": 1,"scope":[1, 5],"unit":"esriSecond"},{"name":"radius","displayName":"Radius","dataType":"Size","defaultValue": 30,"scope":[10, 50],"unit":"esriPixels"},{"name":"dashHeight","displayName":"DashHeight","dataType":"Size","defaultValue": 80000,"scope":[100, 500000],"unit":"esriMeters"},{"name":"transparency","displayName":"Transparency","dataType":"Transparency","defaultValue": 100,"scope":[0, 100],"unit":"esriPercentage"},{"name":"haloColors","displayName":"HaloColors","dataType":"MultiRGBColors","defaultValue":[[95, 158, 160],[154, 205, 50],[255, 182, 193],[255, 69, 0],[0, 128, 0],[205, 92, 92]]}]},{"name":"PointExtrude","icon":"PointExtrude.png","renderingInfo":[{"name":"visible","displayName":"Visible","dataType":"Boolean","defaultValue": true},{"name":"repeat","displayName":"Repeat","dataType":"Integer","defaultValue": 5,"scope":[0, 10000000000]},{"name":"animationInterval","displayName":"Interval","dataType":"Speed","defaultValue": 5,"scope":[2, 20],"unit":"esriSecond"},{"name":"shapeType","displayName":"Shape","dataType":"Shape","scope":["Cuboid","Cylinder","Hexahedron"],"defaultValue":"Cylinder"},{"name":"radius","displayName":"Radius","dataType":"Size","defaultValue": 60000,"scope":[1, 120000],"unit":"esriMeters"},{"name":"height","displayName":"Height","dataType":"Size","defaultValue": 800000,"scope":[100, 2000000],"unit":"esriMeters"},{"name":"transparency","displayName":"Transparency","dataType":"Transparency","defaultValue": 100,"scope":[0, 100],"unit":"esriPercentage"},{"name":"topColors","displayName":"TopColors","dataType":"MultiRGBColor","defaultValue":[[95, 158, 160],[154, 205, 50],[255, 182, 193],[255, 69, 0],[0, 128, 0],[205, 92, 92]]},{"name":"bottomColor","displayName":"BottomColor","dataType":"SingleRGBColor","defaultValue":[0, 255, 0]}]},{"name":"Pulse","icon":"Pulse.png","renderingInfo":[{"name":"visible","displayName":"Visible","dataType":"Boolean","defaultValue": true},{"name":"repeat","displayName":"Repeat","dataType":"Integer","defaultValue": 5,"scope":[0, 10000000000]},{"name":"animationInterval","displayName":"Interval","dataType":"Speed","defaultValue": 5,"scope":[2, 20],"unit":"esriSecond"},{"name":"shapeType","displayName":"Shape","dataType":"Shape","scope":["Circle","Triangle","Square","Hexagon"],"defaultValue":"Circle"},{"name":"radius","displayName":"InnerRadius","dataType":"Size","defaultValue": 50000,"scope":[1, 120000],"unit":"esriMeters"},{"name":"transparency","displayName":"Transparency","dataType":"Transparency","defaultValue": 100,"scope":[0, 100],"unit":"esriPercentage"},{"name":"solidColor","displayName":"SolidColor","dataType":"SingleRGBColor","defaultValue":[255, 255, 20]},{"name":"haloColors","displayName":"HaloColors","dataType":"MultiRGBColor","defaultValue":[[95, 158, 160],[154, 205, 50],[255, 182, 193],[255, 69, 0],[0, 128, 0],[205, 92, 92]]}]}],"polyline":[{"name":"Fireball","icon":"Fireball.png","renderingInfo":[{"name":"visible","displayName":"Visible","dataType":"Boolean","defaultValue": true},{"name":"repeat","displayName":"Repeat","dataType":"Integer","defaultValue": 10,"scope":[0, 10000000000]},{"name":"animationInterval","displayName":"Interval","dataType":"Speed","defaultValue": 5,"scope":[2, 20],"unit":"esriSecond"},{"name":"transparency","displayName":"Transparency","dataType":"Transparency","defaultValue": 100,"scope":[0, 100],"unit":"esriPercentage"},{"name":"radius","displayName":"Radius","dataType":"Size","defaultValue": 40,"scope":[30, 120],"unit":"esriPixels"},{"name":"colors","displayName":"Colors","dataType":"MultiRGBColors","defaultValue":[[95, 158, 160],[154, 205, 50],[255, 182, 193],[255, 69, 0],[0, 128, 0],[205, 92, 92]]}]},{"name":"JetTrail","icon":"JetTrail.png","renderingInfo":[{"name":"visible","displayName":"Visible","dataType":"Boolean","defaultValue": true},{"name":"repeat","displayName":"Repeat","dataType":"Integer","defaultValue": 1000,"scope":[0, 10000000000]},{"name":"animationInterval","displayName":"Interval","dataType":"Speed","defaultValue": 5,"scope":[2, 20],"unit":"esriSecond"},{"name":"transparency","displayName":"Transparency","dataType":"Transparency","defaultValue": 100,"scope":[0, 100],"unit":"esriPercentage"},{"name":"radius","displayName":"Radius","dataType":"Size","defaultValue": 20,"scope":[10, 50],"unit":"esriPixels"},{"name":"pulseRadius","displayName":"PulseRadius","dataType":"Size","defaultValue": 100000,"scope":[20000, 400000],"unit":"esriMeters"},{"name":"colors","displayName":"Colors","dataType":"MultiRGBColors","defaultValue":[[95, 158, 160],[154, 205, 50],[255, 182, 193],[255, 69, 0],[0, 128, 0],[205, 92, 92]]}]}],"polygon":[{"name":"AreaExtrude","icon":"AreaExtrude.png","renderingInfo":[{"name":"visible","displayName":"Visible","dataType":"Boolean","defaultValue": true},{"name":"repeat","displayName":"Repeat","dataType":"Integer","defaultValue": 5,"scope":[0, 10000000000]},{"name":"animationInterval","displayName":"Interval","dataType":"Speed","defaultValue": 5,"scope":[2, 20],"unit":"esriSecond"},{"name":"height","displayName":"Height","dataType":"Size","defaultValue": 10000,"scope":[1, 3000000],"unit":"esriMeters"},{"name":"transparency","displayName":"Transparency","dataType":"Transparency","defaultValue": 100,"scope":[0, 100],"unit":"esriPercentage"},{"name":"topColors","displayName":"TopColors","dataType":"MultiRGBColor","defaultValue":[[95, 158, 160],[154, 205, 50],[255, 182, 193],[255, 69, 0],[0, 128, 0],[205, 92, 92]]},{"name":"bottomColor","displayName":"BottomColor","dataType":"SingleRGBColor","defaultValue":[0, 255, 0]}]}]}',
"url:fx3d/views/3d/effects/CommonShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\x3c!-- Copyright @ 2022 Esri. All rights reserved under the copyright laws of the United States and applicable international laws, treaties, and conventions. --\x3e\x3csnippets\x3e\x3csnippet name\x3d"backEaseIn"\x3e\x3c![CDATA[float getBackEaseInValue(float a,float b,float c,float d){float e\x3dc-b;float f\x3d1.70158;float g\x3da/d;return e*(g*g)*((f+1.0)*g-f)+b;}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"bounceEaseOut"\x3e\x3c![CDATA[float getBounceEaseOutValue(float a,float b,float c,float d){float e\x3dc-b;if((a/\x3dd)\x3c(1.0/2.75)) return e*(7.5625*a*a)+b;else if(a\x3c(2.0/2.75)) return e*(7.5625*(a-\x3d(1.5/2.75))*a+0.75)+b;else if(a\x3c(2.5/2.75)) return e*(7.5625*(a-\x3d(2.25/2.75))*a+0.9375)+b;else return e*(7.5625*(a-\x3d(2.625/2.75))*a+0.984375)+b;}float getBounceEaseInValue(float a,float b,float c,float d){return c-getBounceEaseOutValue(d-a,0.0,c,d)+b;}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"circEaseOut"\x3e\x3c![CDATA[float getCircEaseOutValue(float a,float b,float c,float d){float e\x3dc-b;float f\x3da/d-1.0;return e*sqrt(1.0-f*f)+b;}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"convertHSLtoRGB"\x3e\x3c![CDATA[vec4 a(vec4 b){const float c\x3d1.0/3.0;const float d\x3d2.0/3.0;const float e\x3d6.0;float f\x3db.x;float g\x3db.y;float h\x3db.z;vec3 i\x3dvec3(e*(f-d),0.0,e*(1.0-f));if(f\x3cd){i.r\x3d0.0;i.g\x3de*(d-f);i.b\x3de*(f-c);}if(f\x3cc){i.r\x3de*(c-f);i.g\x3de*f;i.b\x3d0.0;}i\x3dmin(i,1.0);float j\x3d2.0*g;float k\x3d1.0-g;float l\x3d1.0-h;float m\x3d(2.0*h)-1.0;vec3 n\x3d(j*i)+k;vec3 o;if(h\x3e\x3d0.5) o\x3d(l*n)+m;else o\x3dh*n;return vec4(o,b.a);}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"cubicEaseOut"\x3e\x3c![CDATA[float getCubicEaseInOutValue(float a,float b,float c,float d){float e\x3dc-b;if((a/\x3dd/2.0)\x3c1.0) return e/2.0*pow(a,3.0)+b;return e/2.0*((a-\x3d2.0)*pow(a,2.0)+2.0)+b;}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"curveInter"\x3e\x3c![CDATA[float b3p0(float a,float b){float c\x3d1.0-a;return pow(c,3.0)*b;}float b3p1(float a,float b){float c\x3d1.0-a;return 3.0*pow(c,2.0)*a*b;}float b3p2(float a,float b){float c\x3d1.0-a;return 3.0*c*pow(a,2.0)*b;}float b3p3(float a,float b){return pow(a,3.0)*b;}float b3(float a,float d,float e,float f,float g){return b3p0(a,d)+b3p1(a,e)+b3p2(a,f)+b3p3(a,g);}vec3 getPoint(float a,vec3 h,vec3 i,vec3 j,vec3 k){float l,m,n;l\x3db3(a,h.x,i.x,j.x,k.x);m\x3db3(a,h.y,i.y,j.y,k.y);n\x3db3(a,h.z,i.z,j.z,k.z);return vec3(l,m,n);}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"defines"\x3e\x3c![CDATA[\r\n#ifdef GL_ES\r\nprecision mediump float;\r\n#endif\r\n#define Epsilon \t\t1e-6\r\n#define PI \t\t\t\t\t3.14159265358979323846264338327950288\r\n#define EarthRadius 6378137.0\r\n#define DegPerRad \t57.295779513082320\r\n#define RadPerDeg \t0.017453292519943\r\n]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"defines2"\x3e\x3c![CDATA[\r\n#ifdef GL_ES\r\nprecision mediump float;\r\n#endif\r\n]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"elasticEaseIn"\x3e\x3c![CDATA[float getElasticEaseInValue(float a,float b,float c,float d){float e\x3dc-b;float f\x3dd*0.3;float g\x3de;float h\x3df/4.0;float i\x3da-1.0;return -(g*pow(2.0,10.0*i)*sin((i*d-h)*(2.0*PI)/f))+b;}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"expoEaseOut"\x3e\x3c![CDATA[float getExpoEaseOutValue(float a,float b,float c,float d){float e\x3dc-b;return (abs(a-d)\x3cEpsilon)?c:(e*(-pow(2.0,-10.0*a/d)+1.0)+b);}float getExpoEaseInValue(float a,float b,float c,float d){float e\x3dc-b;return (abs(a)\x3cEpsilon)?b:(e*pow(2.0,10.0*(a/d-1.0))+b);}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"float2rgba"\x3e\x3c![CDATA[vec4 a(float v){float b\x3dfloor(v*256.0)/255.0;float c\x3dfloor(fract(v*256.0)*256.0)/255.0;float d\x3dfloor(fract(v*65536.0)*256.0)/255.0;float e\x3d1.0;return vec4(b,c,d,e);}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"getHSVColor"\x3e\x3c![CDATA[vec4 getHSVColor(float a,float b,float c){vec3 d\x3dvec3(1.0,1.0,0.0);float e\x3da/60.0;float f\x3dfloor(e);float g\x3de-f;float h\x3dc*(1.0-b);float i\x3dc*(1.0-b*g);float j\x3dc*(1.0-b*(1.0-g));if(f\x3c0.5) d\x3dvec3(c,j,h);else if(f\x3c1.5) d\x3dvec3(i,c,h);else if(f\x3c2.5) d\x3dvec3(h,c,j);else if(f\x3c3.5) d\x3dvec3(h,i,c);else if(f\x3c4.5) d\x3dvec3(j,h,c);else d\x3dvec3(c,h,i);return vec4(d,0.7);}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"linearInterpolator"\x3e\x3c![CDATA[float getLinearValue(vec2 a,float b){if(a[1]\x3d\x3da[0]) return 0.0;else{return (b-a[0])/(a[1]-a[0]);}}float getScope(vec2 c,float d){return c[0]+(c[1]-c[0])*d;}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"localTrans"\x3e\x3c![CDATA[vec3 wgs84ToWebMerc(vec3 a){float b\x3d0.4999999*PI;float c\x3da[1]*RadPerDeg;c\x3dclamp(c,-b,b);float d\x3dsin(c);float e\x3dRadPerDeg*a[0]*EarthRadius;float f\x3dEarthRadius*0.5*log((1.0+d)/(1.0-d));float g\x3da[2];return vec3(e,f,g);}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"lonlat2position"\x3e\x3c![CDATA[vec3 lonlat2position(vec3 a){float b\x3dRadPerDeg*(a.x);float c\x3dRadPerDeg*(a.y);float d\x3dcos(c);float e\x3dEarthRadius+a.z;float f\x3dcos(b)*d*e;float g\x3dsin(b)*d*e;float h\x3dsin(c)*e;return vec3(f,g,h);}vec3 position2lonlat(vec3 i){float j\x3dlength(i);float k\x3dasin(i.z/j);float d\x3dcos(k);float l\x3d-1.0;if(i.y\x3e0.0){l\x3d1.0;}float m\x3dl*acos(i.x/(d*j));float b\x3dDegPerRad*(m);float c\x3dDegPerRad*(k);return vec3(b,c,j-EarthRadius);}mat4 toRotationMat(mat4 n){mat4 o\x3dmat4(1.0);o[0]\x3dn[0];o[1]\x3dn[1];o[2]\x3dn[2];return o;}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"lonlatDistance"\x3e\x3c![CDATA[float a(vec2 b,vec2 c){float d\x3dRadPerDeg*(b.y);float e\x3dRadPerDeg*(c.y);float f\x3dRadPerDeg*(c.y-b.y);float g\x3dRadPerDeg*(c.x-b.x);float h\x3dsin(f/2.0)*sin(f/2.0)+cos(d)*cos(e)*sin(g/2.0)*sin(g/2.0);float i\x3d2.0*atan2(sqrt(h),sqrt(1.0-h));return EarthRadius*i;}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"packDepth"\x3e\x3c![CDATA[\r\n#ifdef GL_ES\r\nprecision mediump float;\r\n#endif\r\nvec4 packDepth(const in mediump float a){const mediump vec4 b\x3dvec4(256.0,256.0*256.0,256.0*256.0*256.0,256.0*256.0*256.0*256.0);vec4 c\x3da*b;c.x\x3dmin(c.x+1.0,255.0);c\x3dfract(floor(c)/256.0);return c;}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"quintEaseOut"\x3e\x3c![CDATA[float getQuintEaseInOutValue(float a,float b,float c,float d){float e\x3dc-b;if((a/\x3d(d/2.0))\x3c1.0){return e/2.0*a*a*a*a*a+b;}return e/2.0*((a-\x3d2.0)*a*a*a*a+2.0)+b;}float getQuintEaseOut(float a,float b,float c,float d){float e\x3dc-b;return e*((a\x3da/d-1.0)*a*a*a*a+1.0)+b;}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"rotateFromToMat"\x3e\x3c![CDATA[mat4 rotateFromTo(vec3 a,vec3 b){mat4 c\x3dmat4(1.0);vec3 d\x3dnormalize(a);vec3 e\x3dnormalize(b);float f\x3ddot(d,e);float g\x3dsqrt(1.0-f*f);float h\x3d1.0-f;vec3 i\x3dcross(d,e);i\x3dnormalize(i);float j\x3di.x,k\x3di.y,l\x3di.z;float m\x3dc[0].x,n\x3dc[0].y,o\x3dc[0].z,p\x3dc[0].w,q\x3dc[1].x,r\x3dc[1].y,s\x3dc[1].z,t\x3dc[1].w,u\x3dc[2].x,v\x3dc[2].y,w\x3dc[2].z,x\x3dc[2].w;float y\x3dj*j*h+f,z\x3dk*j*h+l*g,A\x3dl*j*h-k*g,B\x3dj*k*h-l*g,C\x3dk*k*h+f,D\x3dl*k*h+j*g,E\x3dj*l*h+k*g,F\x3dk*l*h-j*g,G\x3dl*l*h+f;c[0].x\x3dm*y+q*z+u*A;c[0].y\x3dn*y+r*z+v*A;c[0].z\x3do*y+s*z+w*A;c[0].w\x3dp*y+t*z+x*A;c[1].x\x3dm*B+q*C+u*D;c[1].y\x3dn*B+r*C+v*D;c[1].z\x3do*B+s*C+w*D;c[1].w\x3dp*B+t*C+x*D;c[2].x\x3dm*E+q*F+u*G;c[2].y\x3dn*E+r*F+v*G;c[2].z\x3do*E+s*F+w*G;c[2].w\x3dp*E+t*F+x*G;return c;}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"translationMat"\x3e\x3c![CDATA[mat4 rotateX(mat4 a,float b){mat4 c\x3da;float d\x3dsin(b);float e\x3dcos(b);float f\x3da[1].x,g\x3da[1].y,h\x3da[1].z,i\x3da[1].w,j\x3da[2].x,k\x3da[2].y,l\x3da[2].z,m\x3da[2].w;c[1].x\x3df*e+j*d;c[1].y\x3dg*e+k*d;c[1].z\x3dh*e+l*d;c[1].w\x3di*e+m*d;c[2].x\x3df*(-d)+j*e;c[2].y\x3dg*(-d)+k*e;c[2].z\x3dh*(-d)+l*e;c[2].w\x3di*(-d)+m*e;return c;}mat4 rotateY(mat4 a,float b){mat4 c\x3da;float d\x3dsin(b);float e\x3dcos(b);float n\x3da[0].x,o\x3da[0].y,p\x3da[0].z,q\x3da[0].w,j\x3da[2].x,k\x3da[2].y,l\x3da[2].z,m\x3da[2].w;c[0].x\x3dn*e+j*(-d);c[0].y\x3do*e+k*(-d);c[0].z\x3dp*e+l*(-d);c[0].w\x3dq*e+m*(-d);c[2].x\x3dn*d+j*e;c[2].y\x3do*d+k*e;c[2].z\x3dp*d+l*e;c[2].w\x3dq*d+m*e;return c;}mat4 getTransMat(vec3 r){mat4 s\x3dmat4(1.0);float t\x3dRadPerDeg*(r.x);float u\x3dRadPerDeg*(r.y);float v\x3dsin(t),w\x3dcos(t),x\x3dsin(u),y\x3dcos(u);s[0].x\x3d-v;s[1].x\x3d-x*w;s[2].x\x3dy*w;s[0].y\x3dw;s[1].y\x3d-x*v;s[2].y\x3dy*v;s[0].z\x3d0.0;s[1].z\x3dy;s[2].z\x3dx;s[0].w\x3d0.0;s[1].w\x3d0.0;s[2].w\x3d0.0;s[3].xyz\x3dlonlat2position(r);s[3].w\x3d1.0;return s;}vec3 rotateOnAxis(vec3 z,float b,vec3 A){vec3 B;float C\x3db*0.5;float d\x3dsin(C);float D\x3dcos(C);float E\x3dd*z[0];float F\x3dd*z[1];float G\x3dd*z[2];float H\x3dA[0],I\x3dA[1],J\x3dA[2];float K\x3dD*H+F*J-G*I,L\x3dD*I+G*H-E*J,M\x3dD*J+E*I-F*H,N\x3d-E*H-F*I-G*J;B[0]\x3dK*D+N*-E+L*-G-M*-F;B[1]\x3dL*D+N*-F+M*-E-K*-G;B[2]\x3dM*D+N*-G+K*-F-L*-E;return B;}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"transparentFunc"\x3e\x3c![CDATA[\r\n#extension GL_OES_standard_derivatives : enable\r\nfloat edgeFactor(float a,float b){vec3 b\x3dfwidth(a);vec3 c\x3dsmoothstep(vec3(0.0),b*1.5,a);return min(min(c.x,c.y),c.z);}]]\x3e\x3c/snippet\x3e\x3c/snippets\x3e'}});
define("dojo/_base/lang esri/core/has dojo/_base/array esri/request esri/PopupTemplate esri/core/lang esri/tasks/support/Query esri/layers/FeatureLayer esri/layers/support/fieldUtils esri/renderers/support/styleUtils esri/layers/support/arcgisLayerUrl esri/geometry/SpatialReference ../views/3d/support/fx3dUtils ../views/3d/layers/FxLayerView3D".split(" "),function(b,a,q,p,g,m,d,f,l,t,y,w,v,F){function x(u){var H=[],I=[],B=["small-integer","integer","single","long","double"],K="lat latitude y ycenter latitude83 latdecdeg POINT-Y lon lng long longitude x xcenter longitude83 longdecdeg POINT-X alt altitude z POINT-Z zcenter altitude83 altdecdeg".split(" ");
return q.forEach(u,function(J){H.push(J.name);var c=J.name.toLowerCase();-1<B.indexOf(J.type)&&-1===K.indexOf(c)&&I.push(J.name)}),{displayFields:H,vizFields:I}}p=f.createSubclass({declaredClass:"esri.layers.FxLayer",viewModulePaths:{"3d":"fx3d/views/3d/layers/FxLayerView3D"},properties:{renderingInfo:{value:null,set:function(u){var H=this._get("renderingInfo");b.isObject(u)&&!v.isEqual(u,H)&&this._set("renderingInfo",u)}},vizType:{value:null,set:function(u){var H=this._get("vizType");b.isString(u)&&
!v.isEqual(u,H)&&this._set("vizType",u)}},displayField:{type:String,value:null,json:{ignore:!0},set:function(u){var H=this._get("displayField");b.isString(u)&&!v.isEqual(u,H)&&this._set("displayField",u)}},vizFields:{value:null,set:function(u){u=b.isString(u)?[u]:u;var H=this._get("vizFields");b.isArray(u)&&!v.isEqual(u,H)&&this._set("vizFields",u)}},spinTag:{value:!1,set:function(u){var H=this._get("spinTag");"boolean"==typeof u&&u!==H&&this._set("spinTag",u)}},pauseTag:{value:!1,set:function(u){var H=
this._get("pauseTag");"boolean"==typeof u&&u!==H&&this._set("pauseTag",u)}}},constructor:function(u,H){this.importLayerViewModule(H.view);this.url=u;Object.keys(H).forEach(function(I){this[I]=H[I]}.bind(this));this.outFields=["*"];this.listMode="hide"},normalizeCtorArgs:function(u,H){return b.isString(u)&&v.isUrl(u)?(u=y.parse(u),u&&null!=u.sublayer&&null==this.layerId&&(this.layerId=u.sublayer),b.mixin({},{url:u.url.path},H)):(console.warn("Data source must be a FeatureService url."),null)},remove:function(){this.pauseAnimation();
this.pauseSpinning();this.emit("destroy-fxlayer");this.fxLayerView&&!1===this.fxLayerView.destroyed&&(this.fxLayerView.destroy(),this.fxLayerView=null)},_initLayerProperties:function(u){this.source||(this.source=u);u.url&&(this.url=u.url);var H=this.source.relatedFeaturesInfo,I=m.mixin({},u.sourceJSON,H?{objectIdField:H.joinField}:{});if(H&&(this.source.relatedFeaturesInfo.outFields=this.outFields?this.outFields.splice(0):null),this.sourceJSON=u.sourceJSON,this.read(I,{origin:"service",url:this.parsedUrl}),
H&&H.outFields&&"*"!==H.outFields[0]&&(H.outFields=H.outFields.map(function(k){return k.toLowerCase()})),this._verifySource(),this._verifyFields(),this.useQueryTimestamp=a("ie")||a("safari"),this.listMode="hide",this.disablePopup=!0,this.visible=!0,!b.isArray(this.fields))return void console.warn("Fileds from source is invalid.");u=x(this.fields);var B=u.vizFields;u=u.displayFields;var K=null,J=null;if(b.isString(this.displayField)&&0!==this.displayField.length?(J=null,K=q.some(u,function(k){if(k.toLowerCase()===
this.displayField.toLowerCase())return J=k,!0}.bind(this)),K?this.set("displayField",J):this.set("displayField",u[0])):this.set("displayField",u[0]),b.isArray(this.vizFields)&&0!==this.vizFields.length){var c=[];q.forEach(B,function(k){c.push(k.toLowerCase())});K=[];q.forEach(this.vizFields,function(k){k=c.indexOf(k.toLowerCase());-1<k&&K.push(B[k])}.bind(this));0<K.length?this.set("vizFields",K):this.set("vizFields",B[0])}else this.set("vizFields",B[0]);return this.availableVizTypes=v.availableVizTypes(this.geometryType,
this.timeInfo),b.isString(this.vizType)&&0!==this.vizType.length?(J=null,K=q.some(this.availableVizTypes,function(k){if(k.name.toLowerCase()===this.vizType.toLowerCase())return J=k.name,!0}.bind(this)),K?this.vizType=J:this.vizType=this.availableVizTypes[0]?this.availableVizTypes[0].name:null):this.vizType=this.availableVizTypes[0]?this.availableVizTypes[0].name:null,this.popupTemplate||(this.popupTemplate=new g({title:this.name,fieldInfos:this.fields?q.map(this.fields,function(k){return{fieldName:k.name,
label:k.name,visible:!0}}):[],content:"{*}"})),this.vizType&&0!=this.vizType.length&&this.displayField&&0!=this.displayField.length&&b.isArray(this.vizFields)&&0!=this.vizFields.length?(this.set("visible",!0),t.loadStyleRenderer(this,{origin:"service"})):(this.set("visible",!1),this.set("loaded",!1),this.emit("fxlayer-error",{msg:"Properties of vizType, displayField, vizFields, renderingInfo, or popupTemplate is missing."}),void console.warn("Properties of vizType, displayField, vizFields, renderingInfo, or popupTemplate is missing."))},
createQuery:function(){var u=new d,H=this.get("capabilities.data");return u.returnGeometry=!0,u.returnZ=H&&H.supportsZ&&this.returnZ||null,u.returnM=H&&H.supportsM&&this.returnM||null,u.outFields=this.outFields,u.where=this.definitionExpression||"1\x3d1",u.multipatchOption="multipatch"===this.geometryType?"xyFootprint":null,u.outFields=["*"],u},createQueryParameters:function(){var u=new d;return u.outSpatialReference=w.WGS84,Object.defineProperty(u,"outSpatialReference",{configurable:!0,writable:!1}),
u.returnGeometry=!0,u.returnZ=this.hasZ&&this.returnZ||null,u.returnM=this.hasM&&this.returnM||null,u.outFields=this.outFields,u.where=this.definitionExpression||"1\x3d1",u.multipatchOption="multipatch"===this.geometryType?"xyFootprint":null,queryParams.outFields=["*"],u},importLayerViewModule:function(u){"3d"===u.type&&(this.fxLayerView=new F({layer:this,view:u}))},showLabel:function(u){u&&this.emit("show-feature-label",{feature:u})},hideLabel:function(){this.emit("hide-feature-label")},startAnimation:function(){return this.visible?
void(this.pauseTag=!1):void console.warn("The FxLayer is invisible now.")},pauseAnimation:function(){this.pauseTag=!0},startSpinning:function(){return this.visible?void(this.spinTag=!0):void console.warn("The FxLayer is invisible now.")},pauseSpinning:function(){this.spinTag=!1},switchVizField:function(u,H){function I(J){-1<J&&J<B.vizFields.length?(B.emit("hide-feature-label"),B.emit("fx3d-active-viz-field",{currentVizPage:J,newRenderingInfo:H})):console.warn("invalid viz page in switchVizField(vizField).")}
if(!this.visible)return void console.warn("The FxLayer is invisible now.");var B=this;if(b.isString(u)){var K=[];q.forEach(this.vizFields,function(J){K.push(J.toLowerCase())});u=K.indexOf(u.toLowerCase());I(u)}else"number"==typeof u?I(u):console.warn("switchVizField(vizField) needs a integer id or string name as parameter.")}});return b.mixin(p,v.EffectType),p});